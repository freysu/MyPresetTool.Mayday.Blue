/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e,t,n={795:function(e,t,n){!function(e,t,n,r){"use strict";var o=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},i=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},a=function(e,t){return{startTime:t,type:"setValue",value:e}},s=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},c=function(e,t,n){var r=n.startTime,o=n.target,i=n.timeConstant;return o+(t-o)*Math.exp((r-e)/i)},u=function(e){return"exponentialRampToValue"===e.type},l=function(e){return"linearRampToValue"===e.type},d=function(e){return u(e)||l(e)},h=function(e){return"setValue"===e.type},f=function(e){return"setValueCurve"===e.type},p=function(e,t,n,r){var o=e[t];return void 0===o?r:d(o)||h(o)?o.value:f(o)?o.values[o.values.length-1]:c(n,p(e,t-1,o.startTime,r),o)},m=function(e,t,n,r,o){return void 0===n?[r.insertTime,o]:d(n)?[n.endTime,n.value]:h(n)?[n.startTime,n.value]:f(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,p(e,t-1,n.startTime,o)]},v=function(e){return"cancelAndHold"===e.type},g=function(e){return"cancelScheduledValues"===e.type},y=function(e){return v(e)||g(e)?e.cancelTime:u(e)||l(e)?e.endTime:e.startTime},b=function(e,t,n,r){var o=r.endTime,i=r.value;return n===i?i:0<n&&0<i||n<0&&i<0?n*Math.pow(i/n,(e-t)/(o-t)):0},w=function(e,t,n,r){return n+(e-t)/(r.endTime-t)*(r.value-n)},C=function(e,t){var n=t.duration,r=t.startTime,o=t.values;return function(e,t){var n=Math.floor(t),r=Math.ceil(t);return n===r?e[n]:(1-(t-n))*e[n]+(1-(r-t))*e[r]}(o,(e-r)/n*(o.length-1))},E=function(e){return"setTarget"===e.type},x=function(){return r((function e(t){n(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}),[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=y(e);if(v(e)||g(e)){var n=this._automationEvents.findIndex((function(n){return g(e)&&f(n)?n.startTime+n.duration>=t:y(n)>=t})),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),v(e)){var c=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&d(r)){if(void 0!==c&&E(c))throw new Error("The internal list is malformed.");var h=void 0===c?r.insertTime:f(c)?c.startTime+c.duration:y(c),p=void 0===c?this._defaultValue:f(c)?c.values[c.values.length-1]:c.value,m=u(r)?b(t,h,p,r):w(t,h,p,r),C=u(r)?o(m,t,this._currenTime):i(m,t,this._currenTime);this._automationEvents.push(C)}if(void 0!==c&&E(c)&&this._automationEvents.push(a(this.getValue(t),t)),void 0!==c&&f(c)&&c.startTime+c.duration>t){var x=t-c.startTime,_=(c.values.length-1)/c.duration,S=Math.max(2,1+Math.ceil(x*_)),k=x/(S-1)*_,I=c.values.slice(0,S);if(k<1)for(var A=1;A<S;A+=1){var T=k*A%1;I[A]=c.values[A-1]*(1-T)+c.values[A]*T}this._automationEvents[this._automationEvents.length-1]=s(I,c.startTime,x)}}}else{var M=this._automationEvents.findIndex((function(e){return y(e)>t})),O=-1===M?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[M-1];if(void 0!==O&&f(O)&&y(O)+O.duration>t)return!1;var N=u(e)?o(e.value,e.endTime,this._currenTime):l(e)?i(e.value,t,this._currenTime):e;if(-1===M)this._automationEvents.push(N);else{if(f(e)&&t+e.duration>y(this._automationEvents[M]))return!1;this._automationEvents.splice(M,0,N)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex((function(t){return y(t)>e}));if(t>1){var n=this._automationEvents.slice(t-1),r=n[0];E(r)&&n.unshift(a(p(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex((function(t){return y(t)>e})),r=this._automationEvents[n],o=(-1===n?this._automationEvents.length:n)-1,i=this._automationEvents[o];if(void 0!==i&&E(i)&&(void 0===r||!d(r)||r.insertTime>e))return c(e,p(this._automationEvents,o-1,i.startTime,this._defaultValue),i);if(void 0!==i&&h(i)&&(void 0===r||!d(r)))return i.value;if(void 0!==i&&f(i)&&(void 0===r||!d(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?C(e,i):i.values[i.values.length-1];if(void 0!==i&&d(i)&&(void 0===r||!d(r)))return i.value;if(void 0!==r&&u(r)){var a=m(this._automationEvents,o,i,r,this._defaultValue),s=t(a,2),v=s[0],g=s[1];return b(e,v,g,r)}if(void 0!==r&&l(r)){var x=m(this._automationEvents,o,i,r,this._defaultValue),_=t(x,2),S=_[0],k=_[1];return w(e,S,k,r)}return this._defaultValue}}])}();e.AutomationEventList=x,e.createCancelAndHoldAutomationEvent=function(e){return{cancelTime:e,type:"cancelAndHold"}},e.createCancelScheduledValuesAutomationEvent=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},e.createExponentialRampToValueAutomationEvent=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},e.createLinearRampToValueAutomationEvent=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},e.createSetTargetAutomationEvent=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}},e.createSetValueAutomationEvent=a,e.createSetValueCurveAutomationEvent=s}(t,n(715),n(383),n(579))},389:function(e,t){!function(e){"use strict";var t,n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,r=536870912,o=1073741824,i=new WeakMap,a=function(e,t){return function(i){var a=t.get(i),s=void 0===a?i.size:a<o?a+1:0;if(!i.has(s))return e(i,s);if(i.size<r){for(;i.has(s);)s=Math.floor(Math.random()*o);return e(i,s)}if(i.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;i.has(s);)s=Math.floor(Math.random()*n);return e(i,s)}}((t=i,function(e,n){return t.set(e,n),n}),i),s=function(e){return function(t){var n=e(t);return t.add(n),n}}(a);e.addUniqueNumber=s,e.generateUniqueNumber=a}(t)},790:(e,t,n)=>{e.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var i=void 0,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,r){(function(e){"use strict";var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}t.exports=function(e){1!==u.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&f(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return i.reject(e,t)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}var a=p((function(){t(o,r)}));"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?d(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},u.reject=function(e){var t=new this(o);return i.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,u=new this(o);++c<n;)l(e[c],c);return u;function l(e,o){t.resolve(e).then((function(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(u,a))}),(function(e){r||(r=!0,i.reject(u,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n,r=e.length,a=!1;if(!r)return this.resolve([]);for(var s=-1,c=new this(o);++s<r;)n=e[s],t.resolve(n).then((function(e){a||(a=!0,i.resolve(c,e))}),(function(e){a||(a=!0,i.reject(c,e))}));return c}},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function s(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",h=void 0,f={},p=Object.prototype.toString,m="readonly",v="readwrite";function g(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function y(e){return"boolean"==typeof h?a.resolve(h):function(e){return new a((function(t){var n=e.transaction(d,v),r=i([""]);n.objectStore(d).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return h=e}))}function b(e){var t=f[e.name],n={};n.promise=new a((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function w(e){var t=f[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function C(e,t){var n=f[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function E(e,t){return new a((function(n,r){if(f[e.name]=f[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);b(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=o.open.apply(o,i);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(d)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},n(t),w(e)}}))}function x(e){return E(e,!1)}function _(e){return E(e,!0)}function S(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function k(e){return i([g(atob(e.data))],{type:e.type})}function I(e){return e&&e.__local_forage_encoded_blob}function A(e){var t=this,n=t._initReady().then((function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(n,e,e),n}function T(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),_(e)})).then((function(){return function(e){b(e);for(var t=f[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,x(e).then((function(t){return e.db=t,S(e)?_(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw C(e,t),t}))}(e).then((function(){T(e,t,n,r-1)}))})).catch(n);n(o)}}var M={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=f[n.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},f[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=A);var i=[];function s(){return a.resolve()}for(var c=0;c<o.forages.length;c++){var u=o.forages[c];u!==t&&i.push(u._initReady().catch(s))}var l=o.forages.slice(0);return a.all(i).then((function(){return n.db=o.db,x(n)})).then((function(e){return n.db=e,S(n,t._defaultConfig.version)?_(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var i=l[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))},_support:function(){try{if(!o||!o.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){T(n._dbInfo,m,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;I(r)&&(r=k(r));var o=e(r,n.key,s++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){T(n._dbInfo,m,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),I(e)&&(e=k(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var o=new a((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===p.call(t)?y(i.db).then((function(e){return e?t:(n=t,new a((function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):t})).then((function(t){T(r._dbInfo,v,(function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return s(o,n),o},removeItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){T(n._dbInfo,v,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},clear:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){T(t._dbInfo,v,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){T(t._dbInfo,m,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,r=new a((function(t,r){e<0?t(null):n.ready().then((function(){T(n._dbInfo,m,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},keys:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){T(t._dbInfo,m,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var i=e.name===r.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):x(e).then((function(t){var n=f[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));n=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;b(e);var r=f[e.name],i=r.forages;t.close();for(var s=0;s<i.length;s++){var c=i[s];c._dbInfo.db=null,c._dbInfo.version=n}var u=new a((function(t,r){var i=o.open(e.name,n);i.onerror=function(e){i.result.close(),r(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}}));return u.then((function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,w(n._dbInfo)}})).catch((function(t){throw(C(e,t)||a.resolve()).catch((function(){})),t}))}})):i.then((function(t){b(e);var n=f[e.name],r=n.forages;t.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;var s=new a((function(t,n){var r=o.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return s.then((function(e){n.db=e;for(var t=0;t<r.length;t++)w(r[t]._dbInfo)})).catch((function(t){throw(C(e,t)||a.resolve()).catch((function(){})),t}))}))}else n=a.reject("Invalid arguments");return s(n,t),n}};var O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=/^~~local_forage_type~([^~]+)~/,L="__lfsc__:",D="arbf",P="blob",R="si08",B="ui08",F="uic8",j="si16",W="si32",z="ur16",q="ui32",V="fl32",U="fl64",H=Object.prototype.toString;function X(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=O.indexOf(e[t]),r=O.indexOf(e[t+1]),o=O.indexOf(e[t+2]),i=O.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u}function Y(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=O[n[t]>>2],r+=O[(3&n[t])<<4|n[t+1]>>4],r+=O[(15&n[t+1])<<2|n[t+2]>>6],r+=O[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var G={serialize:function(e,t){var n="";if(e&&(n=H.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===H.call(e.buffer))){var r,o=L;e instanceof ArrayBuffer?(r=e,o+=D):(r=e.buffer,"[object Int8Array]"===n?o+=R:"[object Uint8Array]"===n?o+=B:"[object Uint8ClampedArray]"===n?o+=F:"[object Int16Array]"===n?o+=j:"[object Uint16Array]"===n?o+=z:"[object Int32Array]"===n?o+=W:"[object Uint32Array]"===n?o+=q:"[object Float32Array]"===n?o+=V:"[object Float64Array]"===n?o+=U:t(new Error("Failed to get type for BinaryArray"))),t(o+Y(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n="~~local_forage_type~"+e.type+"~"+Y(this.result);t(L+P+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if(e.substring(0,9)!==L)return JSON.parse(e);var t,n=e.substring(13),r=e.substring(9,13);if(r===P&&N.test(n)){var o=n.match(N);t=o[1],n=n.substring(o[0].length)}var a=X(n);switch(r){case D:return a;case P:return i([a],{type:t});case R:return new Int8Array(a);case B:return new Uint8Array(a);case F:return new Uint8ClampedArray(a);case j:return new Int16Array(a);case z:return new Uint16Array(a);case W:return new Int32Array(a);case q:return new Uint32Array(a);case V:return new Float32Array(a);case U:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}},stringToBuffer:X,bufferToString:Y};function Z(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function $(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):Z(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,a)}),i)}function Q(e,t,n,r){var o=this;e=u(e);var i=new a((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?a(u):c.db.transaction((function(n){$(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Q.apply(o,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return s(i,n),i}var J={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new a((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){Z(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=G,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,c.key,s+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},setItem:function(e,t,n){return Q.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},clear:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){$(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){$(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},keys:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){$(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return s(r=e.name?new a((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(function(e){return new a((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}(r))})).then((function(e){return new a((function(t,n){e.db.transaction((function(r){function o(e){return new a((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],s=0,c=e.storeNames.length;s<c;s++)i.push(o(e.storeNames[s]));a.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):a.reject("Invalid arguments"),t),r}};function K(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function ee(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0}var te={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=K(e,this._defaultConfig),ee()?(this._dbInfo=t,t.serializer=G,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(o),a++)))return u}}}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return s(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new a((function(o,i){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return s(o,n),o},removeItem:function(e,t){var n=this;e=u(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return s(r,t),r},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return s(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return s(t,e),t},key:function(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return s(r,t),r},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return s(n,e),n},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new a((function(t){e.storeName?t(K(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):a.reject("Invalid arguments"),s(r,t),r}},ne=function(e,t){for(var n=e.length,r=0;r<n;){if((o=e[r])===(i=t)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;r++}var o,i;return!1},re=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},oe={},ie={},ae={INDEXEDDB:M,WEBSQL:J,LOCALSTORAGE:te},se=[ae.INDEXEDDB._driver,ae.WEBSQL._driver,ae.LOCALSTORAGE._driver],ce=["dropInstance"],ue=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ce),le={description:"",driver:se.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function de(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function he(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(re(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var fe=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ae)if(ae.hasOwnProperty(n)){var r=ae[n],o=r._driver;this[n]=o,oe[o]||this.defineDriver(r)}this._defaultConfig=he({},le),this._config=he({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new a((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=ue.concat("_initStorage"),c=0,u=i.length;c<u;c++){var l=i[c];if((!ne(ce,l)||e[l])&&"function"!=typeof e[l])return void n(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=a.reject(t);return s(n,arguments[arguments.length-1]),n}},n=0,r=ce.length;n<r;n++){var o=ce[n];e[o]||(e[o]=t(o))}}();var d=function(n){oe[r]&&console.info("Redefining LocalForage driver: "+r),oe[r]=e,ie[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}catch(e){n(e)}}));return c(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=oe[e]?a.resolve(oe[e]):a.reject(new Error("Driver not found."));return c(r,t,n),r},e.prototype.getSerializer=function(e){var t=a.resolve(G);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;re(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function s(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=u.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(s).catch(n)}i();var c=new Error("No available storage method found.");return r._driverSet=a.reject(c),r._driverSet}()}}(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=a.reject(e),r._driverSet})),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!ie[e]},e.prototype._extend=function(e){he(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=ue.length;e<t;e++)de(this,ue[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),pe=new fe;t.exports=pe},{3:3}]},{},[4])(4)},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},383:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,n)=>{var r=n(736);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}e.exports=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,n)=>{var r=n(987),o=n(156),i=n(122),a=n(752);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},45:(e,t,n)=>{var r=n(738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,n)=>{var r=n(738).default,o=n(45);e.exports=function(e){var t=o(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,n)=>{var r=n(79);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e].call(i.exports,i,i.exports,o),i.exports}o.m=n,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>e+".bundle.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="mypresets.mayday.blue:",o.l=(n,r,i,a)=>{if(e[n])e[n].push(r);else{var s,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",t+i),s.src=n),e[n]=[r];var h=(t,r)=>{s.onerror=s.onload=null,clearTimeout(f);var o=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(r))),t)return t(r)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={792:0};o.f.j=(t,n)=>{var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=i);var a=o.p+o.u(t),s=new Error;o.l(a,(n=>{if(o.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[a,s,c]=n,u=0;if(a.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);c&&c(o)}for(t&&t(n);u<a.length;u++)i=a[u],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkmypresets_mayday_blue=self.webpackChunkmypresets_mayday_blue||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e=o(790),t=o.n(e),n=o(389),r=o(795);const i=new WeakSet,a=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,m={construct:()=>m},v=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,g=(e,t)=>{const n=[];let r=e.replace(/^[\s]+/,""),o=r.match(v);for(;null!==o;){const e=o[1].slice(1,-1),i=o[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(i),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(v)}return[n.join(";"),r]},y=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},b=e=>{if(!(e=>{try{new new Proxy(e,m)}catch{return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!=typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},w=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},C=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[r]=n;return e.delete(r),r},E=(e,t,n,r)=>{const o=w(e,t),i=C(o,(e=>e[0]===n&&e[1]===r));return 0===o.size&&e.delete(t),i},x=e=>w(d,e),_=e=>{if(i.has(e))throw new Error("The AudioNode is already stored.");i.add(e),x(e).forEach((e=>e(!0)))},S=e=>"port"in e,k=e=>{if(!i.has(e))throw new Error("The AudioNode is not stored.");i.delete(e),x(e).forEach((e=>e(!1)))},I=(e,t)=>{!S(e)&&t.every((e=>0===e.size))&&k(e)},A={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},T=(e,t)=>e.context===t,M=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},O=()=>new DOMException("","IndexSizeError"),N=e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(e){if(12===e.code)throw O();throw e}})},L={numberOfChannels:1},D=-34028234663852886e22,P=-D,R=e=>i.has(e),B={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},F=e=>w(a,e),j=e=>w(c,e),W=(e,t)=>{const{activeInputs:n}=F(e);n.forEach((n=>n.forEach((([n])=>{t.includes(e)||W(n,[...t,e])}))));const r=(e=>"playbackRate"in e)(e)?[e.playbackRate]:S(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:(e=>"offset"in e)(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e&&!("gain"in e))(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const e of r){const n=j(e);void 0!==n&&n.activeInputs.forEach((([e])=>W(e,t)))}R(e)&&k(e)},z=e=>"context"in e,q=e=>z(e[0]),V=(e,t,n,r)=>{for(const t of e)if(n(t)){if(r)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},U=(e,t,[n,r],o)=>{V(e,[t,n,r],(e=>e[0]===t&&e[1]===n),o)},H=(e,[t,n,r],o)=>{const i=e.get(t);void 0===i?e.set(t,new Set([[n,r]])):V(i,[n,r],(e=>e[0]===n),o)},X=e=>"inputs"in e,Y=(e,t,n,r)=>{if(X(t)){const o=t.inputs[r];return e.connect(o,n,0),[o,n,0]}return e.connect(t,n,r),[t,n,r]},G=(e,t,n)=>{for(const r of e)if(r[0]===t&&r[1]===n)return e.delete(r),r;return null},Z=(e,t)=>{if(!x(e).delete(t))throw new Error("Missing the expected event listener.")},$=(e,t,n)=>{const r=w(e,t),o=C(r,(e=>e[0]===n));return 0===r.size&&e.delete(t),o},Q=(e,t,n,r)=>{X(t)?e.disconnect(t.inputs[r],n,0):e.disconnect(t,n,r)},J=e=>w(s,e),K=e=>w(u,e),ee=e=>h.has(e),te=e=>!i.has(e),ne=(e,t)=>new Promise((n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),r=e.createGain(),o=e.createBuffer(1,2,44100),i=o.getChannelData(0);i[0]=1,i[1]=1;const a=e.createBufferSource();a.buffer=o,a.loop=!0,a.connect(t).connect(e.destination),a.connect(r),a.disconnect(r),t.onaudioprocess=r=>{const o=r.inputBuffer.getChannelData(0);Array.prototype.some.call(o,(e=>1===e))?n(!0):n(!1),a.stop(),t.onaudioprocess=null,a.disconnect(t),t.disconnect(e.destination)},a.start()}})),re=(e,t)=>{const n=new Map;for(const t of e)for(const e of t){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach(((e,n)=>t(n,e)))},oe=e=>"context"in e,ie=e=>{const t=new Map;var n,r;e.connect=(n=e.connect.bind(e),(e,r=0,o=0)=>{const i=oe(e)?n(e,r,o):n(e,r),a=t.get(e);return void 0===a?t.set(e,[{input:o,output:r}]):a.every((e=>e.input!==o||e.output!==r))&&a.push({input:o,output:r}),i}),e.disconnect=(r=e.disconnect,(n,o,i)=>{if(r.apply(e),void 0===n)t.clear();else if("number"==typeof n)for(const[e,r]of t){const o=r.filter((e=>e.output!==n));0===o.length?t.delete(e):t.set(e,o)}else if(t.has(n))if(void 0===o)t.delete(n);else{const e=t.get(n);if(void 0!==e){const r=e.filter((e=>e.output!==o&&(e.input!==i||void 0===i)));0===r.length?t.delete(n):t.set(n,r)}}for(const[n,r]of t)r.forEach((t=>{oe(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)}))})},ae=(e,t,n,r,o)=>{const[i,a]=((e,t,n,r)=>{const{activeInputs:o,passiveInputs:i}=F(t),a=G(o[r],e,n);return null===a?[E(i,e,n,r)[2],!1]:[a[2],!0]})(e,n,r,o);if(null!==i&&(Z(e,i),!a||t||ee(e)||Q(J(e),J(n),r,o)),R(n)){const{activeInputs:e}=F(n);I(n,e)}},se=(e,t,n,r)=>{const[o,i]=((e,t,n)=>{const{activeInputs:r,passiveInputs:o}=j(t),i=G(r,e,n);return null===i?[$(o,e,n)[1],!1]:[i[2],!0]})(e,n,r);null!==o&&(Z(e,o),!i||t||ee(e)||J(e).disconnect(K(n),r))};class ce{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach(((n,r)=>e.call(t,n,r,this)))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}function ue(e,t,n,r,o){if("function"==typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],r,o);else{const i=e.getChannelData(r);if(0===t[n].byteLength)t[n]=i.slice(o,o+128);else{const e=new Float32Array(i.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const le=(e,t,n,r,o)=>{"function"==typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],r,o):0!==t[n].byteLength&&e.getChannelData(r).set(t[n],o)},de=(e,t)=>{const n=[];for(let r=0;r<e;r+=1){const e=[],o="number"==typeof t?t:t[r];for(let t=0;t<o;t+=1)e.push(new Float32Array(128));n.push(e)}return n},he=async(e,t,n,r,o,i,a)=>{const s=null===t?128*Math.ceil(e.context.length/128):t.length,c=r.channelCount*r.numberOfInputs,u=o.reduce(((e,t)=>e+t),0),l=0===u?null:n.createBuffer(u,s,n.sampleRate);if(void 0===i)throw new Error("Missing the processor constructor.");const d=F(e),h=await((e,t)=>{const n=w(p,e),r=J(t);return w(n,r)})(n,e),f=de(r.numberOfInputs,r.channelCount),m=de(r.numberOfOutputs,o),v=Array.from(e.parameters.keys()).reduce(((e,t)=>({...e,[t]:new Float32Array(128)})),{});for(let u=0;u<s;u+=128){if(r.numberOfInputs>0&&null!==t)for(let e=0;e<r.numberOfInputs;e+=1)for(let n=0;n<r.channelCount;n+=1)ue(t,f[e],n,n,u);void 0!==i.parameterDescriptors&&null!==t&&i.parameterDescriptors.forEach((({name:e},n)=>{ue(t,v,e,c+n,u)}));for(let e=0;e<r.numberOfInputs;e+=1)for(let t=0;t<o[e];t+=1)0===m[e][t].byteLength&&(m[e][t]=new Float32Array(128));try{const e=f.map(((e,t)=>0===d.activeInputs[t].size?[]:e)),t=a(u/n.sampleRate,n.sampleRate,(()=>h.process(e,m,v)));if(null!==l)for(let e=0,t=0;e<r.numberOfOutputs;e+=1){for(let n=0;n<o[e];n+=1)le(l,m[e],n,t+n,u);t+=o[e]}if(!t)break}catch(t){e.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}));break}}return l},fe={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},pe={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},me={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},ve={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},ge={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},ye=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise((r=>{const o=()=>{n.onmessage=null,t.close(),n.close(),r()};n.onmessage=()=>o();try{t.postMessage(e,[e])}catch{}finally{o()}}))},be={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},we=(e,t,n)=>{const r=t[n];if(void 0===r)throw e();return r},Ce={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Ee={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},xe=()=>new DOMException("","InvalidStateError"),_e=()=>new DOMException("","InvalidAccessError"),Se={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},ke=(e,t,n,r,o,i,a,s,c,u,l)=>{const d=u.length;let h=s;for(let s=0;s<d;s+=1){let d=n[0]*u[s];for(let t=1;t<o;t+=1){const r=h-t&c-1;d+=n[t]*i[r],d-=e[t]*a[r]}for(let e=o;e<r;e+=1)d+=n[e]*i[h-e&c-1];for(let n=o;n<t;n+=1)d-=e[n]*a[h-n&c-1];i[h]=u[s],a[h]=d,h=h+1&c-1,l[s]=d}return h},Ie={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Ae=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},Te=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n]&&(e[n]=r)},Me=(e,t)=>{Te(e,t,"channelCount"),Te(e,t,"channelCountMode"),Te(e,t,"channelInterpretation")},Oe=e=>"function"==typeof e.getFloatTimeDomainData,Ne=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n].value&&(e[n].value=r)},Le=e=>{var t;e.start=(t=e.start,(n=0,r=0,o)=>{if("number"==typeof o&&o<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,r,o)})},De=e=>{var t;e.stop=(t=e.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},Pe=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),Re=(e,t)=>{const n=e.createBiquadFilter();return Me(n,t),Ne(n,t,"Q"),Ne(n,t,"detune"),Ne(n,t,"frequency"),Ne(n,t,"gain"),Te(n,t,"type"),n},Be=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return Me(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw xe()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw xe()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw xe()}})})(n),n},Fe=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),je=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return Me(n,t),Ne(n,t,"delayTime"),n},We=(e,t)=>{const n=e.createGain();return Me(n,t),Ne(n,t,"gain"),n};function ze(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function qe(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function Ve(e,t){let n=[0,0];for(let r=e.length-1;r>=0;r-=1)n=qe(n,t),n[0]+=e[r];return n}const Ue=(e,t,n,r)=>e.createScriptProcessor(t,n,r),He=()=>new DOMException("","NotSupportedError"),Xe={numberOfChannels:1},Ye={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Ge={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Ze={disableNormalization:!1},$e={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Qe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Je=(e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),Ke=e=>{if(null===e)return!1;const t=e.length;return t%2!=0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},et=(e,t,n,r)=>{let o=e;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:i,set:a}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(e,t,{get:n(i),set:r(a)})},tt=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(r){if(9!==r.code)throw r;tt(e,t,n+1e-7)}},nt=e=>{const t=e.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},rt=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},ot=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},it=(e,t)=>{const n=t.createGain();e.connect(n);const r=(o=e.disconnect,()=>{o.call(e,n),e.removeEventListener("ended",r)});var o;e.addEventListener("ended",r),Fe(e,n),e.stop=(t=>{let r=!1;return(o=0)=>{if(r)try{t.call(e,o)}catch{n.gain.setValueAtTime(0,o)}else t.call(e,o),r=!0}})(e.stop)},at=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"==typeof t?t.call(e,n):t.handleEvent.call(e,n)},st=(e=>(t,n,[r,o,i],a)=>{e(t[o],[n,r,i],(e=>e[0]===n&&e[1]===r),a)})(V),ct=(e=>(t,n,[r,o,i],a)=>{const s=t.get(r);void 0===s?t.set(r,new Set([[o,n,i]])):e(s,[o,n,i],(e=>e[0]===o&&e[1]===n),a)})(V),ut=(e=>(t,n,r,o)=>e(t[o],(e=>e[0]===n&&e[1]===r)))(C),lt=new WeakMap,dt=(e=>t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:0})(lt),ht=(ft=new Map,pt=new WeakMap,(e,t)=>{const n=pt.get(e);if(void 0!==n)return n;const r=ft.get(e);if(void 0!==r)return r;try{const n=t();return n instanceof Promise?(ft.set(e,n),n.catch((()=>!1)).then((t=>(ft.delete(e),pt.set(e,t),t)))):(pt.set(e,n),n)}catch{return pt.set(e,!1),!1}});var ft,pt;const mt="undefined"==typeof window?null:window,vt=((e,t)=>(n,r)=>{const o=n.createAnalyser();if(Me(o,r),!(r.maxDecibels>r.minDecibels))throw t();return Te(o,r,"fftSize"),Te(o,r,"maxDecibels"),Te(o,r,"minDecibels"),Te(o,r,"smoothingTimeConstant"),e(Oe,(()=>Oe(o)))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const r=Math.max(n.length,e.fftSize);for(let e=0;e<r;e+=1)t[e]=.0078125*(n[e]-128);return t}})(o),o})(ht,O),gt=(e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(F),yt=((e,t,n)=>async(r,o,i)=>{const a=e(r);await Promise.all(a.activeInputs.map(((e,a)=>Array.from(e).map((async([e,s])=>{const c=t(e),u=await c.render(e,o),l=r.context.destination;n(e)||r===l&&n(r)||u.connect(i,s,a)})))).reduce(((e,t)=>[...e,...t]),[]))})(F,gt,ee),bt=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,i){const a=r.get(i);return void 0!==a?Promise.resolve(a):(async(o,i)=>{let a=t(o);if(!T(a,i)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=e(i,t)}return r.set(i,a),await n(o,i,a),a})(o,i)}}})(vt,J,yt),wt=(Ct=l,e=>{const t=Ct.get(e);if(void 0===t)throw xe();return t});var Ct;const Et=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(mt),xt=(e=>t=>null!==e&&t instanceof e)(Et),_t=new WeakMap,St=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,r){if(null!==n){let o=this._listeners.get(n);void 0===o&&(o=e(this,n),"function"==typeof n&&this._listeners.set(n,o)),this._nativeEventTarget.addEventListener(t,o,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const r=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===r?null:r,n)}})(at),kt=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(mt),It=(e=>t=>null!==e&&t instanceof e)(kt),At=(e=>t=>null!==e&&"function"==typeof e.AudioNode&&t instanceof e.AudioNode)(mt),Tt=(e=>t=>null!==e&&"function"==typeof e.AudioParam&&t instanceof e.AudioParam)(mt),Mt=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(mt),Ot=((e,t,n,r,o,i,a,c,u,l,h,f,p,m,v,g)=>class extends l{constructor(t,r,o,i){super(o),this._context=t,this._nativeAudioNode=o;const a=h(t);f(a)&&!0!==n(ne,(()=>ne(a,g)))&&ie(o),s.set(this,o),d.set(this,new Set),"closed"!==t.state&&r&&_(this),e(this,i,o)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e,n=0,s=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw o();const c=h(this._context),l=v(c);if(p(e)||m(e))throw i();if(z(e)){const o=J(e);try{const t=Y(this._nativeAudioNode,o,n,s),r=te(this);(l||r)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!r&&te(e)&&_(e)}catch(e){if(12===e.code)throw i();throw e}if(t(this,e,n,s,l)){const t=u([this],e);re(t,r(l))}return e}const d=K(e);if("playbackRate"===d.name&&1024===d.maxValue)throw a();try{this._nativeAudioNode.connect(d,n),(l||te(this))&&this._nativeAudioNode.disconnect(d,n)}catch(e){if(12===e.code)throw i();throw e}if(((e,t,n,r)=>{const{activeInputs:o,passiveInputs:i}=j(t),{outputs:a}=F(e),s=x(e),c=a=>{const s=J(e),c=K(t);if(a){const t=$(i,e,n);U(o,e,t,!1),r||ee(e)||s.connect(c,n)}else{const t=((e,t,n)=>C(e,(e=>e[0]===t&&e[1]===n)))(o,e,n);H(i,t,!1),r||ee(e)||s.disconnect(c,n)}};return!!V(a,[t,n],(e=>e[0]===t&&e[1]===n),!0)&&(s.add(c),R(e)?U(o,e,[n,c],!0):H(i,[e,n,c],!0),!0)})(this,e,n,l)){const t=u([this],e);re(t,r(l))}}disconnect(e,t,n){let r;const a=h(this._context),s=v(a);if(void 0===e)r=((e,t)=>{const n=F(e),r=[];for(const o of n.outputs)q(o)?ae(e,t,...o):se(e,t,...o),r.push(o[0]);return n.outputs.clear(),r})(this,s);else if("number"==typeof e){if(e<0||e>=this.numberOfOutputs)throw o();r=((e,t,n)=>{const r=F(e),o=[];for(const i of r.outputs)i[1]===n&&(q(i)?ae(e,t,...i):se(e,t,...i),o.push(i[0]),r.outputs.delete(i));return o})(this,s,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw o();if(z(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw o();if(r=((e,t,n,r,o)=>{const i=F(e);return Array.from(i.outputs).filter((e=>!(e[0]!==n||void 0!==r&&e[1]!==r||void 0!==o&&e[2]!==o))).map((n=>(q(n)?ae(e,t,...n):se(e,t,...n),i.outputs.delete(n),n[0])))})(this,s,e,t,n),0===r.length)throw i()}for(const e of r){const t=u([this],e);re(t,c)}}})((Nt=a,(e,t,n)=>{const r=[];for(let e=0;e<n.numberOfInputs;e+=1)r.push(new Set);Nt.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((e,t,n,r,o,i,a,s,c,u,l,d,h)=>{const f=new WeakMap;return(p,m,v,g,y)=>{const{activeInputs:b,passiveInputs:w}=i(m),{outputs:C}=i(p),x=s(p),S=i=>{const s=c(m),u=c(p);if(i){const t=E(w,p,v,g);e(b,p,t,!1),y||d(p)||n(u,s,v,g),h(m)&&_(m)}else{const e=r(b,p,v,g);t(w,g,e,!1),y||d(p)||o(u,s,v,g);const n=a(m);if(0===n)l(m)&&I(m,b);else{const e=f.get(m);void 0!==e&&clearTimeout(e),f.set(m,setTimeout((()=>{l(m)&&I(m,b)}),1e3*n))}}};return!!u(C,[m,v,g],(e=>e[0]===m&&e[1]===v&&e[2]===g),!0)&&(x.add(S),l(p)?e(b,p,[v,g,S],!0):t(w,g,[p,v,S],!0),!0)}})(st,ct,Y,ut,Q,F,dt,x,J,V,R,ee,te),ht,((e,t,n,r,o,i)=>a=>(s,c)=>{const u=e.get(s);if(void 0===u){if(!a&&i(s)){const e=r(s),{outputs:i}=n(s);for(const n of i)if(q(n)){const o=r(n[0]);t(e,o,n[1],n[2])}else{const t=o(n[0]);e.disconnect(t,n[1])}}e.set(s,c)}else e.set(s,u+c)})(h,Q,F,J,K,R),O,_e,He,((e,t,n,r,o,i,a,s)=>(c,u)=>{const l=t.get(c);if(void 0===l)throw new Error("Missing the expected cycle count.");const d=i(c.context),h=s(d);if(l===u){if(t.delete(c),!h&&a(c)){const t=r(c),{outputs:i}=n(c);for(const n of i)if(q(n)){const o=r(n[0]);e(t,o,n[1],n[2])}else{const e=o(n[0]);t.connect(e,n[1])}}}else t.set(c,l-u)})(Y,h,F,J,K,wt,R,xt),((e,t,n)=>function r(o,i){const a=z(i)?i:n(e,i);if((e=>"delayTime"in e)(a))return[];if(o[0]===a)return[o];if(o.includes(a))return[];const{outputs:s}=t(a);return Array.from(s).map((e=>r([...o,a],e[0]))).reduce(((e,t)=>e.concat(t)),[])})(_t,F,w),St,wt,It,At,Tt,xt,Mt);var Nt;const Lt=((e,t,n,r,o,i)=>class extends e{constructor(e,n){const a=o(e),s={...A,...n},c=r(a,s);super(e,!1,c,i(a)?t():null),this._nativeAnalyserNode=c}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(Ot,bt,O,vt,wt,xt),Dt=new WeakSet,Pt=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(mt),Rt=(Bt=new Uint32Array(1),e=>(Bt[0]=e,Bt[0]));var Bt;const Ft=((e,t)=>n=>{n.copyFromChannel=(r,o,i=0)=>{const a=e(i),s=e(o);if(s>=n.numberOfChannels)throw t();const c=n.length,u=n.getChannelData(s),l=r.length;for(let e=a<0?-a:0;e+a<c&&e<l;e+=1)r[e]=u[e+a]},n.copyToChannel=(r,o,i=0)=>{const a=e(i),s=e(o);if(s>=n.numberOfChannels)throw t();const c=n.length,u=n.getChannelData(s),l=r.length;for(let e=a<0?-a:0;e+a<c&&e<l;e+=1)u[e+a]=r[e]}})(Rt,O),jt=(e=>t=>{t.copyFromChannel=(n=>(r,o,i=0)=>{const a=e(i),s=e(o);if(a<t.length)return n.call(t,r,s,a)})(t.copyFromChannel),t.copyToChannel=(n=>(r,o,i=0)=>{const a=e(i),s=e(o);if(a<t.length)return n.call(t,r,s,a)})(t.copyToChannel)})(Rt),Wt=((e,t,n,r,o,i,a,s)=>{let c=null;return class u{constructor(u){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:l,numberOfChannels:d,sampleRate:h}={...L,...u};null===c&&(c=new o(1,1,44100));const f=null!==r&&t(i,i)?new r({length:l,numberOfChannels:d,sampleRate:h}):c.createBuffer(d,l,h);if(0===f.numberOfChannels)throw n();return"function"!=typeof f.copyFromChannel?(a(f),N(f)):t(M,(()=>M(f)))||s(f),e.add(f),f}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===u.prototype||e.has(t)}}})(Dt,ht,He,Pt,Et,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0})(Pt),Ft,jt),zt=(e=>(t,n)=>{const r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(t.destination);const o=()=>{n.removeEventListener("ended",o),n.disconnect(r),r.disconnect()};n.addEventListener("ended",o)})(We),qt=((e,t,n)=>async(r,o,i)=>{const a=t(r);await Promise.all(Array.from(a.activeInputs).map((async([t,r])=>{const a=e(t),s=await a.render(t,o);n(t)||s.connect(i,r)})))})(gt,j,ee),Vt=(e=>(t,n,r)=>e(n,t,r))(qt),Ut=((e,t,n,r,o,i,a,s,c,u,l)=>(c,d)=>{const h=c.createBufferSource();return Me(h,d),Ne(h,d,"playbackRate"),Te(h,d,"buffer"),Te(h,d,"loop"),Te(h,d,"loopEnd"),Te(h,d,"loopStart"),t(n,(()=>n(c)))||(e=>{e.start=(t=>{let n=!1;return(r=0,o=0,i)=>{if(n)throw xe();t.call(e,r,o,i),n=!0}})(e.start)})(h),t(r,(()=>r(c)))||(e=>{var t;e.start=(t=e.start,(n=0,r=0,o)=>{const i=e.buffer,a=null===i?r:Math.min(i.duration,r);null!==i&&a>i.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,a,o)})})(h),t(o,(()=>o(c)))||u(h,c),t(i,(()=>i(c)))||Le(h),t(a,(()=>a(c)))||l(h,c),t(s,(()=>s(c)))||De(h),e(c,h),h})(zt,ht,(e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1}),(e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0}),(e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0}),nt,rt,ot,0,(e=>(t,n)=>{const r=n.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=r),e(t,"buffer",(e=>()=>{const n=e.call(t);return n===r?null:n}),(e=>n=>e.call(t,null===n?r:n)))})(et),it),Ht=((e,t)=>(n,r,o)=>(e(r).replay(o),t(r,n,o)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(j),qt),Xt=((e,t,n,r,o)=>()=>{const i=new WeakMap;let a=null,s=null;return{set start(e){a=e},set stop(e){s=e},render(c,u){const l=i.get(u);return void 0!==l?Promise.resolve(l):(async(c,u)=>{let l=n(c);const d=T(l,u);if(!d){const e={buffer:l.buffer,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,loop:l.loop,loopEnd:l.loopEnd,loopStart:l.loopStart,playbackRate:l.playbackRate.value};l=t(u,e),null!==a&&l.start(...a),null!==s&&l.stop(s)}return i.set(u,l),d?await e(u,c.playbackRate,l.playbackRate):await r(u,c.playbackRate,l.playbackRate),await o(c,u,l),l})(c,u)}}})(Vt,Ut,J,Ht,yt),Yt=((e,t,n,o,i,a,s,c,u,l,d,h,f)=>(o,p,m,v=null,g=null)=>{const y=m.value,b=new r.AutomationEventList(y),w=p?(e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:r}=n;t.exponentialRampToValueAtTime(r,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:r}=n;t.linearRampToValueAtTime(r,e)}else if("setTarget"===n.type){const{startTime:e,target:r,timeConstant:o}=n;t.setTargetAtTime(r,e,o)}else if("setValue"===n.type){const{startTime:e,value:r}=n;t.setValueAtTime(r,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:r,values:o}=n;t.setValueCurveAtTime(o,r,e)}}}}))(b):null,C={get defaultValue(){return y},get maxValue(){return null===v?m.maxValue:v},get minValue(){return null===g?m.minValue:g},get value(){return m.value},set value(e){m.value=e,C.setValueAtTime(e,o.context.currentTime)},cancelAndHoldAtTime(e){if("function"==typeof m.cancelAndHoldAtTime)null===w&&b.flush(o.context.currentTime),b.add(i(e)),m.cancelAndHoldAtTime(e);else{const t=Array.from(b).pop();null===w&&b.flush(o.context.currentTime),b.add(i(e));const n=Array.from(b).pop();m.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return C},cancelScheduledValues:e=>(null===w&&b.flush(o.context.currentTime),b.add(a(e)),m.cancelScheduledValues(e),C),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;const n=o.context.currentTime;return null===w&&b.flush(n),0===Array.from(b).length&&(b.add(l(y,n)),m.setValueAtTime(y,n)),b.add(s(e,t)),m.exponentialRampToValueAtTime(e,t),C},linearRampToValueAtTime(e,t){const n=o.context.currentTime;return null===w&&b.flush(n),0===Array.from(b).length&&(b.add(l(y,n)),m.setValueAtTime(y,n)),b.add(c(e,t)),m.linearRampToValueAtTime(e,t),C},setTargetAtTime:(e,t,n)=>(null===w&&b.flush(o.context.currentTime),b.add(u(e,t,n)),m.setTargetAtTime(e,t,n),C),setValueAtTime:(e,t)=>(null===w&&b.flush(o.context.currentTime),b.add(l(e,t)),m.setValueAtTime(e,t),C),setValueCurveAtTime(e,t,n){const r=e instanceof Float32Array?e:new Float32Array(e);if(null!==h&&"webkitAudioContext"===h.name){const e=t+n,i=o.context.sampleRate,a=Math.ceil(t*i),s=Math.floor(e*i),c=s-a,u=new Float32Array(c);for(let e=0;e<c;e+=1){const o=(r.length-1)/n*((a+e)/i-t),s=Math.floor(o),c=Math.ceil(o);u[e]=s===c?r[s]:(1-(o-s))*r[s]+(1-(c-o))*r[c]}null===w&&b.flush(o.context.currentTime),b.add(d(u,t,n)),m.setValueCurveAtTime(u,t,n);const l=s/i;l<e&&f(C,u[u.length-1],l),f(C,r[r.length-1],e)}else null===w&&b.flush(o.context.currentTime),b.add(d(r,t,n)),m.setValueCurveAtTime(r,t,n);return C}};return n.set(C,m),t.set(C,o),e(C,w),C})((Gt=c,(e,t)=>{Gt.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),_t,u,0,r.createCancelAndHoldAutomationEvent,r.createCancelScheduledValuesAutomationEvent,r.createExponentialRampToValueAutomationEvent,r.createLinearRampToValueAutomationEvent,r.createSetTargetAutomationEvent,r.createSetValueAutomationEvent,r.createSetValueCurveAutomationEvent,kt,tt);var Gt;const Zt=((e,t,n,r,o,i,a,s)=>class extends e{constructor(e,r){const s=i(e),c={...B,...r},u=o(s,c),l=a(s),d=l?t():null;super(e,!1,u,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==c.buffer,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=n(this,l,u.playbackRate,P,D)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"==typeof e?s(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(e=0,t=0,n){if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n]),"closed"!==this.context.state){_(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),R(this)&&k(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(Ot,Xt,Yt,xe,Ut,wt,xt,at),$t=((e,t,n,r,o,i,a,s)=>class extends e{constructor(e,t){const n=i(e),r=a(n),c=o(n,t,r);super(e,!1,c,r?(e=>{const t=new WeakMap;return{render(n,r){const o=t.get(r);return void 0!==o?Promise.resolve(o):(async(n,r)=>{const o=r.destination;return t.set(r,o),await e(n,r,o),o})(n,r)}}})(s):null),this._isNodeOfNativeOfflineAudioContext=r,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Ot,0,O,xe,((e,t)=>(n,r,o)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}o&&"explicit"!==i.channelCountMode&&(i.channelCountMode="explicit"),0===i.maxChannelCount&&Object.defineProperty(i,"maxChannelCount",{value:r});const a=e(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return t(a,"channelCount",(e=>()=>e.call(a)),(e=>t=>{e.call(a,t);try{i.channelCount=t}catch(e){if(t>i.maxChannelCount)throw e}})),t(a,"channelCountMode",(e=>()=>e.call(a)),(e=>t=>{e.call(a,t),i.channelCountMode=t})),t(a,"channelInterpretation",(e=>()=>e.call(a)),(e=>t=>{e.call(a,t),i.channelInterpretation=t})),Object.defineProperty(a,"maxChannelCount",{get:()=>i.maxChannelCount}),a.connect(i),a})(We,et),wt,xt,yt),Qt=((e,t,n,r,o)=>()=>{const i=new WeakMap;return{render(a,s){const c=i.get(s);return void 0!==c?Promise.resolve(c):(async(a,s)=>{let c=n(a);const u=T(c,s);if(!u){const e={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=t(s,e)}return i.set(s,c),u?(await e(s,a.Q,c.Q),await e(s,a.detune,c.detune),await e(s,a.frequency,c.frequency),await e(s,a.gain,c.gain)):(await r(s,a.Q,c.Q),await r(s,a.detune,c.detune),await r(s,a.frequency,c.frequency),await r(s,a.gain,c.gain)),await o(a,s,c),c})(a,s)}}})(Vt,Re,J,Ht,yt),Jt=(e=>(t,n)=>e.set(t,n))(lt),Kt=((e,t,n,r,o,i,a,s)=>class extends e{constructor(e,r){const c=i(e),u={...fe,...r},l=o(c,u),d=a(c);super(e,!1,l,d?n():null),this._Q=t(this,d,l.Q,P,D),this._detune=t(this,d,l.detune,1200*Math.log2(P),-1200*Math.log2(P)),this._frequency=t(this,d,l.frequency,e.sampleRate/2,0),this._gain=t(this,d,l.gain,40*Math.log10(P),D),this._nativeBiquadFilterNode=l,s(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(e){if(11===e.code)throw r();throw e}if(e.length!==t.length||t.length!==n.length)throw r()}})(Ot,Yt,Qt,_e,Re,wt,xt,Jt),en=((e,t)=>(n,r,o)=>{const i=new Set;var a,s;return n.connect=(a=n.connect,(o,s=0,c=0)=>{const u=0===i.size;if(t(o))return a.call(n,o,s,c),e(i,[o,s,c],(e=>e[0]===o&&e[1]===s&&e[2]===c),!0),u&&r(),o;a.call(n,o,s),e(i,[o,s],(e=>e[0]===o&&e[1]===s),!0),u&&r()}),n.disconnect=(s=n.disconnect,(e,r,a)=>{const c=i.size>0;if(void 0===e)s.apply(n),i.clear();else if("number"==typeof e){s.call(n,e);for(const t of i)t[1]===e&&i.delete(t)}else{t(e)?s.call(n,e,r,a):s.call(n,e,r);for(const t of i)t[0]!==e||void 0!==r&&t[1]!==r||void 0!==a&&t[2]!==a||i.delete(t)}const u=0===i.size;c&&u&&o()}),n})(V,At),tn=((e,t)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const o=n.createBufferSource();t(r,(()=>{const e=r.numberOfInputs;for(let t=0;t<e;t+=1)o.connect(r,0,t)}),(()=>o.disconnect(r)))})(xe,en),nn=((e,t)=>(n,r)=>{const o=n.createChannelMerger(r.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,o),Me(o,r),o})(kt,tn),rn=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,i){const a=r.get(i);return void 0!==a?Promise.resolve(a):(async(o,i)=>{let a=t(o);if(!T(a,i)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=e(i,t)}return r.set(i,a),await n(o,i,a),a})(o,i)}}})(nn,J,yt),on=((e,t,n,r,o)=>class extends e{constructor(e,i){const a=r(e),s={...pe,...i};super(e,!1,n(a,s),o(a)?t():null)}})(Ot,rn,nn,wt,xt),an=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,i){const a=r.get(i);return void 0!==a?Promise.resolve(a):(async(o,i)=>{let a=t(o);if(!T(a,i)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=e(i,t)}return r.set(i,a),await n(o,i,a),a})(o,i)}}})(Be,J,yt),sn=((e,t,n,r,o)=>class extends e{constructor(e,i){const a=r(e),s=(e=>({...e,channelCount:e.numberOfOutputs}))({...me,...i});super(e,!1,n(a,s),o(a)?t():null)}})(Ot,an,Be,wt,xt),cn=((e,t,n,r)=>(o,{offset:i,...a})=>{const s=o.createBuffer(1,2,44100),c=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(o,{...a,gain:i}),l=s.getChannelData(0);l[0]=1,l[1]=1,c.buffer=s,c.loop=!0;const d={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){u.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){u.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){u.channelInterpretation=e},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return c.onended},set onended(e){c.onended=e},addEventListener:(...e)=>c.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>c.dispatchEvent(e[0]),removeEventListener:(...e)=>c.removeEventListener(e[0],e[1],e[2]),start(e=0){c.start.call(c,e)},stop(e=0){c.stop.call(c,e)}};return e(o,c),r(Fe(d,u),(()=>c.connect(u)),(()=>c.disconnect(u)))})(zt,Ut,We,en),un=((e,t,n,r,o)=>(i,a)=>{if(void 0===i.createConstantSource)return n(i,a);const s=i.createConstantSource();return Me(s,a),Ne(s,a,"offset"),t(r,(()=>r(i)))||Le(s),t(o,(()=>o(i)))||De(s),e(i,s),s})(zt,ht,cn,nt,ot),ln=((e,t,n,r,o)=>()=>{const i=new WeakMap;let a=null,s=null;return{set start(e){a=e},set stop(e){s=e},render(c,u){const l=i.get(u);return void 0!==l?Promise.resolve(l):(async(c,u)=>{let l=n(c);const d=T(l,u);if(!d){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,offset:l.offset.value};l=t(u,e),null!==a&&l.start(a),null!==s&&l.stop(s)}return i.set(u,l),d?await e(u,c.offset,l.offset):await r(u,c.offset,l.offset),await o(c,u,l),l})(c,u)}}})(Vt,un,J,Ht,yt),dn=((e,t,n,r,o,i,a)=>class extends e{constructor(e,a){const s=o(e),c={...ve,...a},u=r(s,c),l=i(s),d=l?n():null;super(e,!1,u,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=u,this._offset=t(this,l,u.offset,P,D),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"==typeof e?a(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(e=0){if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){_(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),R(this)&&k(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(Ot,Yt,ln,un,wt,xt,at),hn=((e,t)=>(n,r)=>{const o=n.createConvolver();if(Me(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),Te(o,r,"buffer"),r.channelCount>2)throw e();if(t(o,"channelCount",(e=>()=>e.call(o)),(t=>n=>{if(n>2)throw e();return t.call(o,n)})),"max"===r.channelCountMode)throw e();return t(o,"channelCountMode",(e=>()=>e.call(o)),(t=>n=>{if("max"===n)throw e();return t.call(o,n)})),o})(He,et),fn=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,i){const a=r.get(i);return void 0!==a?Promise.resolve(a):(async(o,i)=>{let a=t(o);if(!T(a,i)){const t={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=e(i,t)}return r.set(i,a),X(a)?await n(o,i,a.inputs[0]):await n(o,i,a),a})(o,i)}}})(hn,J,yt),pn=((e,t,n,r,o,i)=>class extends e{constructor(e,a){const s=r(e),c={...ge,...a},u=n(s,c);super(e,!1,u,o(s)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=u,null!==c.buffer&&i(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(Ot,fn,hn,wt,xt,Jt),mn=((e,t,n,r,o)=>i=>{const a=new WeakMap;return{render(s,c){const u=a.get(c);return void 0!==u?Promise.resolve(u):(async(s,c)=>{let u=n(s);const l=T(u,c);if(!l){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=t(c,e)}return a.set(c,u),l?await e(c,s.delayTime,u.delayTime):await r(c,s.delayTime,u.delayTime),await o(s,c,u),u})(s,c)}}})(Vt,je,J,Ht,yt),vn=((e,t,n,r,o,i,a)=>class extends e{constructor(e,s){const c=o(e),u={...be,...s},l=r(c,u),d=i(c);super(e,!1,l,d?n(u.maxDelayTime):null),this._delayTime=t(this,d,l.delayTime),a(this,u.maxDelayTime)}get delayTime(){return this._delayTime}})(Ot,Yt,mn,je,wt,xt,Jt),gn=(e=>(t,n)=>{const r=t.createDynamicsCompressor();if(Me(r,n),n.channelCount>2)throw e();if("max"===n.channelCountMode)throw e();return Ne(r,n,"attack"),Ne(r,n,"knee"),Ne(r,n,"ratio"),Ne(r,n,"release"),Ne(r,n,"threshold"),r})(He),yn=((e,t,n,r,o)=>()=>{const i=new WeakMap;return{render(a,s){const c=i.get(s);return void 0!==c?Promise.resolve(c):(async(a,s)=>{let c=n(a);const u=T(c,s);if(!u){const e={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=t(s,e)}return i.set(s,c),u?(await e(s,a.attack,c.attack),await e(s,a.knee,c.knee),await e(s,a.ratio,c.ratio),await e(s,a.release,c.release),await e(s,a.threshold,c.threshold)):(await r(s,a.attack,c.attack),await r(s,a.knee,c.knee),await r(s,a.ratio,c.ratio),await r(s,a.release,c.release),await r(s,a.threshold,c.threshold)),await o(a,s,c),c})(a,s)}}})(Vt,gn,J,Ht,yt),bn=((e,t,n,r,o,i,a,s)=>class extends e{constructor(e,o){const c=i(e),u={...Ce,...o},l=r(c,u),d=a(c);super(e,!1,l,d?n():null),this._attack=t(this,d,l.attack),this._knee=t(this,d,l.knee),this._nativeDynamicsCompressorNode=l,this._ratio=t(this,d,l.ratio),this._release=t(this,d,l.release),this._threshold=t(this,d,l.threshold),s(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Ot,Yt,yn,gn,He,wt,xt,Jt),wn=((e,t,n,r,o)=>()=>{const i=new WeakMap;return{render(a,s){const c=i.get(s);return void 0!==c?Promise.resolve(c):(async(a,s)=>{let c=n(a);const u=T(c,s);if(!u){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=t(s,e)}return i.set(s,c),u?await e(s,a.gain,c.gain):await r(s,a.gain,c.gain),await o(a,s,c),c})(a,s)}}})(Vt,We,J,Ht,yt),Cn=((e,t,n,r,o,i)=>class extends e{constructor(e,a){const s=o(e),c={...Ee,...a},u=r(s,c),l=i(s);super(e,!1,u,l?n():null),this._gain=t(this,l,u.gain,P,D)}get gain(){return this._gain}})(Ot,Yt,wn,We,wt,xt),En=((e,t,n,r)=>(o,i,{channelCount:a,channelCountMode:s,channelInterpretation:c,feedback:u,feedforward:l})=>{const d=Pe(i,o.sampleRate),h=u instanceof Float64Array?u:new Float64Array(u),f=l instanceof Float64Array?l:new Float64Array(l),p=h.length,m=f.length,v=Math.min(p,m);if(0===p||p>20)throw r();if(0===h[0])throw t();if(0===m||m>20)throw r();if(0===f[0])throw t();if(1!==h[0]){for(let e=0;e<m;e+=1)f[e]/=h[0];for(let e=1;e<p;e+=1)h[e]/=h[0]}const g=n(o,d,a,a);g.channelCount=a,g.channelCountMode=s,g.channelInterpretation=c;const y=[],b=[],w=[];for(let e=0;e<a;e+=1){y.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),b.push(e),w.push(t)}g.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,r=t.numberOfChannels;for(let e=0;e<r;e+=1){const r=t.getChannelData(e),o=n.getChannelData(e);y[e]=ke(h,p,f,m,v,b[e],w[e],y[e],32,r,o)}};const C=o.sampleRate/2,E={get bufferSize(){return d},get channelCount(){return g.channelCount},set channelCount(e){g.channelCount=e},get channelCountMode(){return g.channelCountMode},set channelCountMode(e){g.channelCountMode=e},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(e){g.channelInterpretation=e},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener:(...e)=>g.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>g.dispatchEvent(e[0]),getFrequencyResponse(t,n,r){if(t.length!==n.length||n.length!==r.length)throw e();const o=t.length;for(let e=0;e<o;e+=1){const o=-Math.PI*(t[e]/C),i=[Math.cos(o),Math.sin(o)],a=ze(Ve(f,i),Ve(h,i));n[e]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),r[e]=Math.atan2(a[1],a[0])}},removeEventListener:(...e)=>g.removeEventListener(e[0],e[1],e[2])};return Fe(E,g)})(_e,xe,Ue,He),xn=((e,t,n,r)=>o=>e(Ae,(()=>Ae(o)))?Promise.resolve(e(r,r)).then((e=>{if(!e){const e=n(o,512,0,1);o.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>o.currentTime,e.connect(o.destination)}return o.startRendering()})):new Promise((e=>{const n=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(o.destination),o.startRendering()})))(ht,We,Ue,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((e=>{n.oncomplete=()=>{r.disconnect(),e(0!==n.currentTime)},n.startRendering()}))})(We,Et)),_n=((e,t,n,r,o)=>(i,a)=>{const s=new WeakMap;let c=null;return{render(u,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):(async(u,l)=>{let d=null,h=t(u);const f=T(h,l);if(void 0===l.createIIRFilter?d=e(l,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(h=l.createIIRFilter(a,i)),s.set(l,null===d?h:d),null!==d){if(null===c){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(u.context.destination.channelCount,u.context.length,l.sampleRate);c=(async()=>(await r(u,e,e.destination),((e,t,n,r)=>{const o=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),a=o.length,s=i.length,c=Math.min(a,s);if(1!==o[0]){for(let e=0;e<a;e+=1)i[e]/=o[0];for(let e=1;e<s;e+=1)o[e]/=o[0]}const u=new Float32Array(32),l=new Float32Array(32),d=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),h=e.numberOfChannels;for(let t=0;t<h;t+=1){const n=e.getChannelData(t),r=d.getChannelData(t);u.fill(0),l.fill(0),ke(o,a,i,s,c,u,l,0,32,n,r)}return d})(await o(e),l,i,a)))()}const e=await c;return d.buffer=e,d.start(0),d}return await r(u,l,h),h})(u,l)}}})(Ut,J,Et,yt,xn),Sn=(e=>(t,n,r)=>{if(void 0===t.createIIRFilter)return e(t,n,r);const o=t.createIIRFilter(r.feedforward,r.feedback);return Me(o,r),o})(En),kn=((e,t,n,r,o,i)=>class extends e{constructor(e,a){const s=r(e),c=o(s),u={...Se,...a},l=t(s,c?null:e.baseLatency,u);super(e,!1,l,c?n(u.feedback,u.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(n,r,o)=>{if(n.length!==r.length||r.length!==o.length)throw _e();return t.call(e,n,r,o)})})(l),this._nativeIIRFilterNode=l,i(this,1)}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(Ot,Sn,_n,wt,xt,Jt),In=((e,t,n,r,o,i,a,s)=>(c,u)=>{const l=u.listener,{forwardX:d,forwardY:h,forwardZ:f,positionX:p,positionY:m,positionZ:v,upX:g,upY:y,upZ:b}=void 0===l.forwardX?(()=>{const d=new Float32Array(1),h=t(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),f=a(u);let p=!1,m=[0,0,-1,0,1,0],v=[0,0,0];const g=()=>{if(p)return;p=!0;const e=r(u,256,9,0);e.onaudioprocess=({inputBuffer:e})=>{const t=[i(e,d,0),i(e,d,1),i(e,d,2),i(e,d,3),i(e,d,4),i(e,d,5)];t.some(((e,t)=>e!==m[t]))&&(l.setOrientation(...t),m=t);const n=[i(e,d,6),i(e,d,7),i(e,d,8)];n.some(((e,t)=>e!==v[t]))&&(l.setPosition(...n),v=n)},h.connect(e)},y=e=>t=>{t!==m[e]&&(m[e]=t,l.setOrientation(...m))},b=e=>t=>{t!==v[e]&&(v[e]=t,l.setPosition(...v))},w=(t,r,i)=>{const a=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});a.connect(h,0,t),a.start(),Object.defineProperty(a.offset,"defaultValue",{get:()=>r});const l=e({context:c},f,a.offset,P,D);var d,p,m,v,y,b,w;return s(l,"value",(e=>()=>e.call(l)),(e=>t=>{try{e.call(l,t)}catch(e){if(9!==e.code)throw e}g(),f&&i(t)})),l.cancelAndHoldAtTime=(d=l.cancelAndHoldAtTime,f?()=>{throw o()}:(...e)=>{const t=d.apply(l,e);return g(),t}),l.cancelScheduledValues=(p=l.cancelScheduledValues,f?()=>{throw o()}:(...e)=>{const t=p.apply(l,e);return g(),t}),l.exponentialRampToValueAtTime=(m=l.exponentialRampToValueAtTime,f?()=>{throw o()}:(...e)=>{const t=m.apply(l,e);return g(),t}),l.linearRampToValueAtTime=(v=l.linearRampToValueAtTime,f?()=>{throw o()}:(...e)=>{const t=v.apply(l,e);return g(),t}),l.setTargetAtTime=(y=l.setTargetAtTime,f?()=>{throw o()}:(...e)=>{const t=y.apply(l,e);return g(),t}),l.setValueAtTime=(b=l.setValueAtTime,f?()=>{throw o()}:(...e)=>{const t=b.apply(l,e);return g(),t}),l.setValueCurveAtTime=(w=l.setValueCurveAtTime,f?()=>{throw o()}:(...e)=>{const t=w.apply(l,e);return g(),t}),l};return{forwardX:w(0,0,y(0)),forwardY:w(1,0,y(1)),forwardZ:w(2,-1,y(2)),positionX:w(6,0,b(0)),positionY:w(7,0,b(1)),positionZ:w(8,0,b(2)),upX:w(3,0,y(3)),upY:w(4,1,y(4)),upZ:w(5,0,y(5))}})():l;return{get forwardX(){return d},get forwardY(){return h},get forwardZ(){return f},get positionX(){return p},get positionY(){return m},get positionZ(){return v},get upX(){return g},get upY(){return y},get upZ(){return b}}})(Yt,nn,un,Ue,He,Je,xt,et),An=new WeakMap,Tn=((e,t,n,r,o,i)=>class extends n{constructor(n,i){super(n),this._nativeContext=n,l.set(this,n),r(n)&&o.set(n,new Set),this._destination=new e(this,i),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"==typeof e?i(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})($t,In,St,xt,An,at),Mn=((e,t,n,r,o,i)=>(a,s)=>{const c=a.createOscillator();return Me(c,s),Ne(c,s,"detune"),Ne(c,s,"frequency"),void 0!==s.periodicWave?c.setPeriodicWave(s.periodicWave):Te(c,s,"type"),t(n,(()=>n(a)))||Le(c),t(r,(()=>r(a)))||i(c,a),t(o,(()=>o(a)))||De(c),e(a,c),c})(zt,ht,nt,rt,ot,it),On=((e,t,n,r,o)=>()=>{const i=new WeakMap;let a=null,s=null,c=null;return{set periodicWave(e){a=e},set start(e){s=e},set stop(e){c=e},render(u,l){const d=i.get(l);return void 0!==d?Promise.resolve(d):(async(u,l)=>{let d=n(u);const h=T(d,l);if(!h){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===a?void 0:a,type:d.type};d=t(l,e),null!==s&&d.start(s),null!==c&&d.stop(c)}return i.set(l,d),h?(await e(l,u.detune,d.detune),await e(l,u.frequency,d.frequency)):(await r(l,u.detune,d.detune),await r(l,u.frequency,d.frequency)),await o(u,l,d),d})(u,l)}}})(Vt,Mn,J,Ht,yt),Nn=((e,t,n,r,o,i,a)=>class extends e{constructor(e,a){const s=o(e),c={...Ye,...a},u=n(s,c),l=i(s),d=l?r():null,h=e.sampleRate/2;super(e,!1,u,d),this._detune=t(this,l,u.detune,153600,-153600),this._frequency=t(this,l,u.frequency,h,-h),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==c.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=c.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"==typeof e?a(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(e=0){if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){_(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),R(this)&&k(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(e=0){this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(Ot,Yt,Mn,On,wt,xt,at),Ln=(e=>(t,n)=>{const r=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=t.createBuffer(1,2,44100);return r.buffer=o,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}})(Ut),Dn=((e,t,n,r,o)=>(i,{curve:a,oversample:s,...c})=>{const u=i.createWaveShaper(),l=i.createWaveShaper();Me(u,c),Me(l,c);const d=n(i,{...c,gain:1}),h=n(i,{...c,gain:-1}),f=n(i,{...c,gain:1}),p=n(i,{...c,gain:-1});let m=null,v=!1,g=null;const y={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){d.channelCount=e,h.channelCount=e,u.channelCount=e,f.channelCount=e,l.channelCount=e,p.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){d.channelCountMode=e,h.channelCountMode=e,u.channelCountMode=e,f.channelCountMode=e,l.channelCountMode=e,p.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e,h.channelInterpretation=e,u.channelInterpretation=e,f.channelInterpretation=e,l.channelInterpretation=e,p.channelInterpretation=e},get context(){return u.context},get curve(){return g},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)u.curve=n,l.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),r=new Float32Array(e+2-e%2);t[0]=n[0],r[0]=-n[e-1];const o=Math.ceil((e+1)/2),i=(e+1)/2-1;for(let a=1;a<o;a+=1){const s=a/o*i,c=Math.floor(s),u=Math.ceil(s);t[a]=c===u?n[c]:(1-(s-c))*n[c]+(1-(u-s))*n[u],r[a]=c===u?-n[e-1-c]:-(1-(s-c))*n[e-1-c]-(1-(u-s))*n[e-1-u]}t[o]=e%2==1?n[o-1]:(n[o-2]+n[o-1])/2,u.curve=t,l.curve=r}g=n,v&&(r(g)&&null===m?m=e(i,d):null!==m&&(m(),m=null))},get inputs(){return[d]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(e){u.oversample=e,l.oversample=e},addEventListener:(...e)=>d.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>d.dispatchEvent(e[0]),removeEventListener:(...e)=>d.removeEventListener(e[0],e[1],e[2])};return null!==a&&(y.curve=a instanceof Float32Array?a:new Float32Array(a)),s!==y.oversample&&(y.oversample=s),o(Fe(y,f),(()=>{d.connect(u).connect(f),d.connect(h).connect(l).connect(p).connect(f),v=!0,r(g)&&(m=e(i,d))}),(()=>{d.disconnect(u),u.disconnect(f),d.disconnect(h),h.disconnect(l),l.disconnect(p),p.disconnect(f),v=!1,null!==m&&(m(),m=null)}))})(Ln,xe,We,Ke,en),Pn=((e,t,n,r,o,i,a)=>(s,c)=>{const u=s.createWaveShaper();if(null!==i&&"webkitAudioContext"===i.name&&void 0===s.createGain().gain.automationRate)return n(s,c);Me(u,c);const l=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==l&&l.length<2)throw t();Te(u,{curve:l},"curve"),Te(u,c,"oversample");let d=null,h=!1;return a(u,"curve",(e=>()=>e.call(u)),(t=>n=>(t.call(u,n),h&&(r(n)&&null===d?d=e(s,u):r(n)||null===d||(d(),d=null)),n))),o(u,(()=>{h=!0,r(u.curve)&&(d=e(s,u))}),(()=>{h=!1,null!==d&&(d(),d=null)}))})(Ln,xe,Dn,Ke,en,kt,et),Rn=((e,t,n,r,o,i,a,s,c,u)=>(l,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:p,maxDistance:m,orientationX:v,orientationY:g,orientationZ:y,panningModel:b,positionX:w,positionY:C,positionZ:E,refDistance:x,rolloffFactor:_,...S})=>{const k=l.createPanner();if(S.channelCount>2)throw a();if("max"===S.channelCountMode)throw a();Me(k,S);const I={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},A=n(l,{...I,channelInterpretation:"speakers",numberOfInputs:6}),T=r(l,{...S,gain:1}),M=r(l,{...I,gain:1}),O=r(l,{...I,gain:0}),N=r(l,{...I,gain:0}),L=r(l,{...I,gain:0}),D=r(l,{...I,gain:0}),P=r(l,{...I,gain:0}),R=o(l,256,6,1),B=i(l,{...I,curve:new Float32Array([1,1]),oversample:"none"});let F=[v,g,y],j=[w,C,E];const W=new Float32Array(1);R.onaudioprocess=({inputBuffer:e})=>{const t=[c(e,W,0),c(e,W,1),c(e,W,2)];t.some(((e,t)=>e!==F[t]))&&(k.setOrientation(...t),F=t);const n=[c(e,W,3),c(e,W,4),c(e,W,5)];n.some(((e,t)=>e!==j[t]))&&(k.setPosition(...n),j=n)},Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0});const z={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(e){if(e>2)throw a();T.channelCount=e,k.channelCount=e},get channelCountMode(){return k.channelCountMode},set channelCountMode(e){if("max"===e)throw a();T.channelCountMode=e,k.channelCountMode=e},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(e){T.channelInterpretation=e,k.channelInterpretation=e},get coneInnerAngle(){return k.coneInnerAngle},set coneInnerAngle(e){k.coneInnerAngle=e},get coneOuterAngle(){return k.coneOuterAngle},set coneOuterAngle(e){k.coneOuterAngle=e},get coneOuterGain(){return k.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();k.coneOuterGain=e},get context(){return k.context},get distanceModel(){return k.distanceModel},set distanceModel(e){k.distanceModel=e},get inputs(){return[T]},get maxDistance(){return k.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;k.maxDistance=e},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get orientationX(){return M.gain},get orientationY(){return O.gain},get orientationZ(){return N.gain},get panningModel(){return k.panningModel},set panningModel(e){k.panningModel=e},get positionX(){return L.gain},get positionY(){return D.gain},get positionZ(){return P.gain},get refDistance(){return k.refDistance},set refDistance(e){if(e<0)throw new RangeError;k.refDistance=e},get rolloffFactor(){return k.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;k.rolloffFactor=e},addEventListener:(...e)=>T.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>T.dispatchEvent(e[0]),removeEventListener:(...e)=>T.removeEventListener(e[0],e[1],e[2])};return d!==z.coneInnerAngle&&(z.coneInnerAngle=d),h!==z.coneOuterAngle&&(z.coneOuterAngle=h),f!==z.coneOuterGain&&(z.coneOuterGain=f),p!==z.distanceModel&&(z.distanceModel=p),m!==z.maxDistance&&(z.maxDistance=m),v!==z.orientationX.value&&(z.orientationX.value=v),g!==z.orientationY.value&&(z.orientationY.value=g),y!==z.orientationZ.value&&(z.orientationZ.value=y),b!==z.panningModel&&(z.panningModel=b),w!==z.positionX.value&&(z.positionX.value=w),C!==z.positionY.value&&(z.positionY.value=C),E!==z.positionZ.value&&(z.positionZ.value=E),x!==z.refDistance&&(z.refDistance=x),_!==z.rolloffFactor&&(z.rolloffFactor=_),1===F[0]&&0===F[1]&&0===F[2]||k.setOrientation(...F),0===j[0]&&0===j[1]&&0===j[2]||k.setPosition(...j),u(Fe(z,k),(()=>{T.connect(k),e(T,B,0,0),B.connect(M).connect(A,0,0),B.connect(O).connect(A,0,1),B.connect(N).connect(A,0,2),B.connect(L).connect(A,0,3),B.connect(D).connect(A,0,4),B.connect(P).connect(A,0,5),A.connect(R).connect(l.destination)}),(()=>{T.disconnect(k),s(T,B,0,0),B.disconnect(M),M.disconnect(A),B.disconnect(O),O.disconnect(A),B.disconnect(N),N.disconnect(A),B.disconnect(L),L.disconnect(A),B.disconnect(D),D.disconnect(A),B.disconnect(P),P.disconnect(A),A.disconnect(R),R.disconnect(l.destination)}))})(Y,xe,nn,We,Ue,Pn,He,Q,Je,en),Bn=(e=>(t,n)=>{const r=t.createPanner();return void 0===r.orientationX?e(t,n):(Me(r,n),Ne(r,n,"orientationX"),Ne(r,n,"orientationY"),Ne(r,n,"orientationZ"),Ne(r,n,"positionX"),Ne(r,n,"positionY"),Ne(r,n,"positionZ"),Te(r,n,"coneInnerAngle"),Te(r,n,"coneOuterAngle"),Te(r,n,"coneOuterGain"),Te(r,n,"distanceModel"),Te(r,n,"maxDistance"),Te(r,n,"panningModel"),Te(r,n,"refDistance"),Te(r,n,"rolloffFactor"),r)})(Rn),Fn=((e,t,n,r,o,i,a,s,c,u)=>()=>{const l=new WeakMap;let d=null;return{render(h,f){const p=l.get(f);return void 0!==p?Promise.resolve(p):(async(h,f)=>{let p=null,m=i(h);const v={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},g={...v,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},y=T(m,f);if("bufferSize"in m)p=r(f,{...v,gain:1});else if(!y){const e={...g,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value};m=o(f,e)}if(l.set(f,null===p?m:p),null!==p){if(null===d){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new a(6,h.context.length,f.sampleRate),r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});r.connect(e.destination),d=(async()=>{const t=await Promise.all([h.orientationX,h.orientationY,h.orientationZ,h.positionX,h.positionY,h.positionZ].map((async(t,r)=>{const o=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===r?1:0});return await s(e,t,o.offset),o})));for(let e=0;e<6;e+=1)t[e].connect(r,0,e),t[e].start(0);return u(e)})()}const e=await d,i=r(f,{...v,gain:1});await c(h,f,i);const l=[];for(let t=0;t<e.numberOfChannels;t+=1)l.push(e.getChannelData(t));let m=[l[0][0],l[1][0],l[2][0]],y=[l[3][0],l[4][0],l[5][0]],b=r(f,{...v,gain:1}),w=o(f,{...g,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]});i.connect(b).connect(w.inputs[0]),w.connect(p);for(let t=128;t<e.length;t+=128){const e=[l[0][t],l[1][t],l[2][t]],n=[l[3][t],l[4][t],l[5][t]];if(e.some(((e,t)=>e!==m[t]))||n.some(((e,t)=>e!==y[t]))){m=e,y=n;const a=t/f.sampleRate;b.gain.setValueAtTime(0,a),b=r(f,{...v,gain:0}),w=o(f,{...g,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]}),b.gain.setValueAtTime(1,a),i.connect(b).connect(w.inputs[0]),w.connect(p)}}return p}return y?(await e(f,h.orientationX,m.orientationX),await e(f,h.orientationY,m.orientationY),await e(f,h.orientationZ,m.orientationZ),await e(f,h.positionX,m.positionX),await e(f,h.positionY,m.positionY),await e(f,h.positionZ,m.positionZ)):(await s(f,h.orientationX,m.orientationX),await s(f,h.orientationY,m.orientationY),await s(f,h.orientationZ,m.orientationZ),await s(f,h.positionX,m.positionX),await s(f,h.positionY,m.positionY),await s(f,h.positionZ,m.positionZ)),X(m)?await c(h,f,m.inputs[0]):await c(h,f,m),m})(h,f)}}})(Vt,nn,un,We,Bn,J,Et,Ht,yt,xn),jn=((e,t,n,r,o,i,a)=>class extends e{constructor(e,s){const c=o(e),u={...Ge,...s},l=n(c,u),d=i(c);super(e,!1,l,d?r():null),this._nativePannerNode=l,this._orientationX=t(this,d,l.orientationX,P,D),this._orientationY=t(this,d,l.orientationY,P,D),this._orientationZ=t(this,d,l.orientationZ,P,D),this._positionX=t(this,d,l.positionX,P,D),this._positionY=t(this,d,l.positionY,P,D),this._positionZ=t(this,d,l.positionZ,P,D),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(Ot,Yt,Bn,Fn,wt,xt,Jt),Wn=(e=>(t,{disableNormalization:n,imag:r,real:o})=>{const i=r instanceof Float32Array?r:new Float32Array(r),a=o instanceof Float32Array?o:new Float32Array(o),s=t.createPeriodicWave(a,i,{disableNormalization:n});if(Array.from(r).length<2)throw e();return s})(O),zn=((e,t,n)=>class r{constructor(r,o){const i=t(r),a=(e=>{const{imag:t,real:n}=e;return void 0===t?void 0===n?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(n,(()=>0)),real:n}:void 0===n?{...e,imag:t,real:Array.from(t,(()=>0))}:{...e,imag:t,real:n}})({...Ze,...o}),s=e(i,a);return n.add(s),s}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===r.prototype||n.has(e)}})(Wn,wt,new WeakSet),qn=((e,t,n,r,o,i)=>{const a=16385,s=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...u,oversample:"none"},d=(e,i,d,h,f)=>{if(1===i)return((e,t,o,i)=>{const d=new Float32Array(a),h=new Float32Array(a);for(let e=0;e<a;e+=1){const t=e/16384*c;d[e]=Math.cos(t),h[e]=Math.sin(t)}const f=n(e,{...u,gain:0}),p=r(e,{...l,curve:d}),m=r(e,{...l,curve:s}),v=n(e,{...u,gain:0}),g=r(e,{...l,curve:h});return{connectGraph(){t.connect(f),t.connect(void 0===m.inputs?m:m.inputs[0]),t.connect(v),m.connect(o),o.connect(void 0===p.inputs?p:p.inputs[0]),o.connect(void 0===g.inputs?g:g.inputs[0]),p.connect(f.gain),g.connect(v.gain),f.connect(i,0,0),v.connect(i,0,1)},disconnectGraph(){t.disconnect(f),t.disconnect(void 0===m.inputs?m:m.inputs[0]),t.disconnect(v),m.disconnect(o),o.disconnect(void 0===p.inputs?p:p.inputs[0]),o.disconnect(void 0===g.inputs?g:g.inputs[0]),p.disconnect(f.gain),g.disconnect(v.gain),f.disconnect(i,0,0),v.disconnect(i,0,1)}}})(e,d,h,f);if(2===i)return((e,o,i,d)=>{const h=new Float32Array(a),f=new Float32Array(a),p=new Float32Array(a),m=new Float32Array(a),v=Math.floor(8192.5);for(let e=0;e<a;e+=1)if(e>v){const t=(e-v)/(16384-v)*c;h[e]=Math.cos(t),f[e]=Math.sin(t),p[e]=0,m[e]=1}else{const t=e/(16384-v)*c;h[e]=1,f[e]=0,p[e]=Math.cos(t),m[e]=Math.sin(t)}const g=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=n(e,{...u,gain:0}),b=r(e,{...l,curve:h}),w=n(e,{...u,gain:0}),C=r(e,{...l,curve:f}),E=r(e,{...l,curve:s}),x=n(e,{...u,gain:0}),_=r(e,{...l,curve:p}),S=n(e,{...u,gain:0}),k=r(e,{...l,curve:m});return{connectGraph(){o.connect(g),o.connect(void 0===E.inputs?E:E.inputs[0]),g.connect(y,0),g.connect(w,0),g.connect(x,1),g.connect(S,1),E.connect(i),i.connect(void 0===b.inputs?b:b.inputs[0]),i.connect(void 0===C.inputs?C:C.inputs[0]),i.connect(void 0===_.inputs?_:_.inputs[0]),i.connect(void 0===k.inputs?k:k.inputs[0]),b.connect(y.gain),C.connect(w.gain),_.connect(x.gain),k.connect(S.gain),y.connect(d,0,0),x.connect(d,0,0),w.connect(d,0,1),S.connect(d,0,1)},disconnectGraph(){o.disconnect(g),o.disconnect(void 0===E.inputs?E:E.inputs[0]),g.disconnect(y,0),g.disconnect(w,0),g.disconnect(x,1),g.disconnect(S,1),E.disconnect(i),i.disconnect(void 0===b.inputs?b:b.inputs[0]),i.disconnect(void 0===C.inputs?C:C.inputs[0]),i.disconnect(void 0===_.inputs?_:_.inputs[0]),i.disconnect(void 0===k.inputs?k:k.inputs[0]),b.disconnect(y.gain),C.disconnect(w.gain),_.disconnect(x.gain),k.disconnect(S.gain),y.disconnect(d,0,0),x.disconnect(d,0,0),w.disconnect(d,0,1),S.disconnect(d,0,1)}}})(e,d,h,f);throw o()};return(t,{channelCount:r,channelCountMode:a,pan:s,...c})=>{if("max"===a)throw o();const u=e(t,{...c,channelCount:1,channelCountMode:a,numberOfInputs:2}),l=n(t,{...c,channelCount:r,channelCountMode:a,gain:1}),h=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s});let{connectGraph:f,disconnectGraph:p}=d(t,r,l,h,u);Object.defineProperty(h.gain,"defaultValue",{get:()=>0}),Object.defineProperty(h.gain,"maxValue",{get:()=>1}),Object.defineProperty(h.gain,"minValue",{get:()=>-1});const m={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(e){l.channelCount!==e&&(v&&p(),({connectGraph:f,disconnectGraph:p}=d(t,e,l,h,u)),v&&f()),l.channelCount=e},get channelCountMode(){return l.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw o();l.channelCountMode=e},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(e){l.channelInterpretation=e},get context(){return l.context},get inputs(){return[l]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get pan(){return h.gain},addEventListener:(...e)=>l.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>l.dispatchEvent(e[0]),removeEventListener:(...e)=>l.removeEventListener(e[0],e[1],e[2])};let v=!1;return i(Fe(m,u),(()=>{f(),v=!0}),(()=>{p(),v=!1}))}})(nn,Be,We,Pn,He,en),Vn=((e,t)=>(n,r)=>{const o=r.channelCountMode;if("clamped-max"===o)throw t();if(void 0===n.createStereoPanner)return e(n,r);const i=n.createStereoPanner();return Me(i,r),Ne(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>o,set:e=>{if(e!==o)throw t()}}),i})(qn,He),Un=((e,t,n,r,o)=>()=>{const i=new WeakMap;return{render(a,s){const c=i.get(s);return void 0!==c?Promise.resolve(c):(async(a,s)=>{let c=n(a);const u=T(c,s);if(!u){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=t(s,e)}return i.set(s,c),u?await e(s,a.pan,c.pan):await r(s,a.pan,c.pan),X(c)?await o(a,s,c.inputs[0]):await o(a,s,c),c})(a,s)}}})(Vt,Vn,J,Ht,yt),Hn=((e,t,n,r,o,i)=>class extends e{constructor(e,a){const s=o(e),c={...$e,...a},u=n(s,c),l=i(s);super(e,!1,u,l?r():null),this._pan=t(this,l,u.pan)}get pan(){return this._pan}})(Ot,Yt,Vn,Un,wt,xt),Xn=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,i){const a=r.get(i);return void 0!==a?Promise.resolve(a):(async(o,i)=>{let a=t(o);if(!T(a,i)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=e(i,t)}return r.set(i,a),X(a)?await n(o,i,a.inputs[0]):await n(o,i,a),a})(o,i)}}})(Pn,J,yt),Yn=((e,t,n,r,o,i,a)=>class extends e{constructor(e,t){const s=o(e),c={...Qe,...t},u=n(s,c);super(e,!0,u,i(s)?r():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(Ot,xe,Pn,Xn,wt,xt,Jt),Gn=(e=>null!==e&&e.isSecureContext)(mt),Zn=(e=>(t,n,r)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return r()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(mt),$n=new WeakMap,Qn=((e,t)=>n=>{let r=e.get(n);if(void 0!==r)return r;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),e.set(n,r),r})($n,Et),Jn=Gn?((e,t,n,r,o,i,a,s,c,u,l,d,h)=>{let p=0;return(m,v,w={credentials:"omit"})=>{const C=l.get(m);if(void 0!==C&&C.has(v))return Promise.resolve();const E=u.get(m);if(void 0!==E){const e=E.get(v);if(void 0!==e)return e}const x=i(m),_=void 0===x.audioWorklet?o(v).then((([e,t])=>{const[r,o]=g(e,t);return n(`${r};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${o}\n})})(window,'_AWGS')`)})).then((()=>{const e=h._AWGS.pop();if(void 0===e)throw new SyntaxError;r(x.currentTime,x.sampleRate,(()=>e(class{},void 0,((e,n)=>{if(""===e.trim())throw t();const r=f.get(x);if(void 0!==r){if(r.has(e))throw t();b(n),y(n.parameterDescriptors),r.set(e,n)}else b(n),y(n.parameterDescriptors),f.set(x,new Map([[e,n]]))}),x.sampleRate,void 0,void 0)))})):Promise.all([o(v),Promise.resolve(e(d,d))]).then((([[e,t],n])=>{const r=p+1;p=r;const[o,i]=g(e,t),u=new Blob([`${o};((AudioWorkletProcessor,registerProcessor)=>{${i}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${r}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),l=URL.createObjectURL(u);return x.audioWorklet.addModule(l,w).then((()=>{if(s(x))return x;const e=a(x);return e.audioWorklet.addModule(l,w).then((()=>e))})).then((e=>{if(null===c)throw new SyntaxError;try{new c(e,`__sac${r}`)}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(l)))}));return void 0===E?u.set(m,new Map([[v,_]])):E.set(v,_),_.then((()=>{const e=l.get(m);void 0===e?l.set(m,new Set([v])):e.add(v)})).finally((()=>{const e=u.get(m);void 0!==e&&e.delete(v)})),_}})(ht,He,(e=>t=>new Promise(((n,r)=>{if(null===e)return void r(new SyntaxError);const o=e.document.head;if(null===o)r(new SyntaxError);else{const i=e.document.createElement("script"),a=new Blob([t],{type:"application/javascript"}),s=URL.createObjectURL(a),c=e.onerror,u=()=>{e.onerror=c,URL.revokeObjectURL(s)};e.onerror=(t,n,o,i,a)=>n===s||n===e.location.href&&1===o&&1===i?(u(),r(a),!1):null!==c?c(t,n,o,i,a):void 0,i.onerror=()=>{u(),r(new SyntaxError)},i.onload=()=>{u(),n()},i.src=s,i.type="module",o.appendChild(i)}})))(mt),Zn,(async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw new DOMException("","AbortError")}),wt,Qn,xt,Mt,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new t(1,128,44100),o=URL.createObjectURL(n);let i=!1,a=!1;try{await r.audioWorklet.addModule(o);const t=new e(r,"a",{numberOfOutputs:0}),n=r.createOscillator();t.port.onmessage=()=>i=!0,t.onprocessorerror=()=>a=!0,n.connect(t),n.start(0),await r.startRendering(),await new Promise((e=>setTimeout(e)))}catch{}finally{URL.revokeObjectURL(o)}return i&&!a})(Mt,Et),mt):void 0,Kn=((e,t)=>n=>e(n)||t(n))(It,xt),er=((e,t,n,r,o,i,a,s,c,u,l)=>(n,r)=>{const d=a(n)?n:i(n);if(o.has(r)){const e=new DOMException("","DataCloneError");return Promise.reject(e)}try{o.add(r)}catch{}return t(c,(()=>c(d)))?d.decodeAudioData(r).then((n=>(ye(r).catch((()=>{})),t(s,(()=>s(n)))||l(n),e.add(n),n))):new Promise(((t,n)=>{const o=async()=>{try{await ye(r)}catch{}},i=e=>{n(e),o()};try{d.decodeAudioData(r,(n=>{"function"!=typeof n.copyFromChannel&&(u(n),N(n)),e.add(n),o().then((()=>t(n)))}),(e=>{i(null===e?new DOMException("","EncodingError"):e)}))}catch(e){i(e)}}))})(Dt,ht,0,0,new WeakSet,wt,Kn,M,Ae,Ft,jt),tr=((e,t,n,r,o,i,a,s,c,u,l,d,h,f,p,m,v,g,y,b)=>class extends p{constructor(t,n){super(t,n),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,n)=>e(this,t,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new o(this)}createBuffer(e,t,r){return new n({length:t,numberOfChannels:e,sampleRate:r})}createBufferSource(){return new r(this)}createChannelMerger(e=6){return new i(this,{numberOfInputs:e})}createChannelSplitter(e=6){return new a(this,{numberOfOutputs:e})}createConstantSource(){return new s(this)}createConvolver(){return new c(this)}createDelay(e=1){return new l(this,{maxDelayTime:e})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(e,t){return new f(this,{feedback:t,feedforward:e})}createOscillator(){return new m(this)}createPanner(){return new v(this)}createPeriodicWave(e,t,n={disableNormalization:!1}){return new g(this,{...n,imag:t,real:e})}createStereoPanner(){return new y(this)}createWaveShaper(){return new b(this)}decodeAudioData(e,t,n){return u(this._nativeContext,e).then((e=>("function"==typeof t&&t(e),e)),(e=>{throw"function"==typeof n&&n(e),e}))}})(Jn,Lt,Wt,Zt,Kt,on,sn,dn,pn,er,vn,bn,Cn,kn,Tn,Nn,jn,zn,Hn,Yn),nr=(((e,t,n,r)=>{})(Ot,0,wt,xt),((e,t,n,r)=>{})(Ot,0,wt,xt),((e,t,n,r)=>{})(Ot,0,wt,xt),((e,t)=>(n,{mediaStreamTrack:r})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(r);const o=new MediaStream([r]),i=n.createMediaStreamSource(o);if("audio"!==r.kind)throw e();if(t(n))throw new TypeError;return i})(xe,xt)),rr=(((e,t,n)=>{})(Ot,nr,wt),(e=>t=>{const n=e.get(t);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(An)),or=((e=>{})(rr),(e=>(t,n,r=0,o=0)=>{const i=t[r];if(void 0===i)throw e();return oe(n)?i.connect(n,0,o):i.connect(n,0)})(O)),ir=(e=>(t,n)=>{e(t).delete(n)})(rr),ar=(e=>(t,n=void 0,r=void 0,o=0)=>void 0===n?t.forEach((e=>e.disconnect())):"number"==typeof n?we(e,t,n).disconnect():oe(n)?void 0===r?t.forEach((e=>e.disconnect(n))):void 0===o?we(e,t,r).disconnect(n,0):we(e,t,r).disconnect(n,0,o):void 0===r?t.forEach((e=>e.disconnect(n))):we(e,t,r).disconnect(n,0))(O),sr=new WeakMap,cr=((e,t)=>n=>t(e,n))(sr,w),ur=((e,t,n,r,o,i,a,s,c,u,l,d,h)=>(f,m,v,g)=>{if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw c();const y=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(y.some((e=>e<1)))throw c();if(y.length!==g.numberOfOutputs)throw t();if("explicit"!==g.channelCountMode)throw c();const b=g.channelCount*g.numberOfInputs,w=y.reduce(((e,t)=>e+t),0),C=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length;if(b+C>6||w>6)throw c();const E=new MessageChannel,x=[],_=[];for(let e=0;e<g.numberOfInputs;e+=1)x.push(a(f,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),_.push(o(f,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const S=[];if(void 0!==v.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:r}of v.parameterDescriptors){const o=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[r]?g.parameterData[r]:void 0===e?0:e});Object.defineProperties(o.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?P:t},minValue:{get:()=>void 0===n?D:n}}),S.push(o)}const k=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,b+C)}),I=Pe(m,f.sampleRate),A=s(f,I,b+C,Math.max(1,w)),T=o(f,{channelCount:Math.max(1,w),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,w)}),M=[];for(let e=0;e<g.numberOfOutputs;e+=1)M.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[e]}));for(let e=0;e<g.numberOfInputs;e+=1){x[e].connect(_[e]);for(let t=0;t<g.channelCount;t+=1)_[e].connect(k,t,e*g.channelCount+t)}const O=new ce(void 0===v.parameterDescriptors?[]:v.parameterDescriptors.map((({name:e},t)=>{const n=S[t];return n.connect(k,0,b+t),n.start(0),[e,n.offset]})));k.connect(A);let N=g.channelInterpretation,L=null;const R=0===g.numberOfOutputs?[A]:M,B={get bufferSize(){return I},get channelCount(){return g.channelCount},set channelCount(e){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return N},set channelInterpretation(e){for(const t of x)t.channelInterpretation=e;N=e},get context(){return A.context},get inputs(){return x},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return L},set onprocessorerror(e){"function"==typeof L&&B.removeEventListener("processorerror",L),L="function"==typeof e?e:null,"function"==typeof L&&B.addEventListener("processorerror",L)},get parameters(){return O},get port(){return E.port2},addEventListener:(...e)=>A.addEventListener(e[0],e[1],e[2]),connect:e.bind(null,R),disconnect:u.bind(null,R),dispatchEvent:(...e)=>A.dispatchEvent(e[0]),removeEventListener:(...e)=>A.removeEventListener(e[0],e[1],e[2])},F=new Map;var j,W;E.port1.addEventListener=(j=E.port1.addEventListener,(...e)=>{if("message"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=F.get(e[1]);void 0!==n?e[1]=n:(e[1]=e=>{l(f.currentTime,f.sampleRate,(()=>t(e)))},F.set(t,e[1]))}}return j.call(E.port1,e[0],e[1],e[2])}),E.port1.removeEventListener=(W=E.port1.removeEventListener,(...e)=>{if("message"===e[0]){const t=F.get(e[1]);void 0!==t&&(F.delete(e[1]),e[1]=t)}return W.call(E.port1,e[0],e[1],e[2])});let z=null;Object.defineProperty(E.port1,"onmessage",{get:()=>z,set:e=>{"function"==typeof z&&E.port1.removeEventListener("message",z),z="function"==typeof e?e:null,"function"==typeof z&&(E.port1.addEventListener("message",z),E.port1.start())}}),v.prototype.port=E.port1;let q=null;const V=((e,t,n,r)=>{let o=p.get(e);void 0===o&&(o=new WeakMap,p.set(e,o));const i=(async(e,t)=>{const n=await(e=>new Promise(((t,n)=>{const{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:e})=>{r.close(),o.close(),t(e)},r.onmessageerror=({data:e})=>{r.close(),o.close(),n(e)},o.postMessage(e)})))(t);return new e(n)})(n,r);return o.set(t,i),i})(f,B,v,g);V.then((e=>q=e));const U=de(g.numberOfInputs,g.channelCount),H=de(g.numberOfOutputs,y),X=void 0===v.parameterDescriptors?[]:v.parameterDescriptors.reduce(((e,{name:t})=>({...e,[t]:new Float32Array(128)})),{});let Y=!0;const G=()=>{g.numberOfOutputs>0&&A.disconnect(T);for(let e=0,t=0;e<g.numberOfOutputs;e+=1){const n=M[e];for(let r=0;r<y[e];r+=1)T.disconnect(n,t+r,r);t+=y[e]}},Z=new Map;A.onaudioprocess=({inputBuffer:e,outputBuffer:t})=>{if(null!==q){const n=d(B);for(let r=0;r<I;r+=128){for(let t=0;t<g.numberOfInputs;t+=1)for(let n=0;n<g.channelCount;n+=1)ue(e,U[t],n,n,r);void 0!==v.parameterDescriptors&&v.parameterDescriptors.forEach((({name:t},n)=>{ue(e,X,t,b+n,r)}));for(let e=0;e<g.numberOfInputs;e+=1)for(let t=0;t<y[e];t+=1)0===H[e][t].byteLength&&(H[e][t]=new Float32Array(128));try{const e=U.map(((e,t)=>{if(n[t].size>0)return Z.set(t,I/128),e;const r=Z.get(t);return void 0===r?[]:(e.every((e=>e.every((e=>0===e))))&&(1===r?Z.delete(t):Z.set(t,r-1)),e)})),o=l(f.currentTime+r/f.sampleRate,f.sampleRate,(()=>q.process(e,H,X)));Y=o;for(let e=0,n=0;e<g.numberOfOutputs;e+=1){for(let o=0;o<y[e];o+=1)le(t,H[e],o,n+o,r);n+=y[e]}}catch(e){Y=!1,B.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}))}if(!Y){for(let e=0;e<g.numberOfInputs;e+=1){x[e].disconnect(_[e]);for(let t=0;t<g.channelCount;t+=1)_[r].disconnect(k,t,e*g.channelCount+t)}if(void 0!==v.parameterDescriptors){const e=v.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=S[t];e.disconnect(k,0,b+t),e.stop()}}k.disconnect(A),A.onaudioprocess=null,$?G():K();break}}}};let $=!1;const Q=a(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),J=()=>A.connect(Q).connect(f.destination),K=()=>{A.disconnect(Q),Q.disconnect()};return J(),h(B,(()=>{if(Y){K(),g.numberOfOutputs>0&&A.connect(T);for(let e=0,t=0;e<g.numberOfOutputs;e+=1){const n=M[e];for(let r=0;r<y[e];r+=1)T.connect(n,t+r,r);t+=y[e]}}$=!0}),(()=>{Y&&(J(),G()),$=!1}))})(or,O,xe,nn,Be,un,We,Ue,He,ar,Zn,cr,en),lr=(((e,t,n,r,o)=>{})(xe,ur,We,He,en),((e,t,n,r,o,i,a,s,c,u,l,d,h,f,p,m)=>{})(Vt,or,Ut,nn,Be,un,We,ir,ar,Zn,J,Mt,Et,Ht,yt,xn),(e=>{})($n),(e=>{})(sr),((e,t)=>(n,r,o)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,r,o)}catch(t){if("SyntaxError"===t.name)throw e();throw t}})(He,Et)),dr=((e,t,n,r,o,i,a,s)=>(c,u)=>n(c).render(c,u).then((()=>Promise.all(Array.from(r(u)).map((e=>n(e).render(e,u)))))).then((()=>o(u))).then((n=>("function"!=typeof n.copyFromChannel?(a(n),N(n)):t(i,(()=>i(n)))||s(n),e.add(n),n))))(Dt,ht,gt,rr,xn,M,Ft,jt),hr=((e,t,n,r,o)=>class extends e{constructor(e,n,o){let i;if("number"==typeof e&&void 0!==n&&void 0!==o)i={length:n,numberOfChannels:e,sampleRate:o};else{if("object"!=typeof e)throw new Error("The given parameters are not valid.");i=e}const{length:a,numberOfChannels:s,sampleRate:c}={...Xe,...i},u=r(s,a,c);t(Ae,(()=>Ae(u)))||u.addEventListener("statechange",(()=>{let e=0;const t=n=>{"running"===this._state&&(e>0?(u.removeEventListener("statechange",t),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):e+=1)};return t})()),super(u,s),this._length=a,this._nativeOfflineAudioContext=u,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,W(this.destination,[])})))}_waitForThePromiseToSettle(e){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(e):setTimeout((()=>this._waitForThePromiseToSettle(e)))}})(tr,ht,xe,lr,dr),fr=(e,t,n)=>{const r=new hr(e.numberOfChannels,Math.round(n*e.sampleRate),e.sampleRate),o=r.createBiquadFilter(),i=r.createBufferSource();return o.frequency.value=240,o.type="lowpass",i.buffer=e,i.connect(o).connect(r.destination),i.start(0,t,n),r.startRendering().then((e=>({channelData:e.getChannelData(0),sampleRate:e.sampleRate})))},pr=(()=>{let e=null;return()=>{if(null!==e)return e;const t=new Blob(['(()=>{"use strict";const e=(e,t,s)=>{const o=e.length,n=[];let a=!1;for(let r=0;r<o;r+=1)e[r]>t?a=!0:a&&(a=!1,n.push(r-1),r+=s/4-1);return a&&n.push(o-1),n},t=(t,s,o)=>{const n=(e=>{let t=0;const s=e.length;for(let o=0;o<s;o+=1)e[o]>t&&(t=e[o]);return t})(t),a=.3*n;let r=[],l=n-.05*n;if(n>.25)for(;r.length<30&&l>=a;)r=e(t,l,s),l-=.05*n;const p=(e=>{const t=[];return e.forEach(((s,o)=>{const n=Math.min(e.length-o,10);for(let a=1;a<n;a+=1){const n=e[o+a]-s;t.some((e=>e.interval===n&&(e.peaks.push(s),!0)))||t.push({interval:n,peaks:[s]})}})),t})(r),h=((e,t,s={})=>{var o,n;const a=Math.max(0,null!==(o=s.maxTempo)&&void 0!==o?o:180),r=Math.max(0,null!==(n=s.minTempo)&&void 0!==n?n:90),l=[];return e.forEach((e=>{let s=60/(e.interval/t);for(;s<r;)s*=2;for(;s>a;)s/=2;if(s<r)return;let o=!1,n=e.peaks.length;l.forEach((t=>{if(t.tempo===s&&(t.score+=e.peaks.length,t.peaks=[...t.peaks,...e.peaks],o=!0),t.tempo>s-.5&&t.tempo<s+.5){const o=2*Math.abs(t.tempo-s);n+=(1-o)*t.peaks.length,t.score+=(1-o)*e.peaks.length}})),o||l.push({peaks:e.peaks,score:n,tempo:s})})),l})(p,s,o);return h.sort(((e,t)=>t.score-e.score)),h};addEventListener("message",(({data:e})=>{try{if("analyze"===e.method){const{id:s,params:{channelData:o,sampleRate:n,tempoSettings:a}}=e,r=((e,s,o)=>{const n=t(e,s,o);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");return n[0].tempo})(o,n,a);postMessage({error:null,id:s,result:{tempo:r}})}else{if("guess"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{id:s,params:{channelData:o,sampleRate:n,tempoSettings:a}}=e,{bpm:r,offset:l,tempo:p}=((e,s,o)=>{const n=t(e,s,o);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");const{peaks:a,tempo:r}=n[0],l=Math.round(r),p=60/l;a.sort(((e,t)=>e-t));let h=a[0]/s;for(;h>p;)h-=p;return{bpm:l,offset:h,tempo:r}})(o,n,a);postMessage({error:null,id:s,result:{bpm:r,offset:l,tempo:p}})}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}}))})();'],{type:"application/javascript; charset=utf-8"}),r=URL.createObjectURL(t);return e=(e=>{const t=new Worker(e),r=new Set;return{analyze:(...e)=>{var o;const[i,a,s]=e,c="number"==typeof a?a:0,u="number"==typeof s?s:i.duration-c,l="object"==typeof a?a:"object"==typeof s?s:null!==(o=e[3])&&void 0!==o?o:null;return new Promise((async(e,o)=>{const{channelData:a,sampleRate:s}=await fr(i,c,u),d=(0,n.addUniqueNumber)(r),h=({data:n})=>{n.id===d&&(r.delete(d),t.removeEventListener("message",h),null===n.error?e(n.result.tempo):o(new Error(n.error.message)))};t.addEventListener("message",h),t.postMessage({id:d,method:"analyze",params:{channelData:a,sampleRate:s,...null===l?l:{tempoSettings:l}}},[a.buffer])}))},guess:(...e)=>{var o;const[i,a,s]=e,c="number"==typeof a?a:0,u="number"==typeof s?s:i.duration-c,l="object"==typeof a?a:"object"==typeof s?s:null!==(o=e[3])&&void 0!==o?o:null;return new Promise((async(e,o)=>{const{channelData:a,sampleRate:s}=await fr(i,c,u),d=(0,n.addUniqueNumber)(r),h=({data:n})=>{n.id===d&&(r.delete(d),t.removeEventListener("message",h),null===n.error?e(n.result):o(new Error(n.error.message)))};t.addEventListener("message",h),t.postMessage({id:d,method:"guess",params:{channelData:a,sampleRate:s,...null===l?l:{tempoSettings:l}}},[a.buffer])}))}}})(r),setTimeout((()=>URL.revokeObjectURL(r))),e}})(),mr=(...e)=>pr().guess(...e);function vr(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;class gr{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),null==n?void 0:n.once){const n=()=>{this.un(e,n),this.un(e,t)};return this.on(e,n),n}return()=>this.un(e,t)}un(e,t){var n;null===(n=this.listeners[e])||void 0===n||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((e=>e(...t)))}}const yr={decode:function(e,t){return vr(this,void 0,void 0,(function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally((()=>n.close()))}))},createBuffer:function(e,t){return"number"==typeof e[0]&&(e=[e]),function(e){const t=e[0];if(t.some((e=>e>1||e<-1))){const n=t.length;let r=0;for(let e=0;e<n;e++){const n=Math.abs(t[e]);n>r&&(r=n)}for(const t of e)for(let e=0;e<n;e++)t[e]/=r}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:t=>null==e?void 0:e[t],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function br(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[e,r]of Object.entries(t))if("children"===e)for(const[e,r]of Object.entries(t))"string"==typeof r?n.appendChild(document.createTextNode(r)):n.appendChild(br(e,r));else"style"===e?Object.assign(n.style,r):"textContent"===e?n.textContent=r:n.setAttribute(e,r.toString());return n}function wr(e,t,n){const r=br(e,t||{});return null==n||n.appendChild(r),r}var Cr=Object.freeze({__proto__:null,createElement:wr,default:wr});const Er={fetchBlob:function(e,t,n){return vr(this,void 0,void 0,(function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(e,t){vr(this,void 0,void 0,(function*(){if(!e.body||!e.headers)return;const n=e.body.getReader(),r=Number(e.headers.get("Content-Length"))||0;let o=0;const i=e=>vr(this,void 0,void 0,(function*(){o+=(null==e?void 0:e.length)||0;const n=Math.round(o/r*100);t(n)})),a=()=>vr(this,void 0,void 0,(function*(){let e;try{e=yield n.read()}catch(e){return}e.done||(i(e.value),yield a())}));a()}))}(r.clone(),t),r.blob()}))}};class xr extends gr{constructor(e){super(),this.isExternalMedia=!1,e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),null!=e.playbackRate&&this.onMediaEvent("canplay",(()=>{null!=e.playbackRate&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t,n)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return""!==this.media.canPlayType(e)}setSrc(e,t){const n=this.getSrc();if(e&&n===e)return;this.revokeSrc();const r=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;try{this.media.src=r}catch(t){this.media.src=e}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(e){this.media=e}play(){return vr(this,void 0,void 0,(function*(){return this.media.play()}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=e}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){null!=t&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}class _r extends gr{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[r,o]=this.initHtml();n.appendChild(r),this.container=r,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if("string"==typeof e?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){const e=e=>{const t=this.wrapper.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;return[n/t.width,r/t.height]};if(this.wrapper.addEventListener("click",(t=>{const[n,r]=e(t);this.emit("click",n,r)})),this.wrapper.addEventListener("dblclick",(t=>{const[n,r]=e(t);this.emit("dblclick",n,r)})),!0!==this.options.dragToSeek&&"object"!=typeof this.options.dragToSeek||this.initDrag(),this.scrollContainer.addEventListener("scroll",(()=>{const{scrollLeft:e,scrollWidth:t,clientWidth:n}=this.scrollContainer,r=e/t,o=(e+n)/t;this.emit("scroll",r,o,e,e+n)})),"function"==typeof ResizeObserver){const e=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{e().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&"auto"!==this.options.height||(this.lastContainerWidth=e,this.reRender())}initDrag(){this.subscriptions.push(function(e,t,n,r,o=3,i=0,a=100){if(!e)return()=>{};const s=matchMedia("(pointer: coarse)").matches;let c=()=>{};const u=u=>{if(u.button!==i)return;u.preventDefault(),u.stopPropagation();let l=u.clientX,d=u.clientY,h=!1;const f=Date.now(),p=r=>{if(r.preventDefault(),r.stopPropagation(),s&&Date.now()-f<a)return;const i=r.clientX,c=r.clientY,u=i-l,p=c-d;if(h||Math.abs(u)>o||Math.abs(p)>o){const r=e.getBoundingClientRect(),{left:o,top:a}=r;h||(null==n||n(l-o,d-a),h=!0),t(u,p,i-o,c-a),l=i,d=c}},m=t=>{if(h){const n=t.clientX,o=t.clientY,i=e.getBoundingClientRect(),{left:a,top:s}=i;null==r||r(n-a,o-s)}c()},v=e=>{e.relatedTarget&&e.relatedTarget!==document.documentElement||m(e)},g=e=>{h&&(e.stopPropagation(),e.preventDefault())},y=e=>{h&&e.preventDefault()};document.addEventListener("pointermove",p),document.addEventListener("pointerup",m),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",y,{passive:!1}),document.addEventListener("click",g,{capture:!0}),c=()=>{document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",m),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",y),setTimeout((()=>{document.removeEventListener("click",g,{capture:!0})}),10)}};return e.addEventListener("pointerdown",u),()=>{c(),e.removeEventListener("pointerdown",u)}}(this.wrapper,((e,t,n)=>{this.emit("drag",Math.max(0,Math.min(1,n/this.wrapper.getBoundingClientRect().width)))}),(e=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))}),(e=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))})))}getHeight(e,t){var n;const r=(null===(n=this.audioData)||void 0===n?void 0:n.numberOfChannels)||1;if(null==e)return 128;if(!isNaN(Number(e)))return Number(e);if("auto"===e){const e=this.parent.clientHeight||128;return(null==t?void 0:t.every((e=>!e.overlay)))?e/r:e}return 128}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=this.options.cspNonce&&"string"==typeof this.options.cspNonce?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`\n      <style${n?` nonce="${n}"`:""}>\n        :host {\n          user-select: none;\n          min-width: 1px;\n        }\n        :host audio {\n          display: block;\n          width: 100%;\n        }\n        :host .scroll {\n          overflow-x: auto;\n          overflow-y: hidden;\n          width: 100%;\n          position: relative;\n        }\n        :host .noScrollbar {\n          scrollbar-color: transparent;\n          scrollbar-width: none;\n        }\n        :host .noScrollbar::-webkit-scrollbar {\n          display: none;\n          -webkit-appearance: none;\n        }\n        :host .wrapper {\n          position: relative;\n          overflow: visible;\n          z-index: 2;\n        }\n        :host .canvases {\n          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;\n        }\n        :host .canvases > div {\n          position: relative;\n        }\n        :host canvas {\n          display: block;\n          position: absolute;\n          top: 0;\n          image-rendering: pixelated;\n        }\n        :host .progress {\n          pointer-events: none;\n          position: absolute;\n          z-index: 2;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          overflow: hidden;\n        }\n        :host .progress > div {\n          position: relative;\n        }\n        :host .cursor {\n          pointer-events: none;\n          position: absolute;\n          z-index: 5;\n          top: 0;\n          left: 0;\n          height: 100%;\n          border-radius: 2px;\n        }\n      </style>\n\n      <div class="scroll" part="scroll">\n        <div class="wrapper" part="wrapper">\n          <div class="canvases" part="canvases"></div>\n          <div class="progress" part="progress"></div>\n          <div class="cursor" part="cursor"></div>\n        </div>\n      </div>\n    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}!0!==e.dragToSeek&&"object"!=typeof this.options.dragToSeek||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,n=t*e;this.setScroll(n)}destroy(){var e,t;this.subscriptions.forEach((e=>e())),this.container.remove(),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),null===(t=this.unsubscribeOnScroll)||void 0===t||t.forEach((e=>e())),this.unsubscribeOnScroll=[]}createDelay(e=10){let t,n;const r=()=>{t&&clearTimeout(t),n&&n()};return this.timeouts.push(r),()=>new Promise(((o,i)=>{r(),n=i,t=setTimeout((()=>{t=void 0,n=void 0,o()}),e)}))}convertColorValues(e){if(!Array.isArray(e))return e||"";if(e.length<2)return e[0]||"";const t=document.createElement("canvas"),n=t.getContext("2d"),r=t.height*(window.devicePixelRatio||1),o=n.createLinearGradient(0,0,0,r),i=1/(e.length-1);return e.forEach(((e,t)=>{const n=t*i;o.addColorStop(n,e)})),o}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(e,t,n,r){const o=e[0],i=e[1]||e[0],a=o.length,{width:s,height:c}=n.canvas,u=c/2,l=this.getPixelRatio(),d=t.barWidth?t.barWidth*l:1,h=t.barGap?t.barGap*l:t.barWidth?d/2:0,f=t.barRadius||0,p=s/(d+h)/a,m=f&&"roundRect"in n?"roundRect":"rect";n.beginPath();let v=0,g=0,y=0;for(let e=0;e<=a;e++){const a=Math.round(e*p);if(a>v){const e=Math.round(g*u*r),o=e+Math.round(y*u*r)||1;let i=u-e;"top"===t.barAlign?i=0:"bottom"===t.barAlign&&(i=c-o),n[m](v*(d+h),i,d,o,f),v=a,g=0,y=0}const s=Math.abs(o[e]||0),l=Math.abs(i[e]||0);s>g&&(g=s),l>y&&(y=l)}n.fill(),n.closePath()}renderLineWaveform(e,t,n,r){const o=t=>{const o=e[t]||e[0],i=o.length,{height:a}=n.canvas,s=a/2,c=n.canvas.width/i;n.moveTo(0,s);let u=0,l=0;for(let e=0;e<=i;e++){const i=Math.round(e*c);if(i>u){const e=s+(Math.round(l*s*r)||1)*(0===t?-1:1);n.lineTo(u,e),u=i,l=0}const a=Math.abs(o[e]||0);a>l&&(l=a)}n.lineTo(u,s)};n.beginPath(),o(0),o(1),n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor),t.renderFunction)return void t.renderFunction(e,n);let r=t.barHeight||1;if(t.normalize){const t=Array.from(e[0]).reduce(((e,t)=>Math.max(e,Math.abs(t))),0);r=t?1/t:1}t.barWidth||t.barGap||t.barAlign?this.renderBarWaveform(e,t,n,r):this.renderLineWaveform(e,t,n,r)}renderSingleCanvas(e,t,n,r,o,i,a){const s=this.getPixelRatio(),c=document.createElement("canvas");c.width=Math.round(n*s),c.height=Math.round(r*s),c.style.width=`${n}px`,c.style.height=`${r}px`,c.style.left=`${Math.round(o)}px`,i.appendChild(c);const u=c.getContext("2d");if(this.renderWaveform(e,t,u),c.width>0&&c.height>0){const e=c.cloneNode(),n=e.getContext("2d");n.drawImage(c,0,0),n.globalCompositeOperation="source-in",n.fillStyle=this.convertColorValues(t.progressColor),n.fillRect(0,0,c.width,c.height),a.appendChild(e)}}renderMultiCanvas(e,t,n,r,o,i){const a=this.getPixelRatio(),{clientWidth:s}=this.scrollContainer,c=n/a;let u=Math.min(_r.MAX_CANVAS_WIDTH,s,c),l={};if(t.barWidth||t.barGap){const e=t.barWidth||.5,n=e+(t.barGap||e/2);u%n!=0&&(u=Math.floor(u/n)*n)}const d=n=>{if(n<0||n>=h)return;if(l[n])return;l[n]=!0;const a=n*u,s=Math.min(c-a,u);if(s<=0)return;const d=e.map((e=>{const t=Math.floor(a/c*e.length),n=Math.floor((a+s)/c*e.length);return e.slice(t,n)}));this.renderSingleCanvas(d,t,s,r,a,o,i)},h=Math.ceil(c/u);if(!this.isScrollable){for(let e=0;e<h;e++)d(e);return}const f=this.scrollContainer.scrollLeft/c,p=Math.floor(f*h);if(d(p-1),d(p),d(p+1),h>1){const e=this.on("scroll",(()=>{const{scrollLeft:e}=this.scrollContainer,t=Math.floor(e/c*h);Object.keys(l).length>_r.MAX_NODES&&(o.innerHTML="",i.innerHTML="",l={}),d(t-1),d(t),d(t+1)}));this.unsubscribeOnScroll.push(e)}}renderChannel(e,t,n,r){var{overlay:o}=t,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["overlay"]);const a=document.createElement("div"),s=this.getHeight(i.height,i.splitChannels);a.style.height=`${s}px`,o&&r>0&&(a.style.marginTop=`-${s}px`),this.canvasWrapper.style.minHeight=`${s}px`,this.canvasWrapper.appendChild(a);const c=a.cloneNode();this.progressWrapper.appendChild(c),this.renderMultiCanvas(e,i,n,s,a,c)}render(e){return vr(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((e=>e())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",null!=this.options.width&&(this.scrollContainer.style.width="number"==typeof this.options.width?`${this.options.width}px`:this.options.width);const n=this.getPixelRatio(),r=this.scrollContainer.clientWidth,o=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrollable=o>r;const i=this.options.fillParent&&!this.isScrollable,a=(i?r:o)*n;if(this.wrapper.style.width=i?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let n=0;n<e.numberOfChannels;n++){const r=Object.assign(Object.assign({},this.options),null===(t=this.options.splitChannels)||void 0===t?void 0:t[n]);this.renderChannel([e.getChannelData(n)],r,a,n)}else{const t=[e.getChannelData(0)];e.numberOfChannels>1&&t.push(e.getChannelData(1)),this.renderChannel(t,this.options,a,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((e=>e())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:e}=this.progressWrapper.getBoundingClientRect();let n=e-t;n*=2,n=n<0?Math.floor(n):Math.ceil(n),n/=2,this.scrollContainer.scrollLeft+=n}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:n,scrollWidth:r,clientWidth:o}=this.scrollContainer,i=e*r,a=n,s=n+o,c=o/2;if(this.isDragging){const e=30;i+e>s?this.scrollContainer.scrollLeft+=e:i-e<a&&(this.scrollContainer.scrollLeft-=e)}else{(i<a||i>s)&&(this.scrollContainer.scrollLeft=i-(this.options.autoCenter?c:0));const e=i-n-c;t&&this.options.autoCenter&&e>0&&(this.scrollContainer.scrollLeft+=Math.min(e,10))}{const e=this.scrollContainer.scrollLeft,t=e/r,n=(e+o)/r;this.emit("scroll",t,n,e,e+o)}}renderProgress(e,t){if(isNaN(e))return;const n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0, 100% 0, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=`translateX(-${100===Math.round(n)?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(e,t)}exportImage(e,t,n){return vr(this,void 0,void 0,(function*(){const r=this.canvasWrapper.querySelectorAll("canvas");if(!r.length)throw new Error("No waveform data");if("dataURL"===n){const n=Array.from(r).map((n=>n.toDataURL(e,t)));return Promise.resolve(n)}return Promise.all(Array.from(r).map((n=>new Promise(((r,o)=>{n.toBlob((e=>{e?r(e):o(new Error("Could not export image"))}),e,t)})))))}))}}_r.MAX_CANVAS_WIDTH=8e3,_r.MAX_NODES=10;class Sr extends gr{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",(()=>{requestAnimationFrame((()=>{this.emit("tick")}))})),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class kr extends gr{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return vr(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())}))}_play(){var e;if(!this.paused)return;this.paused=!1,null===(e=this.bufferNode)||void 0===e||e.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let t=this.playedDuration*this._playbackRate;t>=this.duration&&(t=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,t),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,null===(e=this.bufferNode)||void 0===e||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return vr(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){var t,n;const r=e-this.currentTime;null===(t=this.bufferNode)||void 0===t||t.stop(this.audioContext.currentTime+r),null===(n=this.bufferNode)||void 0===n||n.addEventListener("ended",(()=>{this.bufferNode=null,this.pause()}),{once:!0})}setSinkId(e){return vr(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return null!==(e=this._duration)&&void 0!==e?e:(null===(t=this.buffer)||void 0===t?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}}const Ir={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Ar extends xr{static create(e){return new Ar(e)}constructor(e){const t=e.media||("WebAudio"===e.backend?new kr:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},Ir,e),this.timer=new Sr;const n=t?void 0:this.getMediaElement();this.renderer=new _r(this.options,n),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const r=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:e,duration:t}=this.options;(r||e&&t)&&this.load(r,e,t).catch((()=>null))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e)}})))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop()})),this.onMediaEvent("emptied",(()=>{this.timer.stop()})),this.onMediaEvent("ended",(()=>{this.emit("finish")})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(e=>{this.emit("error",e.error)})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))})),this.renderer.on("dblclick",((e,t)=>{this.emit("dblclick",e,t)})),this.renderer.on("scroll",((e,t,n,r)=>{const o=this.getDuration();this.emit("scroll",e*o,t*o,n,r)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})));{let e;this.subscriptions.push(this.renderer.on("drag",(t=>{if(!this.options.interact)return;let n;this.renderer.renderProgress(t),clearTimeout(e),this.isPlaying()?n=0:!0===this.options.dragToSeek?n=200:"object"==typeof this.options.dragToSeek&&void 0!==this.options.dragToSeek&&(n=this.options.dragToSeek.debounceTime),e=setTimeout((()=>{this.seekTo(t)}),n),this.emit("interaction",t*this.getDuration()),this.emit("drag",t)})))}}initPlugins(){var e;(null===(e=this.options.plugins)||void 0===e?void 0:e.length)&&this.options.plugins.forEach((e=>{this.registerPlugin(e)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),null!=e.mediaControls&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){return e._init(this),this.plugins.push(e),this.subscriptions.push(e.once("destroy",(()=>{this.plugins=this.plugins.filter((t=>t!==e))}))),e}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,n,r){return vr(this,void 0,void 0,(function*(){var o;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!t&&!n){const n=this.options.fetchParams||{};window.AbortController&&!n.signal&&(this.abortController=new AbortController,n.signal=null===(o=this.abortController)||void 0===o?void 0:o.signal);const r=e=>this.emit("loading",e);t=yield Er.fetchBlob(e,r,n)}this.setSrc(e,t);const i=yield new Promise((e=>{const t=r||this.getDuration();t?e(t):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>e(this.getDuration())),{once:!0}))}));if(!e&&!t){const e=this.getMediaElement();e instanceof kr&&(e.duration=i)}if(n)this.decodedData=yr.createBuffer(n,i||0);else if(t){const e=yield t.arrayBuffer();this.decodedData=yield yr.decode(e,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,t,n){return vr(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,n)}catch(e){throw this.emit("error",e),e}}))}loadBlob(e,t,n){return vr(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,t,n)}catch(e){throw this.emit("error",e),e}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const r=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let e=0;e<r;e++){const r=this.decodedData.getChannelData(e),i=[],a=r.length/t;for(let e=0;e<t;e++){const t=r.slice(Math.floor(e*a),Math.ceil((e+1)*a));let o=0;for(let e=0;e<t.length;e++){const n=t[e];Math.abs(n)>Math.abs(o)&&(o=n)}i.push(Math.round(o*n)/n)}o.push(i)}return o}getDuration(){let e=super.getDuration()||0;return 0!==e&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}playPause(){return vr(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return vr(this,arguments,void 0,(function*(e="image/png",t=1,n="dataURL"){return this.renderer.exportImage(e,t,n)}))}destroy(){var e;this.emit("destroy"),null===(e=this.abortController)||void 0===e||e.abort(),this.plugins.forEach((e=>e.destroy())),this.subscriptions.forEach((e=>e())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function Mr(){Mr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new M(r||[]);return o(a,"_invoke",{value:k(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",v={};function g(){}function y(){}function b(){}var w={};u(w,a,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(O([])));E&&E!==n&&r.call(E,a)&&(w=E);var x=b.prototype=g.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Tr(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=I(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?m:f,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function I(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Tr(t)+" is not iterable")}return y.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(S.prototype),u(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||Lr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Lr(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Lr(e,t){if(e){if("string"==typeof e)return Dr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dr(e,t):void 0}}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zr(r.key),r)}}function Br(e,t,n){return t&&Rr(e.prototype,t),n&&Rr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){Wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wr(e,t,n){return(t=zr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zr(e){var t=function(e){if("object"!=Tr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Tr(t)?t:t+""}function qr(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Vr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){qr(i,r,o,a,s,"next",e)}function s(e){qr(i,r,o,a,s,"throw",e)}a(void 0)}))}}function Ur(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function Hr(e,t){var n;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(n),n=setTimeout((function(){return e.apply(void 0,o)}),t)}}function Xr(){return Yr.apply(this,arguments)}function Yr(){return(Yr=Vr(Mr().mark((function e(){var t,n,r;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){try{var t=e.match(/\.([a-zA-Z0-9]+)(?:[\?#]|$)/);return t?t[1]:"json"}catch(e){return console.error("Error extracting language from URL:",e),"json"}};try{n=Array.from(document.querySelectorAll("pre")),r=document.createDocumentFragment(),n.forEach((function(e){if(!e.querySelector("code")){var n=t(location.href);if(/^[a-zA-Z\-]+$/.test(n)){var o=document.createElement("code");o.className="language-".concat(n),o.textContent=e.textContent,r.appendChild(o),e.textContent="",e.appendChild(o)}}})),requestAnimationFrame((function(){document.body.appendChild(r),n.forEach((function(e){var t=e.querySelector("code");if(t&&(window.hljs.highlightElement(t),!t.nextElementSibling||!t.nextElementSibling.classList.contains("highlight-language"))){var n=t.result?t.result.language:"plaintext",r=document.createElement("span");r.className="highlight-language",r.textContent="Language: ".concat(n),e.appendChild(r)}}))}))}catch(e){Gr.showError("Error highlighting code in <pre> elements:",e)}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ar.BasePlugin=class extends gr{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((e=>e()))}},Ar.dom=Cr,function(){var e=localStorage.getItem("theme"),t=function(){return e||(localStorage.setItem("theme","auto"),window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},n=function(e){if("auto"===e){var t=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-bs-theme",t?"dark":"light")}else document.documentElement.setAttribute("data-bs-theme",e)};n(t());var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.querySelector("#themeDropdown");document.querySelectorAll(".dropdown-item").forEach((function(e){e.classList.remove("active"),e.setAttribute("aria-pressed","false")}));var r=document.querySelector('[data-bs-theme-value="'.concat(e,'"]'));r.classList.add("active"),r.setAttribute("aria-pressed","true"),t&&n.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(){"light"!==e&&"dark"!==e&&n(t())})),window.addEventListener("DOMContentLoaded",(function(){r(t()),document.querySelectorAll(".dropdown-item").forEach((function(e){e.addEventListener("click",(function(){var t=e.getAttribute("data-bs-theme-value");localStorage.setItem("theme",t),n(t),r(t,!0)}))}))}))}(),window.addEventListener("unhandledrejection",(function(e){var t={reason:e.reason,stack:e.reason?e.reason.stack:"No stack trace available",timestamp:(new Date).toISOString()};Gr.showError("Unhandled Rejection",t)}));var Gr={showError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=jr({timestamp:(new Date).toISOString(),message:e},t?{error:{message:t.message||"Unknown error",stack:t.stack||"No stack trace available",name:t.name||"Error"}}:{});console.error(JSON.stringify(n,null,2))}};document.querySelector(".toast-container")||document.body.insertAdjacentHTML("beforeend",'\n    \x3c!-- Toast Container --\x3e\n    <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1111100; transform: translate3d(0px, 36px, 0px);">\n      <div id="programToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">\n        <div class="toast-header">\n          <span id="toastIcon" class="me-2 fw-bold"></span>\n          <strong id="toastTitle" class="me-auto"></strong>\n          <small id="toastTimeDiff" class="text-muted"></small>\n          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>\n        </div>\n        <div class="toast-body">\n          <span id="toastMessage"></span>\n          <div id="toastButtons" class="mt-2 pt-2 border-top d-flex gap-2"></div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Modal Template --\x3e\n    <div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="modalTitle" aria-hidden="true">\n      <div class="modal-dialog modal-dialog-centered">\n        <div class="modal-content">\n          <div class="modal-header">\n            <h5 class="modal-title text-light" id="modalTitle"></h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n          </div>\n          <div class="modal-body" id="modalBody" style="\n    max-height: 30rem;\n    overflow: auto;\n"></div>\n          <div class="modal-footer" id="modalFooter"></div>\n        </div>\n      </div>\n    </div>\n  ');var Zr=[],$r={icons:{info:"📝",success:"✅",warning:"⚠️",error:"❌"},style_bg_color_classname:{info:"bg-info",success:"bg-success",warning:"bg-warning",error:"bg-danger"},style_bg_text_classname:{info:"text-dark",success:"text-white",warning:"text-dark",error:"text-white"}};function Qr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=jr(jr({},{type:"info",duration:3e3,position:"top-0",animate:!0,dismissible:!0,buttons:[],modal:!1,size:"medium",html:!1,triggerTime:Date.now()}),n);if(Zr.length>=3){var o=Zr.shift();o&&o.hide()}if(r.modal){var i=Jr(e,t,r);return i&&(Zr.push(i),i._element.addEventListener("hidden.bs.modal",(function(){var e=Zr.indexOf(i);-1!==e&&Zr.splice(e,1)}))),i}var a=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];try{e=Ur(e);var o=document.getElementById("programToast");if(!o)throw new Error("Toast element not found");if(o.classList.contains("show")){var i=o.cloneNode(!0);i.removeAttribute("id"),document.querySelector(".toast-container").appendChild(i),o=i}var a=new bootstrap.Toast(o,{animation:n.animate,autohide:!1!==n.duration,delay:n.duration}),s=o.querySelector("#toastIcon"),c=o.querySelector("#toastTitle"),u=o.querySelector("#toastMessage"),l=o.querySelector("#toastButtons"),d=o.querySelector(".btn-close"),h=o.querySelector("#toastTimeDiff");o.className="toast",c.className="me-auto",u.className="",h.className="text-muted",s&&(s.textContent=$r.icons[n.type],o.classList.add($r.style_bg_color_classname[n.type],$r.style_bg_text_classname[n.type])),c&&(c.classList.add($r.style_bg_text_classname[n.type]),c.textContent=e),u&&(n.html?u.innerHTML=t:u.textContent=t),l&&(l.innerHTML="",n.buttons&&n.buttons.length>0?(n.buttons.forEach((function(e){var t=document.createElement("button");t.textContent=e.text,t.className=e.class||"btn btn-sm btn-primary",t.onclick=function(){e.onClick&&e.onClick(),!1!==e.closeOnClick&&a.hide()},l.appendChild(t)})),l.style.display="flex"):l.style.display="none"),d&&(d.style.display=n.dismissible?"block":"none"),h&&(h.textContent="刚刚",h.classList.add($r.style_bg_text_classname[n.type]));var f=setInterval((function(){var e,t,r,o,i;h.textContent=(e=Date.now()-n.triggerTime,t=Math.floor(e/1e3),r=Math.floor(t/60),o=Math.floor(r/60),i=Math.floor(o/24),t<60?"".concat(t,"秒前"):r<60?"".concat(r,"分钟前"):o<24?"".concat(o,"小时前"):i<7?"".concat(i,"天前"):"刚刚")}),1e3);return a._element.addEventListener("hidden.bs.toast",(function(){clearInterval(f),r&&"programToast"!==o.id&&o.remove()})),a.show(),a}catch(e){return Gr.showError("Failed to show toast notification:",e),null}}(e=Ur(e),t,r);return a&&(Zr.push(a),a._element.addEventListener("hidden.bs.toast",(function(){var e=Zr.indexOf(a);-1!==e&&Zr.splice(e,1)}))),a}function Jr(e,t,n){try{var r;n.dismissible=Boolean(null===(r=n.dismissible)||void 0===r||r);var o=document.getElementById("notificationModal");if(!o)throw new Error("Modal element not found");var i=o.querySelector("#modalTitle"),a=o.querySelector("#modalBody"),s=o.querySelector("#modalFooter"),c=o.querySelector(".btn-close");o.querySelector(".modal-dialog").className="modal-dialog modal-dialog-centered ".concat("large"===n.size?"modal-lg":"small"===n.size?"modal-sm":""),i&&(i.innerHTML="".concat($r.icons[n.type]," ").concat(e)),a&&(n.html?a.innerHTML=t:a.textContent=t),s&&(s.innerHTML=n.dismissible?'<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>':"",n.buttons.length>0&&n.buttons.forEach((function(e){var t=document.createElement("button");t.textContent=e.text,t.className=e.class||"btn btn-primary",t.onclick=function(){e.onClick&&e.onClick(),!1!==e.closeOnClick&&u.hide()},s.appendChild(t)}))),c&&(c.style.display=n.dismissible?"block":"none");var u=new bootstrap.Modal(o,{backdrop:!!n.dismissible||"static",keyboard:n.dismissible||!1});return u.show(),u}catch(e){return Gr.showError("Failed to show modal notification:",e),null}}var Kr=function(){return Br((function e(t){Pr(this,e),this.presets=JSON.parse(JSON.stringify(t))||[],this.themeConfig=this.presets.filter((function(e){return!0===e.default}))[0],this.sections=["low","mid","high","accent"]}),[{key:"_addEventListeners",value:function(){var e=this;if(!this.eventListenersInitialized){document.querySelectorAll(".add-color-btn").forEach((function(t){t.addEventListener("click",(function(t){var n=t.currentTarget.dataset.section;e.addColorItem(n)}))}));var t=document.querySelector("#themeConfig_exportConfig");t&&t.addEventListener("click",(function(){return Hr(e.exportConfig(),1e3)}));var n=document.querySelector("#themeConfig_importConfig");n&&n.addEventListener("change",(function(t){return Hr(e.importConfig(t.target),1e3)}));var r=document.querySelector("#themeConfig_saveConfig");r&&r.addEventListener("click",(function(t){return Hr(e.saveConfig(),1e3)})),document.getElementById("confirm-reset-btn").addEventListener("click",Hr((function(){e.resetSettings(),Qr("已重置","所有设置已被清除！",{type:"info",duration:3e3}),bootstrap.Modal.getInstance(document.getElementById("resetModal")).hide()}),1e3));var o=document.getElementById("presetSelect");if(!o.hasAttribute("data-initialized")){var i=-1,a=document.createDocumentFragment();this.presets.forEach((function(e,t){var n=document.createElement("option");n.value=t,n.textContent=e.name,a.appendChild(n),!0===e.default&&(i=t)})),o.appendChild(a),-1!==i&&(o.value=i),o.setAttribute("data-initialized","true")}o.addEventListener("change",(function(t){var n=parseInt(t.target.value);!isNaN(n)&&e.presets[n]&&(e.themeConfig=JSON.parse(JSON.stringify(e.presets[n])),e.eventListenersInitialized=!1,e.initializeForm(),Qr("预设已应用","",{type:"success",duration:3e3}))})),this.eventListenersInitialized=!0}}},{key:"createSectionContainers",value:function(){var e=this,t=document.getElementById("colorSections");if(t){t.innerHTML="";var n=document.createDocumentFragment();this.sections.forEach((function(t){var r=document.createElement("div");r.className="".concat(t,"ColorsSection  mb-4"),r.innerHTML='\n            <div class="d-flex justify-content-between align-items-center mb-2">\n                <h6 class="text-capitalize mb-0">'.concat(t,' Colors</h6>\n                <small class="form-text text-muted">').concat(e.getSectionDescription(t),'</small>\n                <button type="button" class="btn btn-sm btn-outline-primary add-color-btn" data-section="').concat(t,'">\n                    <i class="material-icons">add</i>添加颜色\n                </button>\n            </div>\n            <div id="').concat(t,'Colors" class="color-items">\n            </div>\n        '),n.appendChild(r)})),t.appendChild(n)}}},{key:"getSectionDescription",value:function(e){switch(e){case"low":return"低频部分（如前奏、慢节奏段落）";case"mid":return"中频部分（如主歌、节奏适中的段落）";case"high":return"高频部分（如副歌、高潮段落）";case"accent":return"关键转折处的颜色（如情感爆发点）";default:return""}}},{key:"renderColorItems",value:function(e){var t=this,n=document.getElementById("".concat(e,"Colors"));if(n){n.innerHTML="";var r=document.createDocumentFragment(),o=document.createElement("div");o.id="".concat(e,"TotalPercentage"),o.className="total-percentage",r.appendChild(o),this.calculateTotalPercentage(e),this.themeConfig.themeColors[e].forEach((function(n,o){var i=document.createElement("div");i.className="row mb-2 align-items-center",i.innerHTML='\n            <div class="col">\n                '.concat(t.createColorSelect(e,o,n.color).outerHTML,'\n            </div>\n            <div class="col d-flex">\n                <div class="input-group flex-grow-1">\n                    <input type="number" class="form-control percentage-input"\n                           value="').concat(parseInt(n.per,10),'"\n                           min="0" max="100"\n                           data-section="').concat(e,'"\n                           data-index="').concat(o,'">\n                    <span class="input-group-text">%</span>\n                </div>\n            </div>\n            <div class="col-auto">\n                <button type="button" class="btn btn-xs btn-outline-danger remove-color-btn"\n                        data-section="').concat(e,'"\n                        data-index="').concat(o,'">\n                    <i class="material-icons">delete</i>删除\n                </button>\n            </div>\n        '),r.appendChild(i);var a=i.querySelector("select");a.value=n.color,a.onchange=function(n){null==o?t.themeConfig.themeColors.base=n.target.value:t.updateColor(e,o,n.target.value)},i.querySelector("button.remove-color-btn").addEventListener("click",(function(e){var n=e.target.dataset,r=n.section,o=n.index;t.removeColorItem(r,parseInt(o,10))})),i.querySelector("input.percentage-input").addEventListener("change",(function(e){var n=e.target.dataset,r=n.section,o=n.index;t.updatePercentage(r,parseInt(o,10),e.target.value)}))})),n.appendChild(r)}else Gr.showError("Container for ".concat(e," not found"))}},{key:"createColorSelect",value:function(e,t,n){var r=this,o=document.createElement("div");o.className="d-flex align-items-center";var i=so.AVAILABLE_COLOR_CODES_TO_HEX[n],a=document.createElement("span");a.className="swatch",a.title=i,a.style.backgroundColor=i;var s=document.createElement("select");return s.className="form-select",Object.values(so.AVAILABLE_COLOR_CODES).forEach((function(e){var t=document.createElement("option");t.value=e,t.textContent=e.toUpperCase(),t.selected=e===n,s.appendChild(t)})),s.addEventListener("change",(function(n){var o=n.target.value,i=so.AVAILABLE_COLOR_CODES_TO_HEX[o];a.style.backgroundColor=i,a.title=i,null!==t&&r.updateColor(e,t,o)})),o.appendChild(a),o.appendChild(s),o}},{key:"addColorItem",value:function(e){100!==this.calculateTotalPercentage(e)?this.themeConfig.themeColors[e].length>=10?Qr("哇哦，最多只能添加10个颜色哦！ ⚠️","每个部分的颜色数量已经达到上限啦~",{type:"warning",duration:3e3}):(this.themeConfig.themeColors[e].push({color:so.ALL_SUPPORTED_COLOR_CODES.BLU,per:"1%"}),this.renderColorItems(e),this.validatePercentages(e),this.calculateTotalPercentage(e),Qr("颜色已添加! ✨","新的颜色选项已添加到您的调色板",{type:"success",duration:2e3})):Qr("哎呀，无法添加更多颜色啦！ 🎨","该部分的颜色百分比已满（100%），没办法再添加更多颜色咯~",{type:"warning",duration:3e3})}},{key:"removeColorItem",value:function(e,t){this.themeConfig.themeColors[e].splice(t,1),0===this.themeConfig.themeColors[e].length&&this.addColorItem(e),this.renderColorItems(e),this.calculateTotalPercentage(e),this.validatePercentages(e),Qr("颜色已移除! 🗑️","该颜色已从调色板中移除",{type:"info",duration:2e3})}},{key:"updateColor",value:function(e,t,n){this.themeConfig.themeColors[e][t].color=n,this.calculateTotalPercentage(e),this.renderColorItems(e)}},{key:"updatePercentage",value:function(e,t,n){var r=parseInt(n,10);0!==r?(this.themeConfig.themeColors[e][t].per="".concat(r,"%"),this.validatePercentages(e),this.calculateTotalPercentage(e)):Qr("无效百分比！⚠️","百分比不能为0哦，这样会影响颜色配置效果，请设置一个大于0且小于等于100的百分比值呢~",{type:"error",duration:3e3})}},{key:"calculateTotalPercentage",value:function(e){var t=this.themeConfig.themeColors[e].reduce((function(e,t){return e+parseInt(t.per,10)}),0);return this.updatePercentageDisplay(e,t),t}},{key:"updatePercentageDisplay",value:function(e,t){var n=document.getElementById("".concat(e,"TotalPercentage"));n&&(n.textContent="总百分比: ".concat(t,"%"))}},{key:"validatePercentages",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.themeConfig.themeColors[e].reduce((function(e,t){return e+parseInt(t.per,10)}),0),o=100-r;return(t=r-100)>0?(document.getElementById("".concat(e,"Colors")).classList="color-items is-invalid",document.getElementById("".concat(e,"TotalPercentage")).className="text-warning total-percentage ",!n&&Qr("快速检查! 🎨","".concat(e,"的总和超出了 100%（当前：").concat(r,"%），请调整比例以使总和不超过 100%。"),{type:"warning",duration:5e3,dismissible:!0}),!1):t<0?(document.getElementById("".concat(e,"Colors")).classList="color-items is-invalid",document.getElementById("".concat(e,"TotalPercentage")).className="text-warning total-percentage is-invalid",!n&&Qr("颜色分配需达100%！🎨","".concat(e," : 你当前设置的是 ").concat(r,"%，还有 ").concat(o,"% 空余哦，快补上吧！"),{type:"warning",duration:4e3}),!1):0==t?(document.getElementById("".concat(e,"Colors")).classList="color-items is-valid",document.getElementById("".concat(e,"TotalPercentage")).className="text-success total-percentage",!0):(Qr("错误","出了一点问题，请再试一次。",{type:"error",duration:5e3}),!1)}},{key:"resetSettings",value:function(){this.themeConfig={themeColors:{low:[{color:"blu",per:"1%"}],mid:[{color:"blu",per:"1%"}],high:[{color:"blu",per:"1%"}],accent:[{color:"blu",per:"1%"}],base:"blu"}},this.eventListenersInitialized=!1,this.initializeForm()}},{key:"exportConfig",value:function(){var e=this;if(["low","mid","high","accent"].every((function(t){return e.validatePercentages(t)}))){var t=JSON.stringify(this.themeConfig,null,2),n=new Blob([t],{type:"application/json"});window.saveAs(n,"theme-config.json"),Qr("导出成功！📦","你的设置已保存为文件，快留作纪念吧~",{type:"success",duration:3e3})}}},{key:"saveConfig",value:function(){var e=this;if(!["low","mid","high","accent"].every((function(t){return e.validatePercentages(t)})))return Qr("保存失败 ❌","请确保所有颜色分配和百分比都正确。",{type:"error",duration:5e3});window.AudioAnalyzer&&window.AudioAnalyzer.handleThemeChange_manual(this.themeConfig)&&Qr("主题颜色方案准备好了！","下一步：点击“生成预设代码”按钮，创造你的灯光秀吧！",{type:"info",duration:4e3}),localStorage.setItem("lastThemeColors",JSON.stringify(this.themeConfig))}},{key:"importConfig",value:function(e){var t=this,n=e.files[0];if(n){var r=new FileReader;r.onload=function(e){try{var n=JSON.parse(e.target.result);if(!t.validateImportedConfig(n))throw new Error("Invalid color codes in imported configuration");t.themeConfig=n,t.initializeForm(),Qr("已导入！📥","你的颜色偏好已成功导入",{type:"success",duration:3e3}),t.saveConfig()}catch(e){Qr("错误","出了一点问题，请再试一次。",{type:"error",duration:5e3})}},r.onerror=function(){Qr("错误","文件读取失败，请再试一次。",{type:"error",duration:5e3})},r.readAsText(n)}}},{key:"validateImportedConfig",value:function(e){var t=Object.values(so.ALL_SUPPORTED_COLOR_CODES);if(!t.includes(e.themeColors.base))return Qr("哎呀！出错了~","主色调好像没选对，请检查一吧！",{type:"error",duration:5e3}),!1;for(var n=0,r=["low","mid","high","accent"];n<r.length;n++){var o=r[n];if(!e.themeColors[o])return Qr("哎呀！出错了~","缺少部分：".concat(o),{type:"error",duration:5e3}),!1;var i,a=Nr(e.themeColors[o]);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(!t.includes(s.color))return Qr("哎呀！出错了~","".concat(o," 部分颜色无效"),{type:"error",duration:5e3}),!1;if("string"!=typeof s.per)return Qr("哎呀！出错了~","".concat(o," 部分百分比格式无效"),{type:"error",duration:5e3}),!1;var c=parseInt(s.per,10);if(isNaN(c))return Qr("配置无效","".concat(o," 部分百分比值无效"),{type:"error",duration:5e3}),!1;if(c<0||c>100)return Qr("配置无效","".concat(o," 部分百分比值无效"),{type:"error",duration:5e3}),!1}}catch(e){a.e(e)}finally{a.f()}}return!0}},{key:"initializeForm",value:function(){var e=this,t=document.getElementById("baseColorContainer");if(t){t.innerHTML="";var n=document.createDocumentFragment(),r=this.createColorSelect("base",null,this.themeConfig.themeColors.base);n.appendChild(r),t.appendChild(n),r.onchange=function(t){e.themeConfig.themeColors.base=t.target.value}}this.createSectionContainers(),this.sections.forEach((function(t){e.renderColorItems(t),e.validatePercentages(t,!0),e.calculateTotalPercentage(t)})),this._addEventListeners()}}])}();function eo(e){if("string"!=typeof e)throw new TypeError("expect first argument to be a string");for(var t,n=e.split("\n"),r=/\[(\d*\:\d*\.?\d*)\]/,o=r,i=new RegExp(r.source+/(.+)/.source),a=[],s=[],c={},u=0;!1===i.test(n[u]);u++)a.push(n[u]);c.infos=(t={},e.split(/\r\n|\n|\r/).forEach((function(e){var n=e.match(/\[(\w+):(.+)\]/);if(n){var r=Or(n,3),o=(r[0],r[1]),i=r[2];t[o]=i.trim()}})),t),n.splice(0,a.length);for(var l=new RegExp(i.source+"|"+o.source),d=0,h=(n=n.filter((function(e){return l.test(e)}))).length;d<h;d++){var f=i.exec(n[d]),p=o.exec(n[d+1]);if(f&&p){var m=Or(f,3),v=m[1],g=m[2],y=Or(p,2)[1];s.push({start:to(v),text:g,end:to(y)})}}return c.scripts=s,c}function to(e){e=e.split(":");var t=parseInt(e[0],10),n=parseFloat(e[1]);return t>0?parseFloat((60*t+n).toFixed(2)):n}function no(e){return ro.apply(this,arguments)}function ro(){return ro=Vr(Mr().mark((function e(t){var n,r,o,i,a=arguments;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=new AbortController,o=setTimeout((function(){return r.abort()}),1e4),e.prev=3,e.next=6,fetch(t,jr(jr({},n),{},{signal:r.signal}));case 6:return i=e.sent,clearTimeout(o),e.abrupt("return",i);case 11:throw e.prev=11,e.t0=e.catch(3),clearTimeout(o),e.t0;case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),ro.apply(this,arguments)}function oo(){return io.apply(this,arguments)}function io(){return(io=Vr(Mr().mark((function e(){var t,n,r;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=sessionStorage.getItem("country"))){e.next=4;break}return e.abrupt("return",t);case 4:return e.next=6,no("https://api.ip.sb/geoip/");case 6:if((n=e.sent).ok){e.next=9;break}throw new Error("Failed to fetch geolocation data");case 9:return e.next=11,n.json();case 11:if((r=e.sent)&&r.country_code){e.next=14;break}throw new Error("Invalid geolocation data");case 14:return sessionStorage.setItem("country",r.country_code),e.abrupt("return",r.country_code);case 18:return e.prev=18,e.t0=e.catch(0),console.error("Error fetching country by IP:",e.t0),e.abrupt("return","US");case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}t().config({name:"mayday_blue_tools",storeName:"app_cache"});var ao=function(){return Br((function e(){Pr(this,e),this.state={audioContext:null,isAnalyzing:!1,audioBuffer:null,metadata:null,lyrics:null,themeColors:null},this.setupEventListeners(),this.showStatusNotStarted=function(){document.getElementById("statusNotStarted").classList.remove("d-none"),document.getElementById("statusProcessing").classList.add("d-none"),document.getElementById("statusCompleted").classList.add("d-none")},this.showStatusProcessing=function(){document.getElementById("statusNotStarted").classList.add("d-none"),document.getElementById("statusProcessing").classList.remove("d-none"),document.getElementById("statusCompleted").classList.add("d-none")},this.showStatusCompleted=function(){document.getElementById("statusNotStarted").classList.add("d-none"),document.getElementById("statusProcessing").classList.add("d-none"),document.getElementById("statusCompleted").classList.remove("d-none")}}),[{key:"setupEventListeners",value:function(){var e=this;document.getElementById("searchEntry__generate_tool").addEventListener("click",(function(){return Hr(e.handleNetworkAudioEntry(),1e3)})),document.getElementById("audioFileInput_generate_tool").addEventListener("change",(function(t){return e.handleAudioFileSelect(t)})),document.getElementById("lrcFileInput_generate_tool").addEventListener("change",(function(t){return e.handleLrcFileSelect(t)})),document.getElementById("generate-btn").addEventListener("click",(function(){return Hr(e.startAnalysis(),1500)})),document.getElementById("copy-btn").addEventListener("click",Hr(Vr(Mr().mark((function e(){var t;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=document.getElementById("output-result").value,e.next=4,navigator.clipboard.writeText(t);case 4:Qr("成功~🎉","📋 已复制~可以直接粘贴使用啦！",{type:"success",duration:3e3}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),Gr.showError("Failed to copy:",e.t0),Qr("出错了~🤔","📋 复制失败了，请重试哦！实在不行请手动复制！",{type:"error",duration:5e3});case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),1e3)),document.getElementById("download-btn").addEventListener("click",Hr((function(){try{var e=document.getElementById("output-result").value;if(!e.trim()||!e.replace(/\s/g,""))return void Qr("检查一下！💭","还没有内容可以下载。先添加一些内容吧！",{type:"warning",duration:4e3});if(go.parse(e).errors.length)return void Qr("出错了~🤔","预设代码无效，请检查内容!\n"+go.parse(e).errors,{type:"error",duration:5e3});var t=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),n=new Blob([t],{type:"text/plain;charset=utf-8"});window.saveAs(n,"converted-output.txt"),Qr("下载中~✨","文件已经开始下载，请稍等一会儿哦！",{type:"success",duration:3e3})}catch(e){Qr("出错了~ 🤔","下载失败了，请检查文件内容后再试！",{type:"error",duration:5e3,dismissible:!0}),void 0!==Gr&&"function"==typeof Gr.showError?Gr.showError("Download error:",e):console.error("Download error:",e)}}),1500))}},{key:"handleNetworkAudioEntry",value:(m=Vr(Mr().mark((function e(){var n,r,o,i,a,s,c,u,l;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=function(e,t){var n='\n        <div class="container-fluid p-0" id="song-list">\n          '.concat(e.map((function(e){return'\n            <div class="card mb-3 border-0 shadow-sm hover-overlay">\n              <div class="card-body">\n                <div class="row align-items-center g-3">\n                  <div class="col-auto">\n                    <img data-src="'.concat(e.al.picUrl,'"\n                         alt="Album Cover"\n                         class="rounded shadow-sm album-cover"\n                         style="width: 80px; height: 80px; object-fit: cover;">\n                  </div>\n                  <div class="col">\n                    <div class="d-flex justify-content-between align-items-start">\n                      <div>\n                        <h5 class="card-title mb-2">').concat(u(e.name,[t],{className:"highlight-blue",wholeWord:!1,caseSensitive:!1}),'</h5>\n                        <div class="text-body-secondary mb-1">\n                          <i class="material-icons align-middle me-1" style="font-size: 16px;">person</i>\n                          ').concat(e.ar.map((function(e){return u(e.name,[t],{className:"highlight-blue",wholeWord:!1,caseSensitive:!1})})).join(", "),'\n                        </div>\n                        <div class="text-body-secondary mb-1">\n                          <i class="material-icons align-middle me-1" style="font-size: 16px;">album</i>\n                          ').concat(u(e.al.name,[t],{className:"highlight-blue",wholeWord:!1,caseSensitive:!1}),'\n                        </div>\n                        <div class="text-body-secondary">\n                          <i class="material-icons align-middle me-1" style="font-size: 16px;">schedule</i>\n                          ').concat(Eo(e.dt,"mm:ss"),'\n                        </div>\n                      </div>\n                      <div class="ms-3">\n                        <button class="btn btn-primary btn-sm select-song-btn rounded-pill px-3"\n                                data-songid="').concat(e.id,'">\n                          <i class="material-icons align-middle me-1">add</i>选择\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            ')})).join(""),"\n        </div>\n      ");document.getElementById("searchResults").innerHTML=n,new LazyLoadImg({el:document.querySelector("#song-list"),mode:"default",time:300,complete:!0,position:{top:0,right:0,bottom:0,left:0}}),document.querySelectorAll(".select-song-btn").forEach((function(e){e.addEventListener("click",(function(e){s.getNetworkAudioInfo(e.target.closest(".select-song-btn").dataset.songid)}))}))},c=function(e){var t="",n="错误";e.message.includes("Failed to fetch")||e.message.includes("网络错误")||e.message.includes("HTTP error! status: 0")?(t='<p>网络不通畅哦，稍后再试吧~若第一次使用不了，请检查网络设置（可能需要特殊网络设置，如"魔法"），不然请放弃使用该功能。</p>',n="网络错误"):e.message.includes("HTTP error! status: 403")?(t="<p>请求被拒绝，可能是API限制或IP被封禁。请尝试使用其他网络或稍后再试。</p>",n="请求被拒绝"):e.message.includes("HTTP error! status: 404")?(t="<p>API未找到，可能是API地址有误。请检查API地址并重试。</p>",n="API未找到"):(t="<p>An error occurred while fetching results.</p>",console.error("Error fetching search results:",e)),document.getElementById("searchResults").innerHTML=t,Qr(n,t,{type:"error",html:!0,duration:5e3})},n=new AbortController,r=n.signal,Jr("在线音乐搜索",'\n<div class="card shadow-sm mb-4">\n      <div class="card-header">\n        <h2 class="h5 mb-0">找到你喜欢的音乐吧！🎵</h2>\n      </div>\n      <div class="card-body">\n        <div class="search-section d-flex align-items-center">\n          <input type="text" class="form-control" placeholder="搜索音频" id="searchInput">\n          <select class="form-select" id="searchTypeSelect">\n            <option value="1">单曲</option>\n            <option value="10" disabled>专辑</option>\n            <option value="100" disabled>歌手</option>\n            <option value="1000" disabled>歌单</option>\n            \x3c!-- ... other options ... --\x3e\n          </select>\n          <button class="btn btn-primary" type="button" id="searchButton">搜索</button>\n        </div>\n        <div id="searchResults"></div>\n      </div>\n    </div>\n      ',{type:"info",size:"large",modal:!0,buttons:[],html:!0,dismissible:!0}),document.getElementById("notificationModal").addEventListener("hidden.bs.modal",(function(e){n.abort()})),o=document.getElementById("searchInput"),i=document.getElementById("searchButton"),a=document.getElementById("searchTypeSelect"),o.addEventListener("keypress",(function(e){"Enter"===e.key&&i.click()})),i.addEventListener("click",Hr(function(){var e=Vr(Mr().mark((function e(n){var i,s,u,d,h,f,p,m,v,g;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.value.trim(),s=a.value,i){e.next=5;break}return Qr("错误","搜索词不能为空!",{type:"error",duration:3e3}),e.abrupt("return");case 5:return Qr("发起搜索！","正在尝试搜索".concat(i),{type:"info",duration:5e3}),n.target.disabled=!0,u="".concat(i,"_").concat(s),e.prev=8,e.next=11,t().getItem(u);case 11:if(!(h=e.sent)){e.next=16;break}return console.log("Using cached data for keyword:",i),l(h,i),e.abrupt("return");case 16:return e.next=18,oo();case 18:return f=e.sent,p="CN"===f?"https://1259025808-lghsuwkgbh.ap-guangzhou.tencentscf.com/cloudsearch?keywords=".concat(encodeURIComponent(i),"&type=").concat(s,"&limit=100&offset=0"):"https://netease-cloud-music-api-freysu.glitch.me/cloudsearch?keywords=".concat(encodeURIComponent(i),"&type=").concat(s,"&limit=100&offset=0"),e.next=22,fetch(p,{signal:r});case 22:if((m=e.sent).ok){e.next=25;break}throw new Error("HTTP error! status: ".concat(m.status));case 25:return e.next=27,m.json();case 27:if(v=e.sent,null===(d=v.result)||void 0===d||null===(d=d.songs)||void 0===d||!d.length){e.next=34;break}return e.next=31,t().setItem(u,v.result.songs);case 31:l(v.result.songs,i),e.next=37;break;case 34:g='<p class="mt-3">没有找到你想要的音乐~试试换个关键词吧！</p>',document.getElementById("searchResults").innerHTML=g,Qr("搜索结果",g,{type:"warning",html:!0,duration:5e3});case 37:e.next=45;break;case 39:if(e.prev=39,e.t0=e.catch(8),"AbortError"!==e.t0.name){e.next=43;break}return e.abrupt("return");case 43:console.log("error: ",e.t0),c(e.t0);case 45:return e.prev=45,n.target.disabled=!1,e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[8,39,45,48]])})));return function(t){return e.apply(this,arguments)}}(),500)),s=this,u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return e;var r=n.className,o=void 0===r?"text-primary":r,i=n.caseSensitive,a=void 0!==i&&i,s=n.wholeWord,c=void 0!==s&&s,u=n.maxHighlights,l=void 0===u?200:u,d=(Array.isArray(t)?t:[t]).map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})),h=c?"\\b":"",f=a?"g":"gi",p=d.map((function(e){return"".concat(h,"(").concat(e,")").concat(h)})).join("|"),m=0,v=new RegExp(p,f);return e.replace(v,(function(e){return m>=l?e:(m++,'<span class="'.concat(o,'">').concat(e,"</span>"))}))};case 13:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"getNetworkAudioInfo_old",value:(p=Vr(Mr().mark((function e(n){var r,o,i,a,s;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="audioInfo_old_".concat(n),e.prev=1,e.next=4,t().getItem(r);case 4:if(!((o=e.sent)&&o.url&&o.lyric)){e.next=10;break}return console.log("Using cached data for songId:",n),this.handleNetworkAudioSrc(o.url),this.handleNetworkAudioLrc(o.lyric),e.abrupt("return");case 10:return i="https://api.cenguigui.cn/api/netease/music_v1.php?id=".concat(n,"&type=json&level=standard"),e.next=13,no(i);case 13:return a=e.sent,e.next=16,a.json();case 16:if(!(s=e.sent).data||null==s.data.name||!s.data.url){e.next=25;break}return console.log("data.data: ",s.data),this.handleNetworkAudioSrc(s.data.url),this.handleNetworkAudioLrc(s.data.lyric),e.next=23,t().setItem(r,s.data);case 23:e.next=26;break;case 25:console.error("No song URL found.");case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(1),console.error("Error fetching song URL:",e.t0);case 31:case"end":return e.stop()}}),e,this,[[1,28]])}))),function(e){return p.apply(this,arguments)})},{key:"getNetworkAudioInfo",value:(f=Vr(Mr().mark((function e(n){var r,o,i,a,s;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="audioInfo_".concat(n),e.prev=1,e.next=4,t().getItem(r);case 4:if(!((o=e.sent)&&o.music_url&&o.lrc)){e.next=10;break}return console.log("Using cached data for songId:",n),this.handleNetworkAudioSrc(o.music_url),this.handleNetworkAudioLrc(o.lrc),e.abrupt("return");case 10:return i="https://api.cenguigui.cn/api/music/netease/WyY_Dg.php?type=json&id=".concat(n),e.next=13,no(i);case 13:return a=e.sent,e.next=16,a.json();case 16:if(200!=(s=e.sent).code||null==s.title||!s.music_url){e.next=25;break}return console.log("data: ",s),this.handleNetworkAudioSrc(s.music_url),this.handleNetworkAudioLrc(s.lrc),e.next=23,t().setItem(r,s);case 23:e.next=26;break;case 25:console.error("No song URL found.");case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(1),console.error("Error fetching song URL:",e.t0);case 31:case"end":return e.stop()}}),e,this,[[1,28]])}))),function(e){return f.apply(this,arguments)})},{key:"handleNetworkAudioSrc",value:(h=Vr(Mr().mark((function e(t){var n,r;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.state.audioContext){e.next=4;break}return e.next=4,this.cleanup();case 4:return this.state.audioContext=new(window.AudioContext||window.webkitAudioContext),e.next=7,no(t);case 7:return n=e.sent,e.next=10,n.arrayBuffer();case 10:return r=e.sent,e.next=13,this.state.audioContext.decodeAudioData(r);case 13:return this.state.audioBuffer=e.sent,e.next=16,this.getMetadata(this.state.audioBuffer);case 16:this.state.metadata=e.sent,this.updateFileInfo("audioFileInfo",{name:"网络音频",size:this.state.audioBuffer.length},this.state.metadata),this.updateAnalyzeButtonState(),Qr("你的音乐准备好了","下一步：配置主题颜色方案~",{type:"success",duration:3e3}),document.getElementById("processing").classList.remove("d-none"),this.showStatusNotStarted(),e.next=29;break;case 24:e.prev=24,e.t0=e.catch(0),document.getElementById("processing").classList.add("d-none"),Qr("哎呀，出错了！","音频加载失败，可能是网络问题或者文件格式不对。请检查后重试~",{type:"error",duration:5e3}),Gr.showError("Error loading network audio: ".concat(e.t0.message),e.t0);case 29:case"end":return e.stop()}}),e,this,[[0,24]])}))),function(e){return h.apply(this,arguments)})},{key:"handleNetworkAudioLrc",value:(d=Vr(Mr().mark((function e(t){return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,String(t).startsWith("[0")){e.next=3;break}return e.abrupt("return");case 3:this.state.lyrics=eo(t),this.updateAnalyzeButtonState(),Qr("成功","加载LRC文件成功",{type:"success",duration:3e3}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),Qr("错误","加载LRC文件出错: ".concat(e.t0.message),{type:"error",duration:5e3}),Gr.showError("Error loading LRC file: ".concat(e.t0.message),e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return d.apply(this,arguments)})},{key:"checkFileFormat",value:function(e){var t,n=null===(t=e.name.toLowerCase().match(/\.[^.]*$/))||void 0===t?void 0:t[0];return!![".aac",".flac",".mp3",".wav",".ogg",".m4a"].includes(n)||(Qr("文件类型检查 ⚠️","为了获得最佳效果，请使用 AAC、FLAC、MP3、WAV、OGG 或 M4A 文件！",{type:"warning",duration:4e3,dismissible:!0}),!1)}},{key:"getMetadata",value:(l=Vr(Mr().mark((function e(t){var n,r,o,i,a;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mr(t);case 3:return n=e.sent,r=n.bpm,o=n.offset,i=t.sampleRate||44100,a=t.duration||0,Qr("音频解析完成！🎵","找到 ".concat(r," BPM，时长: ").concat(this.formatDuration(a),"，偏移: ").concat(o.toFixed(2)," 秒"),{type:"success",duration:4e3}),console.log({bpm:r,sampleRate:i,duration:a,offset:o}),e.abrupt("return",{bpm:r,sampleRate:i,duration:a,offset:o});case 13:throw e.prev=13,e.t0=e.catch(0),e.t0.message.includes("Cannot use a BYOB reader with a non-byte stream")?Jr("浏览器不支持 🚀","当前浏览器不支持音频分析功能，请尝试使用 Chrome 或 Firefox 浏览器。",{type:"error",duration:5e3,modal:!0,html:!1,dismissible:!0}):Qr("音频解析问题 🎧","无法解析这个音频文件。请尝试不同的格式。",{type:"error",duration:5e3,dismissible:!0}),Gr.showError("Error parsing metadata: ".concat(e.t0.message),e.t0),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e){return l.apply(this,arguments)})},{key:"handleAudioFileSelect",value:(u=Vr(Mr().mark((function e(t){var n,r;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files[0]){e.next=3;break}return e.abrupt("return",Qr("上传失败","没有选择文件呢，先选择音乐文件再试吧~",{type:"error",duration:5e3}));case 3:if(this.checkFileFormat(n)){e.next=5;break}return e.abrupt("return");case 5:if(e.prev=5,!this.state.audioContext){e.next=9;break}return e.next=9,this.cleanup();case 9:return this.state.audioContext=new(window.AudioContext||window.webkitAudioContext),e.next=12,n.arrayBuffer();case 12:return r=e.sent,e.next=15,this.state.audioContext.decodeAudioData(r);case 15:return this.state.audioBuffer=e.sent,e.next=18,this.getMetadata(this.state.audioBuffer);case 18:this.state.metadata=e.sent,this.updateFileInfo("audioFileInfo",n,this.state.metadata),this.updateAnalyzeButtonState(),Qr("你的音乐准备好了","下一步：配置主题颜色方案~",{type:"success",duration:3e3}),document.getElementById("processing").classList.remove("d-none"),this.showStatusNotStarted(),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(5),document.getElementById("processing").classList.add("d-none"),Gr.showError("Error loading audio file: ".concat(e.t0.message),e.t0);case 30:case"end":return e.stop()}}),e,this,[[5,26]])}))),function(e){return u.apply(this,arguments)})},{key:"handleLrcFileSelect",value:(c=Vr(Mr().mark((function e(t){var n,r;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,n.text();case 6:r=e.sent,this.state.lyrics=eo(r),this.updateFileInfo("lrcFileInfo",n),this.updateAnalyzeButtonState(),Qr("成功","加载LRC文件成功",{type:"success",duration:3e3}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),Qr("错误","加载LRC文件出错: ".concat(e.t0.message),{type:"error",duration:5e3}),Gr.showError("Error loading LRC file: ".concat(e.t0.message),e.t0);case 17:case"end":return e.stop()}}),e,this,[[3,13]])}))),function(e){return c.apply(this,arguments)})},{key:"handleThemeChange",value:(s=Vr(Mr().mark((function e(t){var n,r,o=this;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.target.files[0])&&((r=new FileReader).onload=function(e){try{var t=JSON.parse(e.target.result);if(!t||!t.themeColors)throw new Error("Invalid theme configuration format");o.state.themeColors=t.themeColors,so.validateThemeColorCodes(o.state.themeColors)?(o.updateFileInfo("themeConfigInfo",n),o.updateAnalyzeButtonState(),Qr("成功","主题颜色导入成功",{type:"success",duration:3e3})):(Qr("错误","主题颜色配置无效",{type:"error",duration:5e3}),Gr.showError("Invalid theme colors configuration. - ".concat(error.message),error))}catch(e){Qr("错误","无效的JSON格式",{type:"error",duration:5e3})}},r.readAsText(n));case 2:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"handleThemeChange_manual",value:(a=Vr(Mr().mark((function e(t){return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t&&t.themeColors){e.next=3;break}throw new Error("Invalid theme configuration format");case 3:if(this.state.themeColors=t.themeColors,!so.validateThemeColorCodes(this.state.themeColors)){e.next=9;break}this.updateAnalyzeButtonState(),Qr("成功","主题颜色导入成功",{type:"success",duration:3e3}),e.next=10;break;case 9:throw new Error("Invalid theme colors configuration");case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),Qr("错误","主题颜色配置无效",{type:"error",duration:5e3}),Gr.showError("Invalid theme colors configuration: ".concat(e.t0.message),e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(e){return a.apply(this,arguments)})},{key:"updateFileInfo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{document.getElementById("fileInfoSection").classList.remove("d-none");var r=document.getElementById(e),o="文件名: ".concat(t.name,"<br>大小: ").concat(this.formatFileSize(t.size));n&&(o+="<br>时长: ".concat(this.formatDuration(n.duration)),o+="<br>采样率: ".concat(n.sampleRate,"Hz"),Qr("音频信息准备就绪 🎵",'成功加载 "'.concat(t.name,'"'),{type:"success",duration:3e3}),44100!==n.sampleRate&&48e3!==n.sampleRate&&Qr("采样率通知🎚️","检测到异常的采样率。这可能会影响处理",{type:"warning",duration:4e3,dismissible:!0}),n.duration>600&&Qr("检测到大文件 📦","此文件较大，处理可能需要更长时间",{type:"info",duration:4e3})),r.innerHTML=o}catch(e){Qr("文件信息错误 ⚠️","无法正确显示文件信息",{type:"error",duration:5e3,dismissible:!0}),Gr.showError("Error updating file info:",e)}t.size>104857600&&Qr("检测到大文件 📦","此文件较大，处理可能需要更长时间",{type:"info",duration:4e3})}},{key:"formatFileSize",value:function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]}},{key:"formatDuration",value:function(e){var t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))}},{key:"updateAnalyzeButtonState",value:function(){var e=document.getElementById("generate-btn"),t=this.state.audioBuffer&&!this.state.isAnalyzing;e.disabled=!t}},{key:"cleanup",value:(i=Vr(Mr().mark((function e(){return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.state.audioContext){e.next=4;break}return e.next=3,this.state.audioContext.close();case 3:this.state.audioContext=null;case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"startAnalysis",value:(r=Vr(Mr().mark((function e(){return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.isAnalyzing){e.next=3;break}return Qr("正在处理中 🎵","请等待当前分析完成",{type:"info",duration:3e3}),e.abrupt("return");case 3:if(this.state.isAnalyzing=!0,this.updateAnalyzeButtonState(),this.clearOutput(),e.prev=6,this.state.audioBuffer){e.next=10;break}throw Jr("缺少音频 🎵","请先上传一个音频文件",{type:"warning",duration:4e3,dismissible:!0,modal:!0,buttons:[]}),new Error("Audio buffer is not initialized");case 10:if(this.state.metadata){e.next=13;break}throw Jr("音频无效 🎵","请先换一个音频文件,再试试吧",{type:"warning",duration:4e3,dismissible:!0,modal:!0,buttons:[]}),new Error("Metadata is not initialized");case 13:if(this.state.themeColors){e.next=16;break}throw Jr("颜色主题问题 🎨","没读取到颜色设置!请检查是否保存",{type:"error",duration:4e3,dismissible:!0,modal:!0,buttons:[]}),new Error("Theme colors are not initialized");case 16:if(so.validateThemeColorCodes(this.state.themeColors)){e.next=19;break}throw Jr("颜色主题问题 🎨","颜色设置似乎有问题",{type:"error",duration:4e3,dismissible:!0,modal:!0,buttons:[]}),new Error("Invalid themeColors configuration");case 19:return e.next=21,this.generateColorSequence();case 21:Qr("🎉 代码已生成！","快复制或者下载吧，导入到Mayday.blue 小程序试试！",{type:"success",duration:4e3}),this.showStatusCompleted(),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(6),Gr.showError("Analysis failed: ".concat(e.t0.message),e.t0),Qr("分析错误 🎧",e.t0.message,{type:"error",duration:5e3,dismissible:!0});case 29:return e.prev=29,this.state.isAnalyzing=!1,this.updateAnalyzeButtonState(),e.finish(29);case 33:case"end":return e.stop()}}),e,this,[[6,25,29,33]])}))),function(){return r.apply(this,arguments)})},{key:"generateColorSequence",value:(n=Vr(Mr().mark((function e(){var t,n,r,i,a,s,c,u,l,d,h,f,p,m=this,v=arguments;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:1,e.prev=1,n=this.state.metadata.offset||0,r=this.state.metadata.bpm||120,(i=this.state.metadata.duration||0)>600&&console.warn("Audio duration exceeds recommended length of 10 minutes"),this.state.audioBuffer.length/1048576>50&&console.warn("Large File Detected 📦","This might take a little longer to process",{type:"warning",duration:4e3}),this.showStatusProcessing(),Qr("🚀 开始生成","正在努力生成你的代码，稍等片刻哦！",{type:"info",duration:2e3}),a=60/r*1e3*t,s=Math.ceil(1e3*(i-n)/a),c={},!this.state.lyrics){e.next=17;break}return e.next=16,o.e(144).then(o.bind(o,144));case 16:c=e.sent.default;case 17:u=this.state.lyrics?this.state.lyrics.scripts.sort((function(e,t){return e.start-t.start})):[],l=-1/0,d=[],h=0,f=document.createDocumentFragment(),p=function(){var e=Vr(Mr().mark((function e(t){var r,o,v;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=100,o=Mr().mark((function e(){var t,r,o,h,p,g,y,b,w,C,E;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n+v*a/1e3,r=100*Math.round(10*t),console.log("Processing time: ".concat(t,"s, Normalized: ").concat(r,", Total Duration: ").concat(i,"s")),!(t<n||t>=i)){e.next=6;break}return console.log("Skipping out-of-range time: ".concat(t,"s")),e.abrupt("return",1);case 6:return o=u.find((function(e){return Math.abs(e.start-t)<.1})),e.prev=7,e.next=10,m.processAudioChunk(m.state.audioBuffer,t,.1);case 10:h=e.sent,p=.5,g=.5,"number"!=typeof h.frequency||isNaN(h.frequency)||(p=h.frequency>0?Math.min(h.frequency/2e3,1):0),"number"!=typeof h.amplitude||isNaN(h.amplitude)||(g=h.amplitude),p=Math.max(0,Math.min(1,p)),g=Math.max(0,Math.min(1,g)),y=0,o&&(y=c(o.text).comparative),b=r-l>=800,"off4"===(w=so.getColorCode(p,g,y,m.state.themeColors,b))&&(l=r),C="\n[歌词]: ".concat(o?o.text:"无",",\n[情感分数]: ").concat(y,",\n [时间]: ").concat(r,",\n[颜色]: ").concat(w,",\n[归一化频率]: ").concat(p,",\n[归一化幅度]: ").concat(g,"\n"),(E=document.createElement("div")).textContent=C,f.appendChild(E),o?d.push("".concat(r,",").concat(w," // ").concat(o.text)):d.push("".concat(r,",").concat(w)),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(7),e.t0.message&&e.t0.message.includes("Reached end of file")?Qr("处理完成 🎵","完成音频文件的分析",{type:"success",duration:3e3}):(Qr("处理错误 🎧","分析你的音频时出现问题",{type:"error",duration:5e3,dismissible:!0}),Gr.showError("Error analyzing audio: ".concat(e.t0)));case 32:m.updateProgress(v/s*100);case 33:case"end":return e.stop()}}),e,null,[[7,29]])})),v=t;case 4:if(!(v<t+r&&v<s)){e.next=11;break}return e.delegateYield(o(),"t0",6);case 6:if(!e.t0){e.next=8;break}return e.abrupt("continue",8);case 8:v++,e.next=4;break;case 11:statusLogger.appendChild(f),(h+=r)<s?requestAnimationFrame((function(){return p(h)})):m.handleAnalysisResult(d),e.next=20;break;case 16:throw e.prev=16,e.t1=e.catch(0),Qr("块处理错误",e.t1.message,{type:"error",duration:5e3,dismissible:!0}),e.t1;case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),p(0),e.next=31;break;case 26:throw e.prev=26,e.t0=e.catch(1),Qr("分析错误",e.t0.message,{type:"error",duration:5e3,dismissible:!0}),this.updateProgress(0),e.t0;case 31:case"end":return e.stop()}}),e,this,[[1,26]])}))),function(){return n.apply(this,arguments)})},{key:"processAudioChunk",value:(e=Vr(Mr().mark((function e(t,n,r){return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){if(t){var i=t.sampleRate;if(i){var a=Math.floor(n*i),s=Math.floor(r*i);if(a<0||a>=t.length)o(new Error("Start sample out of bounds"));else try{var c=t.getChannelData(0);if(!c)return void o(new Error("Channel data is null"));var u=c.slice(a,a+s);if(!u||0===u.length)return void o(new Error("Invalid audio chunk"));for(var l=u.reduce((function(e,t){return e+Math.abs(t)}),0)/s,d=0,h=1;h<u.length;h++)(u[h]>0&&u[h-1]<=0||u[h]<0&&u[h-1]>=0)&&d++;var f=d*i/(2*u.length);e({amplitude:isNaN(l)?0:l,frequency:isNaN(f)?0:f})}catch(e){o(new Error("Audio processing error: ".concat(e.message)))}}else o(new Error("Invalid sample rate"))}else o(new Error("Audio buffer is null or undefined"))})));case 1:case"end":return e.stop()}}),e)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"updateProgress",value:function(e){var t=document.getElementById("progressBar"),n=document.getElementById("progressText");t.style.width="".concat(e,"%"),n.textContent="".concat(Math.round(e),"%"),t.setAttribute("aria-valuenow",e),n.setAttribute("aria-live","polite")}},{key:"handleAnalysisResult",value:function(e){document.getElementById("output-result").value=this.formatTimelineData(e)}},{key:"formatTimelineData",value:function(e){return e.map((function(e){var t=Or(e.split(","),3),n=t[0],r=t[1],o=t[2];return"".concat(n,",").concat(r," ").concat(o?"// ".concat(o):"")})).join("\n")}},{key:"clearOutput",value:function(){document.getElementById("output-result").value="",document.getElementById("statusLogger").innerHTML="",this.updateProgress(0)}},{key:"getDefaultThemeColors",value:function(){return{base:"blu",low:[{color:"blu",per:60},{color:"pur",per:40}],mid:[{color:"pin",per:50},{color:"red",per:50}],high:[{color:"yel",per:40},{color:"ora",per:60}],accent:[{color:"whi",per:100}]}}}]);var e,n,r,i,a,s,c,u,l,d,h,f,p,m}(),so=function(){return Br((function e(){Pr(this,e)}),null,[{key:"getColorCodeMap",value:function(){var e=this;return Object.keys(this.ALL_SUPPORTED_COLOR_CODES).reduce((function(t,n){var r=e.ALL_SUPPORTED_COLOR_CODES[n];return t[r]=e.SPECIAL_INTENSITIES[r]||new Set(e.INTENSITIES),t}),{})}},{key:"validateThemeColorCodes",value:function(e){for(var t=this.getColorCodeMap(),n=Object.keys(t),r=0,o=["low","mid","high","accent"];r<o.length;r++){var i=o[r];if(!Array.isArray(e[i]))return Gr.showError("Invalid themeColors: ".concat(i," should be an array"),"error"),!1;var a,s=Nr(e[i]);try{for(s.s();!(a=s.n()).done;){var c=a.value;if("object"!==Tr(c)||!c.color||!c.per)return Qr("颜色范围问题 🎨","".concat(i,"范围需要正确配置！ ").concat(i,"范围内的颜色信息无效: ").concat(JSON.stringify(c)),{type:"error",duration:4e3}),!1;if(!n.includes(c.color))return Qr("颜色选择无效 🎨","请为".concat(i,"范围选择一个有效的颜色！").concat(i,"范围内颜色无效: ").concat(c.color),{type:"error",duration:4e3,dismissible:!0}),!1;var u=parseInt(c.per);if(isNaN(u)||u<=0||u>100)return Qr("百分比范围 📊","颜色百分比必须在1到100之间！".concat(i,"范围内无效百分比: ").concat(c.per),{type:"warning",duration:4e3}),!1}}catch(e){s.e(e)}finally{s.f()}var l=e[i].reduce((function(e,t){return e+parseInt(t.per)}),0);if(100!==l)return Qr("百分比范围 🎯","".concat(i,"范围百分比加起来应该是100!"),{type:"warning",duration:5e3,dismissible:!0}),!1}return!("string"!=typeof e.base||!n.includes(e.base))||(Qr("基础颜色缺失 🔍","请为您的主题选择一个基础颜色！",{type:"error",duration:4e3}),!1)}},{key:"validateColorCode",value:function(e){var t=e.slice(0,3),n=e.slice(3),r=this.getColorCodeMap();return!!r.hasOwnProperty(t)&&r[t].has(n)}},{key:"getValidColorCode",value:function(e,t){var n=this,r=this.getColorCodeMap();if(!r.hasOwnProperty(e))return null;var o=Array.from(r[e]);if(o.includes(t))return"".concat(e).concat(t);var i=o.reduce((function(e,r){return Math.abs(n.INTENSITIES.indexOf(r)-n.INTENSITIES.indexOf(t))<Math.abs(n.INTENSITIES.indexOf(e)-n.INTENSITIES.indexOf(t))?r:e}),o[0]);return"".concat(e).concat(i)}},{key:"getColorIntensity",value:function(e,t){var n=t*(1-Math.pow(Math.abs(e-.5),2)+1);return isNaN(n)?"off4":n>=.9?"T":n>=.7?"4":n>=.5?"3":n>=.3?"2":"1"}},{key:"mapFrequencyToColorInRange",value:function(e,t){if(!Array.isArray(t)||0===t.length)return null;if(t.every((function(e){return e.per===t[0].per}))){for(var n=t.map((function(e){return e.color})),r=n.length-1;r>0;r--){var o=Math.floor(Math.random()*(r+1)),i=[n[o],n[r]];n[r]=i[0],n[o]=i[1]}return n[Math.floor(Math.random()*n.length)]}var a,s=Math.random(),c=0,u=Nr(t);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(s<=(c+=parseFloat(l.per)/100))return l.color}}catch(e){u.e(e)}finally{u.f()}return t[t.length-1].color}},{key:"mapFrequencyToColor",value:function(e,t){var n;if(n=e<.33?t.low:e<.66?t.mid:t.high,!Array.isArray(n)||0===n.length)throw new Error("Invalid color range");return this.mapFrequencyToColorInRange(e,n)}},{key:"getAccentColor",value:function(e){if(!Array.isArray(e.accent)||0===e.accent.length)throw new Error("Invalid accent color range");return this.mapFrequencyToColorInRange(Math.random(),e.accent)}},{key:"getColorCode",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=Math.pow(t,.6)*this.getSensitivityFactor(e),a="";try{a=this.mapFrequencyToColor(e,r)}catch(e){Gr.showError("Error in mapFrequencyToColor: ".concat(e,". Using base color."),"warn"),a=r.base}if(i>=.7)try{a=this.getAccentColor(r)}catch(e){Gr.showError("Error in getAccentColor: ".concat(e,". Using original color."),"warn")}var s=this.getColorIntensity(e,i);if(n>.75?s=Math.min(parseInt(s)+Math.ceil(.75*n),4).toString():n<-.75&&(s=Math.max(parseInt(s)-Math.ceil(.75*Math.abs(n)),1).toString()),i>.98&&(s="T"),o&&i>=.5)return"off4";var c="".concat(a).concat(s);if(!this.validateColorCode(c)){var u=this.getValidColorCode(a,s);u?(Gr.showError("[WARN]Invalid color code generated: ".concat(c,". Falling back to ").concat(u,"."),"warn"),c=u):(Gr.showError("[ERROR]Critical error: Unable to generate a valid color code - ".concat(c,"."),"error"),c="whi4")}return c}},{key:"getSensitivityFactor",value:function(e){return 1+.3*Math.sin((e-.3)*Math.PI)}}])}();Wr(so,"ALL_SUPPORTED_COLOR_CODES",{RED:"red",ORA:"ora",YEL:"yel",SKY:"sky",BLU:"blu",PUR:"pur",PIN:"pin",WHI:"whi",OFF:"off",RAI:"rai"}),Wr(so,"AVAILABLE_COLOR_CODES",["red","ora","yel","sky","blu","pur","pin","whi"]),Wr(so,"AVAILABLE_COLOR_CODES_TO_HEX",{red:"#FF0000",ora:"#FFA500",yel:"#FFFF00",sky:"#87CEEB",blu:"#0000FF",pur:"#800080",pin:"#FFC0CB",whi:"#FFFFFF"}),Wr(so,"INTENSITIES",["1","2","3","4","T"]),Wr(so,"SPECIAL_INTENSITIES",{pin:new Set(["2","4"]),whi:new Set(["4","T"]),off:new Set(["4"]),rai:new Set(["4"])});var co=document.getElementById("dropZone"),uo=document.getElementById("fileInput"),lo=document.getElementById("sequenceInput");function ho(e){e.preventDefault(),e.stopPropagation()}function fo(e){co.classList.add("drag-over")}function po(e){co.classList.remove("drag-over")}function mo(e){var t=e[0];if(t){var n=new FileReader;n.onload=function(e){lo.value=e.target.result,Qr("成功","预设代码已准备好!",{type:"success",duration:3e3})},n.readAsText(t)}}["dragenter","dragover","dragleave","drop"].forEach((function(e){co.addEventListener(e,ho,!1),document.body.addEventListener(e,ho,!1)})),["dragenter","dragover"].forEach((function(e){co.addEventListener(e,fo,!1)})),["dragleave","drop"].forEach((function(e){co.addEventListener(e,po,!1)})),co.addEventListener("drop",(function(e){mo(e.dataTransfer.files)}),!1),co.addEventListener("click",(function(){return uo.click()})),uo.addEventListener("change",(function(e){mo(e.target.files)}));var vo={colors:{red:{4:"#ef4444",3:"#f87171",2:"#fca5a5",1:"#fecaca",T:"#ef4444"},ora:{4:"#f97316",3:"#fb923c",2:"#fdba74",1:"#fed7aa",T:"#f97316"},yel:{4:"#eab308",3:"#facc15",2:"#fde047",1:"#fef08a",T:"#eab308"},sky:{4:"#06b6d4",3:"#22d3ee",2:"#67e8f9",1:"#a5f3fc",T:"#06b6d4"},blu:{4:"#3b82f6",3:"#60a5fa",2:"#93c5fd",1:"#bfdbfe",T:"#3b82f6"},pur:{4:"#a855f7",3:"#c084fc",2:"#d8b4fe",1:"#e9d5ff",T:"#a855f7"},off:{4:"#333333"},pin:{4:"#ec4899",2:"#f472b6"},whi:{4:"#ffffff",T:"#eeeeee"}},colorCache:new Map,getColorCode:function(e){var t;if(this.colorCache.has(e))return this.colorCache.get(e);var n=[e.slice(0,3),e.slice(3)],r=n[0],o=n[1],i=(null===(t=this.colors[r])||void 0===t?void 0:t[o])||null;return this.colorCache.set(e,i),i}},go=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Pr(this,e),this.sequence=t}return Br(e,[{key:"addFrame",value:function(e,t){if("number"!=typeof e||e<0)throw new Error("Invalid time value");if(!t||"string"!=typeof t)throw new Error("Invalid color value");this.sequence.push({time:e,color:t}),this.sort()}},{key:"sort",value:function(){this.sequence.sort((function(e,t){return e.time-t.time}))}},{key:"getFrameAtTime",value:function(e){if(!this.sequence.length)return null;for(var t=0,n=this.sequence.length-1;t<n;){var r=Math.floor((t+n+1)/2);this.sequence[r].time<=e?t=r:n=r-1}return this.sequence[t]}},{key:"getDuration",value:function(){return 0===this.sequence.length?0:this.sequence[this.sequence.length-1].time}},{key:"clear",value:function(){this.sequence=[]}},{key:"loadFromInput",value:function(t){var n=this,r=e.parse(t),o=r.errors,i=r.frames;if(o.length)throw new Error(o.join("\n"));i.forEach((function(e){var t=e.time,r=e.color;return n.addFrame(t,r)}))}}],[{key:"validate",value:function(e,t){if("string"!=typeof e)return{errors:["Line ".concat(t+1,": Invalid input type")]};if(e.length<=0)return{errors:["Line ".concat(t+1,": Empty Context")]};if(e.length>1e3)return{errors:["Line ".concat(t+1,": Line too long")]};var n=e.split("//")[0].trim();if(!n)return null;var r=[],o=n.split(",").map((function(e){return e.trim()})),i=Or(o,2),a=i[0],s=i[1],c=parseInt(a);return isNaN(c)?r.push("Line ".concat(t+1,": Invalid time value: ").concat(a)):c%100!=0&&r.push("Line ".concat(t+1,": Time must be multiple of 100ms")),s?vo.getColorCode(s)||r.push("Line ".concat(t+1,": Invalid color code: ").concat(s)):r.push("Line ".concat(t+1,": Missing color value")),r.length?{errors:r}:{time:c,color:s}}},{key:"parse",value:function(t){var n=t.split("\n"),r=[],o=[];n.forEach((function(t,n){var i=e.validate(t,n);i&&(i.errors?r.push.apply(r,function(e){return function(e){if(Array.isArray(e))return Dr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.errors)):o.push(i))})),o.sort((function(e,t){return e.time-t.time}));for(var i=1;i<o.length;i++){var a=o[i].time-o[i-1].time;a<200&&r.push("Invalid gap of ".concat(a,"ms between ").concat(o[i-1].time,"ms and ").concat(o[i].time,"ms"))}return{errors:r,frames:o}}}])}(),yo=function(){return Br((function e(t,n){Pr(this,e),this.element=t,this.timerDisplay=n,this.timeline=null,this.startTimeStamp=0,this.lastFrameTimeStamp=0,this.animationFrame=null,this.pausedTimeStamp=0,this.audioCurrentTimeStamp=0,this.isPaused=!1,this.colorInfoTemplate=document.createElement("div"),this.colorInfoTemplate.className="color-info"}),[{key:"setTimeline",value:function(e){this.timeline=e,this.reset()}},{key:"start",value:function(){this.isPaused?(this.startTimeStamp=performance.now()-this.pausedTimeStamp,this.isPaused=!1):(this.reset(),this.startTimeStamp=performance.now()),this.animate()}},{key:"pause",value:function(){!this.isPaused&&this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null,this.pausedTimeStamp=performance.now()-this.startTimeStamp,this.isPaused=!0)}},{key:"resume",value:function(){this.isPaused&&this.start()}},{key:"stop",value:function(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null),this.reset(),this.element.dispatchEvent(new CustomEvent("animationStopped"))}},{key:"reset",value:function(){this.startTimeStamp=0,this.lastFrameTimeStamp=0,this.pausedTimeStamp=0,this.isPaused=!1,this.element.style.backgroundColor="var(--surface-secondary",this.element.innerHTML="",this.updateDisplay(0)}},{key:"restart",value:function(){this.stop(),this.start()}},{key:"clear",value:function(){this.stop(),this.timeline=null,this.element.style.backgroundColor="var(--surface-secondary",this.element.innerHTML="",this.updateDisplay(0)}},{key:"destroy",value:function(){this.clear(),this.element=null,this.timerDisplay=null,this.colorInfoTemplate=null}},{key:"hexToRgb",value:function(e){var t=parseInt(e.slice(1),16),n=t>>8&255,r=255&t;return"rgb(".concat(t>>16&255,", ").concat(n,", ").concat(r,")")}},{key:"updateColorInfo",value:function(e,t,n){var r=document.createDocumentFragment(),o=this.colorInfoTemplate.cloneNode(!0);o.innerHTML="\n                    <div>Name: ".concat(e,"</div>\n                    <div>Time: ").concat(n,"ms</div>\n                    <div>Hex: ").concat(t,"</div>\n                    <div>RGB: ").concat(this.hexToRgb(t),"</div>\n                "),r.appendChild(o),this.element.innerHTML="",this.element.appendChild(r)}},{key:"animate",value:function(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isPaused)if(this.lastFrameTimeStamp&&r-this.lastFrameTimeStamp<16)this.animationFrame=requestAnimationFrame((function(e){return n.animate(e)}));else{this.lastFrameTimeStamp=r;var o=this.audioCurrentTimeStamp;this.updateDisplay(o);var i=null===(e=this.timeline)||void 0===e?void 0:e.getFrameAtTime(o);if(i){var a,s=vo.getColorCode(i.color);s?(this.element.style.backgroundColor=s,this.updateColorInfo(i.color,s,i.time),o<=(null===(t=this.timeline)||void 0===t?void 0:t.getDuration())+1e3?this.animationFrame=requestAnimationFrame((function(e){return n.animate(e)})):this.stop()):o<=(null===(a=this.timeline)||void 0===a?void 0:a.getDuration())+1e3?this.animationFrame=requestAnimationFrame((function(e){return n.animate(e)})):this.stop()}else{var c;o<=(null===(c=this.timeline)||void 0===c?void 0:c.getDuration())+1e3?this.animationFrame=requestAnimationFrame((function(e){return n.animate(e)})):this.stop()}}}},{key:"updateDisplay",value:function(e){this.timerDisplay.textContent=Eo(e,"mm:ss:ms"),document.querySelector("#milliseconds ").textContent="".concat(Math.floor(e),"ms")}},{key:"updateAnimation",value:function(e){var t,n=null===(t=this.timeline)||void 0===t?void 0:t.getFrameAtTime(e);if(n){var r=vo.getColorCode(n.color);r&&(this.element.style.backgroundColor=r,this.updateColorInfo(n.color,r,n.time))}}},{key:"updateProgress",value:function(e){this.audioCurrentTimeStamp=e,this.animate()}}])}(),bo=function(){return Br((function e(t){Pr(this,e),this.audio=t,this.isInitialized=!1,this.canvas=document.getElementById("visualizer"),this.ctx=this.canvas.getContext("2d"),this.visualizationType=document.getElementById("visualizationType"),this.minHeight=100,this.maxHeight=200,this.setupAudioContext(),this.setupEventListeners(),this.resizeCanvas()}),[{key:"setupAudioContext",value:function(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=window.innerWidth<768?1024:2048,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.source=this.audioContext.createMediaElementSource(this.audio),this.source.connect(this.analyser),this.analyser.connect(this.audioContext.destination),this.isInitialized=!0}},{key:"setupEventListeners",value:function(){var e,t=this;window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout((function(){return t.resizeCanvas()}),250)})),this.visualizationType.addEventListener("change",(function(){return t.draw()})),this.visualizationType.value="frequency",window.addEventListener("orientationchange",(function(){setTimeout((function(){return t.resizeCanvas()}),100)}))}},{key:"resizeCanvas",value:function(){var e,t=this.canvas.parentElement.offsetWidth,n=window.innerWidth;e=n<576?this.minHeight:n<992?Math.min(1.5*this.minHeight,this.maxHeight):this.maxHeight,this.canvas.style.height="".concat(e,"px"),this.canvas.width=t*window.devicePixelRatio,this.canvas.height=e*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio),this.analyser.fftSize=n<768?1024:2048,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength)}},{key:"draw",value:function(){var e=this;this.isInitialized&&(requestAnimationFrame((function(){return e.draw()})),this.analyser.getByteTimeDomainData(this.dataArray),this.ctx.fillStyle="rgba(0, 0, 0, 0.2)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),"frequency"===this.visualizationType.value?this.drawFrequencyBars():this.drawWaveform())}},{key:"drawFrequencyBars",value:function(){this.analyser.getByteFrequencyData(this.dataArray);var e=window.innerWidth,t=e<576?1.5:2.5,n=this.canvas.width/this.bufferLength*t,r=e<576?.5:1,o=0;this.ctx.fillStyle="rgba(0, 0, 0, 0.2)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);for(var i=0;i<this.bufferLength;i++){var a=this.dataArray[i]/255*this.canvas.height*.8,s=this.ctx.createLinearGradient(0,0,0,this.canvas.height);s.addColorStop(0,"#00ff88"),s.addColorStop(.5,"#00ffff"),s.addColorStop(1,"#0088ff"),this.ctx.fillStyle=s,this.ctx.fillRect(o,this.canvas.height-a,Math.max(n,1),a),o+=n+r}}},{key:"drawWaveform",value:function(){this.analyser.getByteTimeDomainData(this.dataArray),this.ctx.lineWidth=window.innerWidth<576?1:2,this.ctx.strokeStyle="#00ffff",this.ctx.beginPath();for(var e=this.canvas.width/this.bufferLength,t=0,n=0;n<this.bufferLength;n++){var r=this.dataArray[n]/128*(this.canvas.height/2);0===n?this.ctx.moveTo(t,r):this.ctx.lineTo(t,r),t+=e}this.ctx.lineTo(this.canvas.width,this.canvas.height/2),this.ctx.stroke()}},{key:"start",value:function(){"suspended"===this.audioContext.state&&this.audioContext.resume(),this.draw()}},{key:"stop",value:function(){"running"===this.audioContext.state&&this.audioContext.suspend()}}])}(),wo=function(){return Br((function e(t){Pr(this,e),this.audio=t,this.setupWavesurfer()}),[{key:"setupWavesurfer",value:function(){var e=this;this.wavesurfer=Ar.create({container:"#wavesurfer_color_preview",media:this.audio,waveColor:"rgb(200, 0, 200)",progressColor:"rgb(100, 0, 100)"}),this.wavesurfer.on("ready",(function(){e.visualizerReady=!0}))}},{key:"loadAudio",value:function(e){this.wavesurfer.load(e)}},{key:"start",value:function(){this.visualizerReady&&this.wavesurfer.play()}},{key:"stop",value:function(){this.visualizerReady&&this.wavesurfer.pause()}},{key:"destroy",value:function(){this.visualizerReady&&this.wavesurfer.destroy()}}])}(),Co=function(){return Br((function e(t){Pr(this,e),this.audio=new Audio,this.waveSurferController=null,this.isAudioLoaded=!1,this.syncedWithTimeline=!0,this.isDraggingProgress=!1,this.animationController=t||null,this.visualizer=null,this.setupAudioElements(),this.setupEventListeners()}),[{key:"setupAudioElements",value:function(){this.audioDropZone=document.getElementById("audioDropZone"),this.audioInput=document.getElementById("audioInput"),this.audioControls=document.getElementById("audioControls"),this.audioProgress=document.getElementById("audioProgress"),this.currentTimeDisplay=document.getElementById("currentTime"),this.totalTimeDisplay=document.getElementById("totalTime"),this.audioFileName=document.getElementById("audioFileName"),this.currentPer=document.getElementById("currentPer")}},{key:"setupEventListeners",value:function(){var e=this;this.audioDropZone.addEventListener("drop",(function(t){return e.handleAudioDrop(t)})),this.audioDropZone.addEventListener("click",(function(){return e.audioInput.click()})),this.audioInput.addEventListener("change",(function(t){return e.handleAudioSelect(t)})),this.audio.addEventListener("loadedmetadata",(function(){return e.handleAudioLoaded()})),this.audio.addEventListener("timeupdate",(function(){return e.updateTimeDisplay()})),this.audio.addEventListener("ended",(function(){return e.handleAudioEnded()})),this.audioProgress.addEventListener("input",(function(t){if(e.audio&&!isNaN(e.audio.duration)&&e.audio.duration>0){var n=parseFloat(t.target.value)/100*e.audio.duration;isFinite(n)&&n>=0?e.audio.currentTime=n:Qr("播放出错","检测到无效的时间位置.",{type:"error",duration:3e3})}else Qr("音频未就绪","请确保音频文件已正确加载。",{type:"warning",duration:3e3})})),this.audioProgress.addEventListener("mousedown",(function(t){e.isDraggingProgress=!0,e.handleProgressChange(t)})),this.audioProgress.addEventListener("mousemove",(function(t){e.isDraggingProgress&&e.handleProgressChange(t)})),this.audioProgress.addEventListener("mouseup",(function(t){e.isDraggingProgress=!1,e.handleProgressChange(t)}));var t=document.getElementById("volumeControl");t&&t.addEventListener("input",(function(t){e.setVolume(t.target.value/100)}))}},{key:"handleProgressChange",value:function(e){if(this.audio&&!isNaN(this.audio.duration)&&this.audio.duration>0){var t=parseFloat(e.target.value)/100*this.audio.duration;isFinite(t)&&t>=0?(this.audio.currentTime=t,this.updateTimeDisplay()):Qr("播放出错","检测到无效的时间位置.",{type:"error",duration:3e3})}else Qr("音频未就绪","请确保音频文件已正确加载。",{type:"warning",duration:3e3})}},{key:"handleAudioDrop",value:function(e){e.preventDefault();var t=e.dataTransfer.files[0];t&&t.type.startsWith("audio/")&&this.loadAudioFile(t)}},{key:"handleAudioSelect",value:function(e){var t=e.target.files[0];t&&this.loadAudioFile(t)}},{key:"loadAudioFile",value:function(e){console.log("loadAudioFile: ",e);var t=URL.createObjectURL(e);this.audio.src=t,this.audioFileName.textContent=e.name,this.isAudioLoaded=!0,this.updateControlButtons(!0),document.querySelector("#run").disabled=!1,this.waveSurferController||(this.waveSurferController=new wo(this.audio)),this.waveSurferController.loadAudio(t),this.visualizer||(this.visualizer=new bo(this.audio)),Qr("成功","音频加载成功!",{type:"success",duration:3e3})}},{key:"handleAudioLoaded",value:function(){this.audioProgress.max=100,this.totalTimeDisplay.textContent=this.formatTime(this.audio.duration)}},{key:"updateTimeDisplay",value:function(){var e=this.audio.currentTime||0,t=this.audio.duration||0,n=0!==e&&0!==t?(e/t*100).toFixed(2):0;this.currentTimeDisplay.textContent=this.formatTime(e),this.totalTimeDisplay.textContent=this.formatTime(t),this.currentPer.textContent="".concat(n,"%"),this.audioProgress.value=n,this.syncedWithTimeline&&this.animationController&&this.animationController.updateProgress(1e3*this.audio.currentTime)}},{key:"handleAudioEnded",value:function(){this.audioProgress.value=0,this.updateTimeDisplay(),this.syncedWithTimeline&&document.getElementById("stop").click()}},{key:"formatTime",value:function(e){var t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))}},{key:"setVolume",value:function(e){var t=Math.max(0,Math.min(1,e));return this.audio.volume=t,t}},{key:"seekTo",value:function(e){if(this.isAudioLoaded){var t=Math.max(0,Math.min(e,this.audio.duration));this.audio.currentTime=t,this.updateTimeDisplay()}}},{key:"skipForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.isAudioLoaded&&this.seekTo(this.audio.currentTime+e)}},{key:"skipBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.isAudioLoaded&&this.seekTo(this.audio.currentTime-e)}},{key:"toggleMute",value:function(){return this.audio.muted=!this.audio.muted,this.audio.muted}},{key:"getAudioState",value:function(){return{currentTime:this.audio.currentTime,duration:this.audio.duration,volume:this.audio.volume,playbackRate:this.audio.playbackRate,isMuted:this.audio.muted,isPlaying:!this.audio.paused}}},{key:"play",value:function(e){var t;this.isAudioLoaded&&(void 0!==e&&this.seekTo(e),this.audio.play(),null===(t=this.waveSurferController)||void 0===t||t.start())}},{key:"syncWithControls_run",value:function(){var e;this.isAudioLoaded&&(this.audio.currentTime=0,this.play(),null===(e=this.waveSurferController)||void 0===e||e.start(),this.updateControlButtons(!0))}},{key:"syncWithControls_pause",value:function(){var e;this.isAudioLoaded&&(this.audio.pause(),null===(e=this.waveSurferController)||void 0===e||e.stop())}},{key:"syncWithControls_resume",value:function(){var e;this.isAudioLoaded&&(this.play(),null===(e=this.waveSurferController)||void 0===e||e.start())}},{key:"syncWithControls_stop",value:function(){var e;this.isAudioLoaded&&(this.audio.pause(),this.audio.currentTime=0,null===(e=this.waveSurferController)||void 0===e||e.stop(),this.updateTimeDisplay(),this.audioProgress.value=0,this.currentPer.textContent="0%")}},{key:"syncWithControls_restart",value:function(){var e;this.isAudioLoaded&&(this.audio.currentTime=0,this.currentPer.textContent="0%",this.play(),null===(e=this.waveSurferController)||void 0===e||e.start())}},{key:"syncWithControls_clear",value:function(){var e;this.isAudioLoaded&&(this.audio.pause(),this.audio.currentTime=0,null===(e=this.waveSurferController)||void 0===e||e.destroy(),this.waveSurferController=null,this.isAudioLoaded=!1,this.audio.src="",this.audioFileName.textContent="",this.audioProgress.value=0,this.currentPer.textContent="0%",this.updateTimeDisplay(),this.updateControlButtons(!1))}},{key:"updateControlButtons",value:function(e){document.querySelectorAll(".control-button").forEach((function(t){e?t.classList.add("synced"):t.classList.remove("synced")}))}}])}();function Eo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd HH:mm:ss",n=Math.floor(e/1e3),r=e%1e3,o=Math.floor(n/60),i=n%60,a=Math.floor(o/60),s=o%60,c=Math.floor(a/24),u=a%24,l=String(c).padStart(2,"0"),d=String(u).padStart(2,"0"),h=String(s).padStart(2,"0"),f=String(i).padStart(2,"0"),p=String(r.toFixed(0)).padStart(2,"0");return t.replace("dd",l).replace("HH",d).replace("mm",h).replace("ss",f).replace("ms",p)}["dragenter","dragover","dragleave","drop"].forEach((function(e){document.getElementById("audioDropZone").addEventListener(e,ho,!1)})),window.addEventListener("load",(function(){var e=document.querySelectorAll('input[type="file"]');Array.from(e).some((function(e){return""!==e.value}))&&(e.forEach((function(e){e.value=""})),Qr("需要选择文件","请再次选择您的文件以确保正确处理。",{type:"info",duration:5e3,buttons:[{text:"OK",class:"btn btn-sm btn-primary",onClick:function(){}}]}))})),document.addEventListener("DOMContentLoaded",Vr(Mr().mark((function e(){var t,n,r,o,i,a,s,c,u,l,d,h,f,p,m,v;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g=void 0,(g=document.createElement("script")).src="https://cdn.jsdelivr.net/npm/segmentit@2.0.3/dist/umd/segmentit.min.js",g.defer=!0,g.crossOrigin="anonymous",g.onload=function(){console.log("Script loaded successfully!"),document.getElementById("loadingOverlay").classList.add("d-none")},document.body.appendChild(g),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach((function(e){new bootstrap.Tooltip(e)})),document.querySelectorAll('input[name="musicSource"]').forEach((function(e){e.addEventListener("change",(function(){"search"===this.value?(document.getElementById("searchSection").style.display="block",document.getElementById("uploadSection").style.display="none"):"upload"===this.value&&(document.getElementById("searchSection").style.display="none",document.getElementById("uploadSection").style.display="block")}))})),document.getElementById("searchRadio").checked?(document.getElementById("searchSection").style.display="block",document.getElementById("uploadSection").style.display="none"):document.getElementById("uploadRadio").checked&&(document.getElementById("searchSection").style.display="none",document.getElementById("uploadSection").style.display="block"),t={colorElement:document.getElementById("colorElement"),input:document.getElementById("sequenceInput"),timerDisplay:document.getElementById("timer"),buttons:{run:document.getElementById("run"),pause:document.getElementById("pause"),resume:document.getElementById("resume"),stop:document.getElementById("stop"),restart:document.getElementById("restart"),clear:document.getElementById("clear")}},n=new Kr(window.MY_PRESETS);try{(r=localStorage.getItem("lastThemeColors"))&&void 0!==r&&null!=r&&(n.themeConfig=JSON.parse(r))}catch(e){console.log("error-initializeForm: ",e)}if(n.initializeForm(),window.AudioAnalyzer=new ao,o=new yo(t.colorElement,t.timerDisplay),i=new Co(o),t.colorElement.addEventListener("animationStopped",(function(){a(!1,!1)})),a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.buttons.run.disabled=e,t.buttons.pause.disabled=!e||n,t.buttons.resume.disabled=!n,t.buttons.stop.disabled=!e,t.buttons.restart.disabled=!o.timeline,t.buttons.clear.disabled=!o.timeline,t.buttons.run.title="开始（空格）",t.buttons.pause.title="暂停（空格）",t.buttons.resume.title="恢复播放（空格）",t.buttons.stop.title="停止（Esc）",t.buttons.restart.title="重新启动（Ctrl/Cmd+R）",t.buttons.clear.title="清除（Ctrl/Cmd+Del）"},s=function(){if(document.activeElement!==t.input){var e=go.parse(t.input.value),n=e.errors,r=e.frames;if(n.length)return Qr("时间轴内容检查 ⚠️","在你的时间轴内容上发现了一些问题:\n"+n.join("\n"),{type:"error",duration:5e3,dismissible:!0}),l();if(0!==r.length)try{o.timeline=new go(r),o.start(),i.syncWithControls_run(),a(!0),Qr("开始预览 🎵","当前在预览时间轴颜色效果",{type:"success",duration:3e3})}catch(e){Qr("播放错误 🎼","无法开始预览。请重试！",{type:"error",duration:4e3,dismissible:!0}),Gr.showError("Animation error:",e)}else Qr("空白时间轴内容 🎬","找不到有效的时间轴。请先添加一些内容！",{type:"warning",duration:4e3})}else Qr("检测到正在输入 ⌨️","请在运行前完成编辑",{type:"info",duration:3e3})},c=function(){document.activeElement!==t.input?(o.pause(),i.syncWithControls_pause(),a(!0,!0)):Qr("检测到正在输入 ⌨️","请在暂停前完成编辑",{type:"info",duration:3e3})},u=function(){document.activeElement!==t.input?(o.resume(),i.syncWithControls_resume(),a(!0,!1)):Qr("检测到正在输入 ⌨️","请在播放前完成编辑",{type:"info",duration:3e3})},l=function(){if(document.activeElement!==t.input){o.stop(),i.syncWithControls_stop(),a();var e=document.querySelector(".modal-backdrop.fade.show");null==e||e.remove()}else Qr("检测到正在输入 ⌨️","请在暂停前完成编辑",{type:"info",duration:3e3})},d=function(){document.activeElement!==t.input?(o.restart(),i.syncWithControls_restart(),a(!0)):Qr("检测到正在输入 ⌨️","请在暂停前完成编辑",{type:"info",duration:3e3})},h=function(){document.activeElement!==t.input?t.input.value.trim()?Jr("清除已生成的时间轴内容","你确定要清除所有内容吗？此操作无法撤销。",{type:"warning",buttons:[{text:"是的，清除所有 ",class:"btn btn-danger",onClick:function(){f()}},{text:"Cancel",class:"btn btn-secondary",onClick:function(){Qr("已取消清除 ↩️","你的时间轴内容没有改变",{type:"info",duration:3e3})}}],modal:!0}):Qr("没什么需要清理的 🌟","时间轴内容已经空了",{type:"info",duration:3e3}):Qr("检测到正在输入 ⌨️","请在清除前完成编辑",{type:"info",duration:3e3})},f=function(){try{t.input.value="",o.stop(),o.timeline=null,t.colorElement.style.backgroundColor="var(--surface-secondary",t.timerDisplay.textContent="[00:00:00] => 0ms",i.syncWithControls_clear(),a(),Qr("清除成功 ✨","一切都被成功重置了",{type:"success",duration:3e3})}catch(e){Qr("清除错误 ⚠️","清除输入的时间轴内容时出错",{type:"error",duration:4e3,dismissible:!0}),Gr.showError("Clear error:",e)}},t.buttons.run.addEventListener("click",s),t.buttons.pause.addEventListener("click",c),t.buttons.resume.addEventListener("click",u),t.buttons.stop.addEventListener("click",l),t.buttons.restart.addEventListener("click",d),t.buttons.clear.addEventListener("click",h),p=0,m=0,window.addEventListener("error",(function(e){if(e.message.indexOf("Script Error"))return console.log(e);if(p>=5)Jr("频繁错误",'\n                <div class="alert alert-warning">\n                    <p><strong>频繁出现错误:</strong></p>\n                    <p>快跟作者反馈一下!:</p>\n                    <ul>\n                        <li>刷新页面</li>\n                        <li>检查您的输入数据</li>\n                        <li>请在几分钟后重试</li>\n                    </ul>\n                </div>\n            ',{type:"warning",size:"large",dismissible:!0,modal:!0,html:!0,buttons:[{text:"确定",class:"btn btn-primary",onClick:function(){return location.reload()},closeOnClick:!0}]});else{p++;var t=(new Date).getTime();if(!(t-m<5e3)){m=t;var n={message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:e.error,stack:e.error?e.error.stack:"No stack trace available",timestamp:(new Date).toISOString()};Jr("发生错误",'\n              <div class="alert alert-danger">\n                  <p><strong>出错了:</strong></p>\n                  <p>'.concat(e.message,"</p>\n                  <p>文件: ").concat(e.filename,"</p>\n                  <p>行号: ").concat(e.lineno,", 列号: ").concat(e.colno,"</p>\n              </div>\n              <p>请尝试以下方法:</p>\n              <ul>\n                  <li>刷新页面</li>\n                  <li>检查您的输入数据</li>\n                  <li>请在几分钟后重试</li>\n              </ul>\n          "),{type:"error",size:"large",dismissible:!0,modal:!0,html:!0,buttons:[{text:"报告错误",class:"btn btn-danger",onClick:function(){return Qr("Report Error","好了好了我知道了!")},closeOnClick:!0}]}),Gr.showError("Error occurred:",n);var r=document.querySelector(".modal-backdrop.fade.show");return null==r||r.remove(),l()}}})),v=function(){Mousetrap.bind("space",(function(e){e.preventDefault(),document.querySelector('.nav-link.active[data-bs-target="#color-visualizer"]')&&(o.timeline?o.isPaused?u():c():s())})),Mousetrap.bind(["escape","mod+s"],(function(e){e.preventDefault(),document.querySelector('.nav-link.active[data-bs-target="#color-visualizer"]')&&l()})),Mousetrap.bind("mod+r",(function(e){e.preventDefault(),document.querySelector('.nav-link.active[data-bs-target="#color-visualizer"]')&&d()})),Mousetrap.bind("mod+backspace",(function(e){e.preventDefault(),document.querySelector('.nav-link.active[data-bs-target="#color-visualizer"]')&&h()})),Mousetrap.bind("mod+enter",(function(e){e.preventDefault(),document.querySelector('.nav-link.active[data-bs-target="#color-visualizer"]')&&s()})),Mousetrap.bind(["mod+s","mod+r"],(function(e){e.preventDefault(),document.querySelector('.nav-link.active[data-bs-target="#color-visualizer"]')})),Mousetrap.bind("mod+.",(function(e){e.preventDefault(),document.querySelector('.nav-link.active[data-bs-target="#color-visualizer"]')&&(document.querySelector(".modal-backdrop.fade.show")||Jr("快捷键帮助 ⌨️","<div>可用的快捷键:<br>\n      • 空格键 (Space) - 播放/暂停切换<br>\n      • Ctrl/Cmd + Enter - 运行<br>\n      • Esc 或 Ctrl/Cmd + S - 停止<br>\n      • Ctrl/Cmd + R - 重新开始<br>\n      • Ctrl/Cmd + Backspace - 清除内容<br>\n      <br>\n提示: 在编辑文本时，快捷键会暂时禁用</div>",{type:"info",buttons:[{text:"OK",class:"btn btn-primary",onClick:function(){}}],modal:!0,dismissible:!0,html:!0}))}))},window.Mousetrap?v():Gr.showError("Mousetrap not found. Hotkeys will not work. Please install it from npm."),a(),t.buttons.run.disabled=!0,!window.hljs){e.next=43;break}return e.next=41,Xr();case 41:e.next=44;break;case 43:Gr.showError("Highlight.js not found. Skipping code highlighting.");case 44:if(!localStorage.getItem("isNewUser"))try{Jr("公告📢 - 2024/11/23 15:20",'\n<div class="card shadow-sm mb-4">\n        <div class="card-header">\n          <h2 class="modal-title" id="announcementModalLabel">欢迎wmls来玩 Mayday.Blue 预设工具~</h2>\n        </div>\n        <div class="modal-body">\n<h6>制作者<a\n  href="https://www.xiaohongshu.com/user/profile/5c1610720000000005018c49"\n  target="_blank">（小红书@那一转眼只剩我🥕)</a>留言：</h6>\n<p>你只需要选择你喜欢的音乐文件并配置好主题颜色方案，剩下的交给我~<br>生成的质量还再不停优化!<br>感谢<a\n      href="https://www.xiaohongshu.com/user/profile/5d7e751900000000010010bd"\n      target="_blank">小红书@Diu🥕</a>大佬开发的<strong><code style="font-family: \'Lato\', sans-serif;">Mayday.Blue</code></strong>小程序!\n</p>\n\n<h6>网站功能简介：</h6>\n<ul>\n  <li><strong>预设代码生成器：</strong>提供你想做预设的音频文件,轻松配置荧光棒的颜色主题并生成 <strong><code style="font-family: \'Lato\', sans-serif;">Mayday.Blue</code></strong> 场控预设代码。</li>\n  <li><strong>预设代码可视化工具：</strong>可以把生成的预设代码添加进来，实时展示荧光棒使用到的电脑颜色效果。</li>\n  <li><strong>预设代码编辑器：</strong>请访问<a\n                  class="link-info"\n                  target="_blank"\n                  href="./editor.html"\n                  title="预设代码编辑器"\n                ><strong>预设代码编辑器</strong></a>页面</li>\n</ul>\n\n<h6>功能详细介绍：</h6>\n<ul>\n  <li>生成工具🎨：请看<strong>预设代码生成器</strong>选项卡的使用指南</li>\n  <li>实时预览👀：请看<strong>预设代码可视化工具</strong>选项卡的使用指南</li>\n  <li>代码编辑✍️：\n<ol>\n  <li>\n    <strong>音频波形可视化</strong\n    >：上传音频文件后，编辑器会显示音频的波形图，方便你直观地查看音频结构。\n  </li>\n  <li>\n    <strong>颜色快速插入</strong\n    >：在编辑器下方的快速访问工具栏中有一个颜色调色板，点击任意颜色按钮，即可将对应的颜色代码自动插入到编辑器中，方便你根据节奏为荧光棒卡点。\n  </li>\n  <li>\n    <strong>语法高亮</strong>：编辑器支持语法高亮，代码格式为\n    <code>时间戳,颜色代码 //注释</code>，例如\n    <code>1,red4 //红色</code\n    >。时间戳、颜色代码和注释都会被高亮显示，便于阅读和编辑。\n  </li>\n  <li><strong>自动补全</strong>：编辑器支持自动补全功能，提高编码效率。</li>\n  <li>\n    <strong>代码校验与格式化</strong\n    >：编辑器能够实时校验和格式化你输入的预设代码，如果有错误会立即提示，并给出修改建议。\n  </li>\n  <li>\n    <strong>文件管理</strong\n    >：支持导入和导出预设代码，同时具备自动保存和备份功能，确保你的工作不会丢失。\n  </li>\n</ol>\n  </li>\n</ul>\n\n<h6>重要细节：</h6>\n<ul>\n  <li>生成的代码可以直接复制并粘贴到你的<strong><code style="font-family: \'Lato\', sans-serif;">Mayday.Blue</code></strong>中。</li>\n  <li>支持导出和导入颜色主题配置，方便保存和分享创意。</li>\n</ul>\n        </div>\n      </div>\n  ',{type:"info",size:"large",buttons:[{text:"开始使用（不再展示)",class:"btn btn-primary",onClick:function(){localStorage.setItem("isNewUser","false");var e=document.querySelector("#notificationModal");e&&e.classList.contains("show")&&new bootstrap.Modal(e).hide();var t=[{element:"#guideHeading",popover:{title:"使用指南：如何生成预设代码 ",description:"首先，请导入你喜欢的歌曲吧！这一步可是关键哦，它将为我们的荧光棒色彩之旅奠定基础。",position:"right"}},{element:"#fileFormCollapse",popover:{description:"<p>想在线找音乐，就点蓝色的 “在线搜索音乐”，再点下面的 “点我去搜索”，就能从网上找音乐啦。</p>",position:"right"}},{element:"#fileFormCollapse",popover:{description:'<p>要是想上传自己电脑里的音乐，就点 “上传本地音乐”（点了会变蓝）。然后点 “浏览...”，从自己电脑里选音乐文件就行，像 MP3、WAV、FLAC 这些格式都可以。</p><span class="text-muted">一万首的mp3 一万次疯狂的爱 灭不了一个渺小的孤单</span>',position:"right"}},{element:'.card-header[id="themeConfigHeading"]',popover:{description:"现在，让我们来为荧光棒挑选漂亮的颜色主题吧！",position:"bottom"}},{element:"#baseColorContainer",popover:{description:"在这里，先选择一个基础颜色，它就像歌曲的灵魂一样，会决定整个荧光棒颜色变化的主基调哦。想象一下，哪种颜色最能代表你心中五月天歌曲的感觉呢？",position:"bottom"}},{element:"#colorSections",popover:{description:"然后，我们要为歌曲的不同部分设置颜色啦。每个部分都可以有自己独特的颜色哦。调整颜色的比例，让它们完美地配合歌曲的节奏，就像一场绚丽的色彩派对！",position:"bottom"}},{element:".lowColorsSection",popover:{description:"低频部分（如前奏、慢节奏段落）",position:"bottom"}},{element:".midColorsSection",popover:{description:"中频部分（如主歌、节奏适中段落）",position:"bottom"}},{element:".highColorsSection",popover:{description:"高频部分（如副歌、高潮段落）",position:"bottom"}},{element:".accentColorsSection",popover:{description:"关键转折处（如情感爆发点）",position:"bottom"}},{element:"#themeConfig_saveConfig",popover:{description:"当你完成颜色设置后，点击这个保存配置按钮，就能保存你的颜色主题配置啦。",position:"left"}},{element:"#themeConfig_exportConfig",popover:{description:"如果你想分享你的颜色主题设置，可以点击这个导出配置按钮，将配置导出为文件。",position:"left"}},{element:"label[for='themeConfig_importConfig']",popover:{description:"想要使用已有的颜色主题配置？点击这个导入配置按钮，选择相应的文件即可。",position:"left"}},{element:"#generate-btn",popover:{description:"歌曲和颜色主题配置都准备好啦，接下来就是见证奇迹的时刻——点击这个按钮就生成Mayday.blue 的预设代码了！",position:"right"}},{element:"#output-result",popover:{description:"看，这里就是生成的代码显示区域啦。代码生成后，你可以点击“复制”按钮把它复制到剪贴板，然后粘贴到Mayday.Blue应用中，或者点击“下载”保存为.json文件备用哦。",position:"top"}},{element:"#copy-btn",popover:{description:"点击这个“复制”按钮，就可以轻松把代码复制下来，准备好让荧光棒闪耀起来吧！",position:"left"}},{element:"#download-btn",popover:{description:"如果你想把代码保存下来，以防万一，就点击这个“下载”按钮，它会把代码保存为一个方便的.json文件哦。",position:"bottom"}}],n=window.driver&&window.driver.js.driver;setTimeout((function(){n({animate:!0,showProgress:!1,nextBtnText:"下一个",prevBtnText:"上一个",doneBtnText:"结束",popoverClass:"driverjs-theme",steps:t,scrollIntoViewOptions:{behavior:"smooth"}}).drive()}),300)}}],html:!0,dismissible:!1})}catch(e){console.error("显示公告时发生错误:",e),document.querySelector("#notificationModal #modalBody").innerHTML='<iframe id="myIframe" src="https://sx5w7odpp7p.feishu.cn/docx/IcuIdkFKJofwhsxfW4GcVdGSnQd" width="100%" height="600px"></iframe>'}case 46:case"end":return e.stop()}var g}),e)}))))})()})();